{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/AddTopic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/AddTopic.vue","mtime":1597033943567},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiIH0gZnJvbSAnQC9tYWluJwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnQC9tYWluJwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnCmV4cG9ydCBkZWZhdWx0IHsKCWRhdGE6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHsKCQkvLyBOZXcgVG9waWMgaW5mbwoJCWNyZWF0ZWRUb3BpYzogewoJCQl0aXRsZTogJycsCgkJCXRodW1iVVJMOiAnbG9nby5wbmcnLAoJCQljb250ZW50TUQ6ICd0aGlzIGlzIGludHJvZHVjdG9yeSBjb250ZW50IHRoYXQgd2lsbCBwcm9iYWJseSBlbmQgdXAgYmVpbmcgYSBwYXJhZ3JhcGggbG9uZycKCQl9LAoJCS8vIEZvcm0KCQl0aW1lUGVyaW9kczogWwoJCQknUmVnaW9uYWwgSW50ZXJhY3Rpb25zICgxMjAwIC0gMTQ1MCknLAoJCQknRmlyc3QgR2xvYmFsIEFnZSAoMTQ1MCAtIDE3NTApJywKCQkJJ1Jldm9sdXRpb25zICYgSW5kdXN0cmlhbGl6YXRpb24gKDE3NTAgLSAxOTAwKScsCgkJCSdNb2Rlcm4gVGltZXMgKDE5MDAgLSBQcmVzZW50KScKCQldLAoJCXRpbWVQZXJpb2Q6ICcnLAoJCS8vIFZhbGlkYXRpb24KCQl2YWxpZDogdHJ1ZSwKCQlydWxlOiBbIHYgPT4gISF2IHx8ICdSZXF1aXJlZCcgXSwKCQlpbWdSdWxlOiBbIHYgPT4gISF2IHx8IHYuc2l6ZSA8IDIwMDAwMDAgfHwgJ0ltYWdlIHNpemUgc2hvdWxkIGJlIGxlc3MgdGhhbiAyIE1CISddCgl9fSwKCW1ldGhvZHM6IHsKCQlhc3luYyBzdWJtaXREYXRhICgpIHsKCQkJLy9jcmVhdGluZyBkb2MKCQkJbGV0IHRvcGljSUQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCJ0b3BpY3MiKS5hZGQodGhpcy5jcmVhdGVkVG9waWMpCgkJCQkudGhlbihmdW5jdGlvbihkb2NSZWYpIHsKCQkJCQlyZXR1cm4gZG9jUmVmLmlkOwoJCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKCQkJCQljb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKCQkJCX0pOwoJCQkKCQkJY29uc29sZS5sb2codG9waWNJRCkKCQkJLy9wdWxsaW5nIGluZm8gZnJvbSB0aW1lUGVyaW9kcwoJCQl2YXIgdXBkYXRlZFRvcGljcyA9IFtdCgkJCXZhciBpZCA9ICcnCgkJCWF3YWl0IGRiLmNvbGxlY3Rpb24oInRpbWVQZXJpb2RzIikud2hlcmUoJ3RpdGxlJywgJz09JywgdGhpcy50aW1lUGVyaW9kKS5nZXQoKQoJCQkJLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewoJCQkJCXF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbihkb2MpIHsKCQkJCQkJY29uc29sZS5sb2coJ2RvYycsIGRvYykKCQkJCQkJdXBkYXRlZFRvcGljcyA9IGRvYy5kYXRhKCkudG9waWNUaXRsZXMKCQkJCQkJaWQgPSBkb2MuaWQKCQkJCQl9KTsKCQkJCX0pCgkJCQkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKCQkJCQljb25zb2xlLmxvZygiRXJyb3IgZ2V0dGluZyBkb2N1bWVudHM6ICIsIGVycm9yKTsKCQkJCX0pOwoJCQkJCgkJCS8vdXBkYXRpbmcgdGltZVBlcmlvZHMKCQkJdmFyIG5ld1RvcGljID0ge3RvcGljSUQ6IHRvcGljSUQsIHRpdGxlOiB0aGlzLmNyZWF0ZWRUb3BpYy50aXRsZSwgdGh1bWJVUkw6IHRoaXMuY3JlYXRlZFRvcGljLnRodW1iVVJMfQoJCQl1cGRhdGVkVG9waWNzLnB1c2gobmV3VG9waWMpCgkJCWRiLmNvbGxlY3Rpb24oInRpbWVQZXJpb2RzIikuZG9jKGlkKS51cGRhdGUoIHsndG9waWNUaXRsZXMnOiB1cGRhdGVkVG9waWNzfSApCgkJCQkudGhlbihmdW5jdGlvbigpIHsgY29uc29sZS5sb2coICJEb2N1bWVudCBzdWNjZXNzZnVsbHkgdXBkYXRlZCEiKTsgfSkKCQkJCS5jYXRjaChmdW5jdGlvbihlcnJvcikgeyBjb25zb2xlLmVycm9yKCAiRXJyb3IgdXBkYXRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsgfSk7CgkJCQoJCQl0aGlzLnJlc2V0KCkKCQl9LAoJCXZhbGlkYXRlICgpIHsgCgkJCXRoaXMudmFsaWQgPSBmYWxzZQoJCQl0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSAKCQl9LAoJCXJlc2V0ICgpIHsgdGhpcy4kcmVmcy5mb3JtLnJlc2V0KCkgfQoJfQp9Cg=="},{"version":3,"sources":["AddTopic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddTopic.vue","sourceRoot":"src/views/Adding_Content","sourcesContent":["<template>\n<div id=\"app\">\n\t<v-container>\n\t\t<v-row class=\"blue-grey darken-2 white--text text-center\">\n\t\t\t<v-col>\n\t\t\t\t<h1 class=\"display-1\">Add a New Topic</h1>\n\t\t\t\t<blockquote class=\"blockquote pa-0\">Fill the following form to add topics and topics to the home web page</blockquote>\n\t\t\t</v-col>\n\t\t</v-row>\n\t\t<!-- FORM -->\n\t\t<v-form ref=\"form\" v-model=\"valid\">\n\t\t\t<v-row>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t<v-col cols=\"9\">\n\t\t\t\t\t<v-text-field label=\"Topic title:\" autocomplete=\"off\" v-model=\"createdTopic.title\" :rules=\"rule\" required></v-text-field>\n\t\t\t\t\t<v-select v-model=\"timePeriod\" :items=\"timePeriods\" label=\"Choose Time Period:\" outlined dense :rules=\"rule\" required>{{ timePeriods }}</v-select>\n\t\t\t\t\t<v-row class=\"pt-2\">\n\t\t\t\t\t\t<v-col cols=\"4\">\n\t\t\t\t\t\t\t<v-file-input disabled accept=\"image/*\" counter show-size label=\"Thumbnail\"></v-file-input>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t<v-textarea disabled outlined name=\"input-7-4\" label=\"Topic intro content\" value=\"This is just a tester, don't fill out\" ></v-textarea>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row>\n\t\t\t\t\t<v-row>\n\t\t\t\t\t\t<v-col class=\"d-flex justify-end row-reverse\">\n\t\t\t\t\t\t\t<v-btn class=\"mr-3\" large color=\"error\" outlined @click=\"reset\">Reset Form</v-btn>\n\t\t\t\t\t\t\t<v-btn :disabled=\"!valid\" large color=\"success\" @click=\"submitData\">SUBMIT</v-btn>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row>\n\t\t\t\t</v-col>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t</v-row>\n\t\t</v-form>\n\t</v-container>\n</div>\n</template>\n\n\n<script>\nimport { db } from '@/main'\nimport firebase from '@/main'\nimport _ from 'lodash'\nexport default {\n\tdata: function () { return {\n\t\t// New Topic info\n\t\tcreatedTopic: {\n\t\t\ttitle: '',\n\t\t\tthumbURL: 'logo.png',\n\t\t\tcontentMD: 'this is introductory content that will probably end up being a paragraph long'\n\t\t},\n\t\t// Form\n\t\ttimePeriods: [\n\t\t\t'Regional Interactions (1200 - 1450)',\n\t\t\t'First Global Age (1450 - 1750)',\n\t\t\t'Revolutions & Industrialization (1750 - 1900)',\n\t\t\t'Modern Times (1900 - Present)'\n\t\t],\n\t\ttimePeriod: '',\n\t\t// Validation\n\t\tvalid: true,\n\t\trule: [ v => !!v || 'Required' ],\n\t\timgRule: [ v => !!v || v.size < 2000000 || 'Image size should be less than 2 MB!']\n\t}},\n\tmethods: {\n\t\tasync submitData () {\n\t\t\t//creating doc\n\t\t\tlet topicID = await db.collection(\"topics\").add(this.createdTopic)\n\t\t\t\t.then(function(docRef) {\n\t\t\t\t\treturn docRef.id;\n\t\t\t\t}).catch(function(error) {\n\t\t\t\t\tconsole.error(\"Error adding document: \", error);\n\t\t\t\t});\n\t\t\t\n\t\t\tconsole.log(topicID)\n\t\t\t//pulling info from timePeriods\n\t\t\tvar updatedTopics = []\n\t\t\tvar id = ''\n\t\t\tawait db.collection(\"timePeriods\").where('title', '==', this.timePeriod).get()\n\t\t\t\t.then(function(querySnapshot) {\n\t\t\t\t\tquerySnapshot.forEach(function(doc) {\n\t\t\t\t\t\tconsole.log('doc', doc)\n\t\t\t\t\t\tupdatedTopics = doc.data().topicTitles\n\t\t\t\t\t\tid = doc.id\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t//updating timePeriods\n\t\t\tvar newTopic = {topicID: topicID, title: this.createdTopic.title, thumbURL: this.createdTopic.thumbURL}\n\t\t\tupdatedTopics.push(newTopic)\n\t\t\tdb.collection(\"timePeriods\").doc(id).update( {'topicTitles': updatedTopics} )\n\t\t\t\t.then(function() { console.log( \"Document successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error( \"Error updating document: \", error); });\n\t\t\t\n\t\t\tthis.reset()\n\t\t},\n\t\tvalidate () { \n\t\t\tthis.valid = false\n\t\t\tthis.$refs.form.validate() \n\t\t},\n\t\treset () { this.$refs.form.reset() }\n\t}\n}\n</script>\n"]}]}