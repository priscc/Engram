{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/components/Barchart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/components/Barchart.vue","mtime":1594350154762},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNjYWxlTGluZWFyLCBzY2FsZUJhbmQgfSBmcm9tICdkMy1zY2FsZScKaW1wb3J0IHsgbWF4LCBtaW4gfSBmcm9tICdkMy1hcnJheScKaW1wb3J0IHsgc2VsZWN0QWxsIH0gZnJvbSAnZDMtc2VsZWN0aW9uJwppbXBvcnQgeyB0cmFuc2l0aW9uIH0gZnJvbSAnZDMtdHJhbnNpdGlvbicKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQmFyQ2hhcnQnLAogIHByb3BzOiB7CiAgICB0aXRsZTogU3RyaW5nLAogICAgeEtleTogU3RyaW5nLAogICAgeUtleTogU3RyaW5nLAogICAgZGF0YTogQXJyYXkKICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBzdmdXaWR0aDogMCwKICAgIHJlZHJhd1RvZ2dsZTogdHJ1ZQogIH0pLAogIG1ldGhvZHM6IHsKICAgIEFuaW1hdGVMb2FkICgpIHsKICAgICAgc2VsZWN0QWxsKCdyZWN0JykKICAgICAgICAuZGF0YSh0aGlzLmRhdGEpCiAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgIC5kZWxheSgoZCwgaSkgPT4gewogICAgICAgICAgcmV0dXJuIGkgKiAxNTAKICAgICAgICB9KQogICAgICAgIC5kdXJhdGlvbigxMDAwKQogICAgICAgIC5hdHRyKCd5JywgZCA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy55U2NhbGUoZFt0aGlzLnlLZXldKQogICAgICAgIH0pCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGQgPT4gewogICAgICAgICAgcmV0dXJuIHRoaXMuc3ZnSGVpZ2h0IC0gdGhpcy55U2NhbGUoZFt0aGlzLnlLZXldKQogICAgICAgIH0pCiAgICB9LAogICAgQWRkUmVzaXplTGlzdGVuZXIgKCkgewogICAgICAvLyByZWRyYXcgdGhlIGNoYXJ0IDMwMG1zIGFmdGVyIHRoZSB3aW5kb3cgaGFzIGJlZW4gcmVzaXplZAogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgIHRoaXMuJGRhdGEucmVkcmF3VG9nZ2xlID0gZmFsc2UKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJGRhdGEucmVkcmF3VG9nZ2xlID0gdHJ1ZQogICAgICAgICAgdGhpcy4kZGF0YS5zdmdXaWR0aCA9CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKS5vZmZzZXRXaWR0aCAqIDAuNzUKICAgICAgICAgIHRoaXMuQW5pbWF0ZUxvYWQoKQogICAgICAgIH0sIDMwMCkKICAgICAgfSkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBkYXRhTWF4ICgpIHsKICAgICAgcmV0dXJuIG1heCh0aGlzLmRhdGEsIGQgPT4gewogICAgICAgIHJldHVybiBkW3RoaXMueUtleV0KICAgICAgfSkKICAgIH0sCiAgICBkYXRhTWluICgpIHsKICAgICAgcmV0dXJuIG1pbih0aGlzLmRhdGEsIGQgPT4gewogICAgICAgIHJldHVybiBkW3RoaXMueUtleV0KICAgICAgfSkKICAgIH0sCiAgICB4U2NhbGUgKCkgewogICAgICByZXR1cm4gc2NhbGVCYW5kKCkKICAgICAgICAucmFuZ2VSb3VuZChbMCwgdGhpcy5zdmdXaWR0aF0pCiAgICAgICAgLnBhZGRpbmcoMC4xKQogICAgICAgIC5kb21haW4oCiAgICAgICAgICB0aGlzLmRhdGEubWFwKGQgPT4gewogICAgICAgICAgICByZXR1cm4gZFt0aGlzLnhLZXldCiAgICAgICAgICB9KQogICAgICAgICkKICAgIH0sCiAgICB5U2NhbGUgKCkgewogICAgICByZXR1cm4gc2NhbGVMaW5lYXIoKQogICAgICAgIC5yYW5nZVJvdW5kKFt0aGlzLnN2Z0hlaWdodCwgMF0pCiAgICAgICAgLmRvbWFpbihbdGhpcy5kYXRhTWluID4gMCA/IDAgOiB0aGlzLmRhdGFNaW4sIHRoaXMuZGF0YU1heF0pCiAgICB9LAogICAgc3ZnSGVpZ2h0ICgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3ZnV2lkdGggLyAxLjYxODAzMzk4ODc1IC8vIGdvbGRlbiByYXRpbwogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLnN2Z1dpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpLm9mZnNldFdpZHRoICogMC43NQogICAgdGhpcy5BZGRSZXNpemVMaXN0ZW5lcigpCiAgICB0aGlzLkFuaW1hdGVMb2FkKCkKICB9Cn0K"},{"version":3,"sources":["Barchart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Barchart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<div id=\"container\" class=\"svg-container\" align=\"center\">\n\t\t<h1>{{ title }}</h1>\n\t\t<svg v-if=\"redrawToggle === true\" :width=\"svgWidth\" :height=\"svgHeight\">\n\t\t\t<g>\n\t\t\t\t<rect\n\t\t\t\t\tv-for=\"item in data\"\n\t\t\t\t\tclass=\"bar-positive\"\n\t\t\t\t\t:key=\"item[xKey]\"\n\t\t\t\t\t:x=\"xScale(item[xKey])\"\n\t\t\t\t\t:y=\"yScale(0)\"\n\t\t\t\t\t:width=\"xScale.bandwidth()\"\n\t\t\t\t\t:height=\"0\"\n\t\t\t\t></rect>\n\t\t\t</g>\n\t\t</svg>\n\t</div>\n</template>\n\n<script>\nimport { scaleLinear, scaleBand } from 'd3-scale'\nimport { max, min } from 'd3-array'\nimport { selectAll } from 'd3-selection'\nimport { transition } from 'd3-transition'\n\nexport default {\n  name: 'BarChart',\n  props: {\n    title: String,\n    xKey: String,\n    yKey: String,\n    data: Array\n  },\n  data: () => ({\n    svgWidth: 0,\n    redrawToggle: true\n  }),\n  methods: {\n    AnimateLoad () {\n      selectAll('rect')\n        .data(this.data)\n        .transition()\n        .delay((d, i) => {\n          return i * 150\n        })\n        .duration(1000)\n        .attr('y', d => {\n          return this.yScale(d[this.yKey])\n        })\n        .attr('height', d => {\n          return this.svgHeight - this.yScale(d[this.yKey])\n        })\n    },\n    AddResizeListener () {\n      // redraw the chart 300ms after the window has been resized\n      window.addEventListener('resize', () => {\n        this.$data.redrawToggle = false\n        setTimeout(() => {\n          this.$data.redrawToggle = true\n          this.$data.svgWidth =\n\t\t\t\t\t\tdocument.getElementById('container').offsetWidth * 0.75\n          this.AnimateLoad()\n        }, 300)\n      })\n    }\n  },\n  computed: {\n    dataMax () {\n      return max(this.data, d => {\n        return d[this.yKey]\n      })\n    },\n    dataMin () {\n      return min(this.data, d => {\n        return d[this.yKey]\n      })\n    },\n    xScale () {\n      return scaleBand()\n        .rangeRound([0, this.svgWidth])\n        .padding(0.1)\n        .domain(\n          this.data.map(d => {\n            return d[this.xKey]\n          })\n        )\n    },\n    yScale () {\n      return scaleLinear()\n        .rangeRound([this.svgHeight, 0])\n        .domain([this.dataMin > 0 ? 0 : this.dataMin, this.dataMax])\n    },\n    svgHeight () {\n      return this.svgWidth / 1.61803398875 // golden ratio\n    }\n  },\n  mounted () {\n    this.svgWidth = document.getElementById('container').offsetWidth * 0.75\n    this.AddResizeListener()\n    this.AnimateLoad()\n  }\n}\n</script>\n\n<style scoped>\n\t.bar-positive {\n\t\tfill: steelblue;\n\t\ttransition: r 0.2s ease-in-out;\n\t}\n\n\t.bar-positive:hover {\n\t\tfill: brown;\n\t}\n\n\t.svg-container {\n\t\tdisplay: inline-block;\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tpadding-bottom: 1%;\n\t\tvertical-align: top;\n\t\toverflow: hidden;\n\t}\n</style>\n"]}]}