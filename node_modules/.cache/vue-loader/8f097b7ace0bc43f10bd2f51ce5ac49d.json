{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/AddTopic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/AddTopic.vue","mtime":1598485176458},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiIH0gZnJvbSAnQC9tYWluJwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnQC9tYWluJwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnCmV4cG9ydCBkZWZhdWx0IHsKCWRhdGE6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHsKCQkvLyBOZXcgVG9waWMgaW5mbwoJCWNyZWF0ZWRUb3BpYzogewoJCQl0aXRsZTogJycsCgkJCXRodW1iVVJMOiAnJywKCQkJY29udGVudE1EOiAnJwoJCX0sCgkJLy8gRm9ybQoJCXRpbWVQZXJpb2RzOiBbCgkJCSdSZWdpb25hbCBJbnRlcmFjdGlvbnMgKDEyMDAgLSAxNDUwKScsCgkJCSdGaXJzdCBHbG9iYWwgQWdlICgxNDUwIC0gMTc1MCknLAoJCQknUmV2b2x1dGlvbnMgJiBJbmR1c3RyaWFsaXphdGlvbiAoMTc1MCAtIDE5MDApJywKCQkJJ01vZGVybiBUaW1lcyAoMTkwMCAtIFByZXNlbnQpJwoJCV0sCgkJdGltZVBlcmlvZDogJycsCgkJLy8gVmFsaWRhdGlvbgoJCXZhbGlkOiB0cnVlLAoJCXJ1bGU6IFsgdiA9PiAhIXYgfHwgJ1JlcXVpcmVkJyBdLAoJCWltZ1J1bGU6IFsgdiA9PiAhIXYgfHwgdi5zaXplIDwgMjAwMDAwMCB8fCAnSW1hZ2Ugc2l6ZSBzaG91bGQgYmUgbGVzcyB0aGFuIDIgTUIhJ10KCX19LAoJbWV0aG9kczogewoJCWFzeW5jIHN1Ym1pdERhdGEgKCkgewoJCQkvL2NyZWF0aW5nIGRvYwoJCQlsZXQgdG9waWNJRCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oInRvcGljcyIpLmFkZCh0aGlzLmNyZWF0ZWRUb3BpYykKCQkJCS50aGVuKGZ1bmN0aW9uKGRvY1JlZikgewoJCQkJCXJldHVybiBkb2NSZWYuaWQ7CgkJCQl9KS5jYXRjaChmdW5jdGlvbihlcnJvcikgewoJCQkJCWNvbnNvbGUuZXJyb3IoIkVycm9yIGFkZGluZyBkb2N1bWVudDogIiwgZXJyb3IpOwoJCQkJfSk7CgkJCQoJCQljb25zb2xlLmxvZyh0b3BpY0lEKQoJCQkvL3B1bGxpbmcgaW5mbyBmcm9tIHRpbWVQZXJpb2RzCgkJCXZhciB1cGRhdGVkVG9waWNzID0gW10KCQkJdmFyIGlkID0gJycKCQkJYXdhaXQgZGIuY29sbGVjdGlvbigidGltZVBlcmlvZHMiKS53aGVyZSgndGl0bGUnLCAnPT0nLCB0aGlzLnRpbWVQZXJpb2QpLmdldCgpCgkJCQkudGhlbihmdW5jdGlvbihxdWVyeVNuYXBzaG90KSB7CgkJCQkJcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKGRvYykgewoJCQkJCQljb25zb2xlLmxvZygnZG9jJywgZG9jKQoJCQkJCQl1cGRhdGVkVG9waWNzID0gZG9jLmRhdGEoKS50b3BpY1RpdGxlcwoJCQkJCQlpZCA9IGRvYy5pZAoJCQkJCX0pOwoJCQkJfSkKCQkJCS5jYXRjaChmdW5jdGlvbihlcnJvcikgewoJCQkJCWNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50czogIiwgZXJyb3IpOwoJCQkJfSk7CgkJCQkKCQkJLy91cGRhdGluZyB0aW1lUGVyaW9kcwoJCQl2YXIgbmV3VG9waWMgPSB7dG9waWNJRDogdG9waWNJRCwgdGl0bGU6IHRoaXMuY3JlYXRlZFRvcGljLnRpdGxlLCB0aHVtYlVSTDogdGhpcy5jcmVhdGVkVG9waWMudGh1bWJVUkx9CgkJCXVwZGF0ZWRUb3BpY3MucHVzaChuZXdUb3BpYykKCQkJZGIuY29sbGVjdGlvbigidGltZVBlcmlvZHMiKS5kb2MoaWQpLnVwZGF0ZSggeyd0b3BpY1RpdGxlcyc6IHVwZGF0ZWRUb3BpY3N9ICkKCQkJCS50aGVuKGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZyggIkRvY3VtZW50IHN1Y2Nlc3NmdWxseSB1cGRhdGVkISIpOyB9KQoJCQkJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoICJFcnJvciB1cGRhdGluZyBkb2N1bWVudDogIiwgZXJyb3IpOyB9KTsKCQkJCgkJCXRoaXMucmVzZXQoKQoJCX0sCgkJdmFsaWRhdGUgKCkgeyAKCQkJdGhpcy52YWxpZCA9IGZhbHNlCgkJCXRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpIAoJCX0sCgkJcmVzZXQgKCkgeyB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKSB9Cgl9Cn0K"},{"version":3,"sources":["AddTopic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddTopic.vue","sourceRoot":"src/views/Adding_Content","sourcesContent":["<template>\n<div id=\"app\">\n\t<v-container>\n\t\t<v-row class=\"blue-grey darken-2 white--text text-center\">\n\t\t\t<v-col>\n\t\t\t\t<h1 class=\"display-1\">Add a New Topic</h1>\n\t\t\t\t<blockquote class=\"blockquote pa-0\">Fill the following form to add topics and topics to the home web page</blockquote>\n\t\t\t</v-col>\n\t\t</v-row>\n\t\t<!-- FORM -->\n\t\t<v-form ref=\"form\" v-model=\"valid\">\n\t\t\t<v-row>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t<v-col cols=\"9\">\n\t\t\t\t\t<v-text-field label=\"Topic title:\" autocomplete=\"off\" v-model=\"createdTopic.title\" :rules=\"rule\" required></v-text-field>\n\t\t\t\t\t<v-select v-model=\"timePeriod\" :items=\"timePeriods\" label=\"Choose Time Period:\" outlined dense :rules=\"rule\" required>{{ timePeriods }}</v-select>\n\t\t\t\t\t<!-- <v-row class=\"pt-2\">\n\t\t\t\t\t\t<v-col cols=\"4\">\n\t\t\t\t\t\t\t<v-file-input disabled accept=\"image/*\" counter show-size label=\"Thumbnail\"></v-file-input>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t<v-textarea disabled outlined name=\"input-7-4\" label=\"Topic intro content\" value=\"This is just a tester, don't fill out\" ></v-textarea>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row> -->\n\t\t\t\t\t<v-row>\n\t\t\t\t\t\t<v-col class=\"d-flex justify-end row-reverse\">\n\t\t\t\t\t\t\t<v-btn class=\"mr-3\" large color=\"error\" outlined @click=\"reset\">Reset Form</v-btn>\n\t\t\t\t\t\t\t<v-btn :disabled=\"!valid\" large color=\"success\" @click=\"submitData\">SUBMIT</v-btn>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row>\n\t\t\t\t</v-col>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t</v-row>\n\t\t</v-form>\n\t</v-container>\n</div>\n</template>\n\n\n<script>\nimport { db } from '@/main'\nimport firebase from '@/main'\nimport _ from 'lodash'\nexport default {\n\tdata: function () { return {\n\t\t// New Topic info\n\t\tcreatedTopic: {\n\t\t\ttitle: '',\n\t\t\tthumbURL: '',\n\t\t\tcontentMD: ''\n\t\t},\n\t\t// Form\n\t\ttimePeriods: [\n\t\t\t'Regional Interactions (1200 - 1450)',\n\t\t\t'First Global Age (1450 - 1750)',\n\t\t\t'Revolutions & Industrialization (1750 - 1900)',\n\t\t\t'Modern Times (1900 - Present)'\n\t\t],\n\t\ttimePeriod: '',\n\t\t// Validation\n\t\tvalid: true,\n\t\trule: [ v => !!v || 'Required' ],\n\t\timgRule: [ v => !!v || v.size < 2000000 || 'Image size should be less than 2 MB!']\n\t}},\n\tmethods: {\n\t\tasync submitData () {\n\t\t\t//creating doc\n\t\t\tlet topicID = await db.collection(\"topics\").add(this.createdTopic)\n\t\t\t\t.then(function(docRef) {\n\t\t\t\t\treturn docRef.id;\n\t\t\t\t}).catch(function(error) {\n\t\t\t\t\tconsole.error(\"Error adding document: \", error);\n\t\t\t\t});\n\t\t\t\n\t\t\tconsole.log(topicID)\n\t\t\t//pulling info from timePeriods\n\t\t\tvar updatedTopics = []\n\t\t\tvar id = ''\n\t\t\tawait db.collection(\"timePeriods\").where('title', '==', this.timePeriod).get()\n\t\t\t\t.then(function(querySnapshot) {\n\t\t\t\t\tquerySnapshot.forEach(function(doc) {\n\t\t\t\t\t\tconsole.log('doc', doc)\n\t\t\t\t\t\tupdatedTopics = doc.data().topicTitles\n\t\t\t\t\t\tid = doc.id\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t//updating timePeriods\n\t\t\tvar newTopic = {topicID: topicID, title: this.createdTopic.title, thumbURL: this.createdTopic.thumbURL}\n\t\t\tupdatedTopics.push(newTopic)\n\t\t\tdb.collection(\"timePeriods\").doc(id).update( {'topicTitles': updatedTopics} )\n\t\t\t\t.then(function() { console.log( \"Document successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error( \"Error updating document: \", error); });\n\t\t\t\n\t\t\tthis.reset()\n\t\t},\n\t\tvalidate () { \n\t\t\tthis.valid = false\n\t\t\tthis.$refs.form.validate() \n\t\t},\n\t\treset () { this.$refs.form.reset() }\n\t}\n}\n</script>\n"]}]}