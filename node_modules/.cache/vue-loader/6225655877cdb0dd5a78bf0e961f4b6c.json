{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/AddTopic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/AddTopic.vue","mtime":1590552792094},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiIH0gZnJvbSAnQC9tYWluJwpleHBvcnQgZGVmYXVsdCB7CglkYXRhOiBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuIHsKCQkJc2VsZWN0ZWRUaW1lUGVyaW9kOiAnJywKCQkJY3JlYXRlZFRvcGljOiB7CgkJCQl0b3BpY1RpdGxlOiAnJywKCQkJCWltZzogJ2xvZ28ucG5nJywKCQkJCXRvcGljQ29udGVudF9wdWJsaXNoZWQ6IGZhbHNlLAoJCQkJY29sbGVjdGlvbk5hbWU6ICcnCgkJCX0sCgkJCXRpbWVQZXJpb2RzQ2F0ZWdvcmllczogWydSZWdpb25hbCBJbnRlcmFjdGlvbnMgYy4xMjAwIC0gYy4xNDUwJywKCQkJCSdGaXJzdCBHbG9iYWwgQWdlIGMuMTQ1MCAtIGMuMTc1MCcsCgkJCQknUmV2b2x1dGlvbnMgJiBJbmR1c3RyaWFsaXphdGlvbiBjLjE3NTAtYy4xOTAwJywKCQkJCSdNb2Rlcm4gVGltZXMgYy4xOTAwIC0gUHJlc2VudCddLAoJCQltZW51OiBmYWxzZSwKCQkJdXJsOiAnJywKCQkJdGltZXBlcmlvZDogMAoJCX0KCX0sCgltZXRob2RzOiB7CgkJYXN5bmMgc3VibWl0RGF0YSAoKSB7CgkJCXRoaXMudGltZXBlcmlvZCA9IHRoaXMudGltZVBlcmlvZHNDYXRlZ29yaWVzLmluZGV4T2YodGhpcy5zZWxlY3RlZFRpbWVQZXJpb2QpICsgMTsKCQkJY29uc3QgdG9kb3NSZWYgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCcqVElNRV9QRVJJT0RTJyk7CgkJCWNvbnN0IGlkID0gdG9kb3NSZWYuZG9jKCd0aW1lX3BlcmlvZF8nICsgdGhpcy50aW1lcGVyaW9kKQoJCQl2YXIgdG9waWNzID0gYXdhaXQgaWQuZ2V0KCkudGhlbihmdW5jdGlvbiAoZG9jKSB7CgkJCQlyZXR1cm4gZG9jLmRhdGEoKS50b3BpY3MKCQkJfSkKCQkJLy8gY3JlYXRpbmcgc3BlY2lhbCBjb2xsZWN0aW9uIG5hbWUgZm9yIG5ld2x5IGFkZGVkIHRvcGljCgkJCXRoaXMudXJsID0gdGhpcy5jcmVhdGVkVG9waWMudG9waWNUaXRsZS5yZXBsYWNlKC9ccysvZywnJykudG9Mb3dlckNhc2UoKQoJCQl0aGlzLmNyZWF0ZWRUb3BpYy5jb2xsZWN0aW9uTmFtZSA9IHRoaXMudXJsCgkJCS8vIFVQREFUSU5HICpUSU1FX1BFUklPRFMgY29sbGVjdGlvbgoJCQl0b3BpY3MucHVzaCh0aGlzLmNyZWF0ZWRUb3BpYykKCQkJaWQudXBkYXRlKHsKCQkJCXRvcGljczogdG9waWNzCgkJCX0pCgkJCXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpOwoJCQl0aGlzLmFkZFRvU2VhcmNoKCk7CgkJCXRoaXMucmVzZXQoKTsKCQl9LAoJCWFzeW5jIGNyZWF0ZUNvbGxlY3Rpb24oKXsKCQkJZGIuZG9jKHRoaXMudXJsICsgIi9FdmVudHMiKS5zZXQoewoJCQkJZXZlbnRzOiBbXQoJCQl9KQoJCX0sCgkJYXN5bmMgYWRkVG9TZWFyY2goKXsKCQkJZGIuY29sbGVjdGlvbignKlNFQVJDSCcpLmRvYygpLnNldCh7CgkJCQluYW1lOiB0aGlzLmNyZWF0ZWRUb3BpYy50b3BpY1RpdGxlLAoJCQkJdHlwZW9mQ29udGVudDogInRvcGljIiwKCQkJCWNvbGxlY3Rpb25OYW1lOiB0aGlzLmNyZWF0ZWRUb3BpYy5jb2xsZWN0aW9uTmFtZSwKCQkJCWxvY2F0aW9uSW5USU1FX1BFUklPRFM6IHsKCQkJCQljb2xsZWN0aW9uOiAiKlRJTUVfUEVSSU9EUyIsCgkJCQkJZG9jOiAndGltZV9wZXJpb2RfJyArIHRoaXMudGltZXBlcmlvZAoJCQkJfQoJCQl9KQoJCX0sCgkJc2F2ZSAoZGF0ZSkgeyB0aGlzLiRyZWZzLm1lbnUuc2F2ZShkYXRlKSB9LAoJCXZhbGlkYXRlICgpIHsgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkgfSwKCQlyZXNldCAoKSB7IHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpIH0sCgkJcmVzZXRWYWxpZGF0aW9uICgpIHsgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpIH0KCX0sCgl3YXRjaDogewoJCW1lbnUgKHZhbCkgewoJCQl2YWwgJiYgc2V0VGltZW91dCgoKSA9PiAodGhpcy4kcmVmcy5waWNrZXIuYWN0aXZlUGlja2VyID0gJ1lFQVInKSkKCQl9Cgl9Cn0K"},{"version":3,"sources":["AddTopic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddTopic.vue","sourceRoot":"src/views","sourcesContent":["<!-- Database SETUP\n1) Add topic to *TIMEPERIOD Collection \n2) Add topic TIMEPERIOD location && topic Collection info to the *SEARCH Collection\n3) Create an new Collection for the added topic -->\n\n<template>\n\t<div id=\"app\">\n\t<v-container>\n\t\t<h1 class=\"pt-5\">Add a New Topic</h1>\n\t\t<blockquote class=\"blockquote mb-3\">Fill the following form to add topics and topics to the home web page</blockquote>\n\t\t<hr>\n\t\t<div style=\"height: 50px;\"></div>\n\t\t<!-- FORM -->\n\t\t<!-- Adding Topic -->\n\t\t<v-form ref=\"form\">\n\t\t\t<v-row>\n\t\t\t\t<v-col cols=\"7\">\n\t\t\t\t\t<!-- Choose time period -->\n\t\t\t\t\t<h2 class=\"pb-4\">Time Period</h2>\n\t\t\t\t\t<v-select class=\"ml-5 pl-5\" v-model=\"selectedTimePeriod\" :items=\"timePeriodsCategories\" label=\"Choose:\" outlined >{{ timePeriodsCategories }}</v-select>\n\t\t\t\t\t<h2 class=\"pt-5 pb-4\">Topic Information</h2>\n\t\t\t\t\t<!-- enter topic name -->\n\t\t\t\t\t<v-text-field class=\"ml-5 pl-5\" label=\"Enter topic title:\" autocomplete=\"off\" v-model=\"createdTopic.topicTitle\"></v-text-field>\n\t\t\t\t\t<!-- upload image file -->\n\t\t\t\t\t<v-file-input class=\"ml-5 pl-5\" accept=\"image/*\" label=\"File input: topic icon image\"></v-file-input>\n\t\t\t\t</v-col>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t<v-col cols=\"3\" class=\"d-flex align-start  flex-column\">\n\t\t\t\t\t<!-- Submit Button -->\n\t\t\t\t\t<v-btn class=\"mt-auto\" large color=\"success\" v-on:click.prevent=\"submitData\">SUBMIT</v-btn>\n\t\t\t\t\t<!-- Add Content -->\n\t\t\t\t\t<!-- <v-btn :disabled=\"createdTopic.topicTitle == '' \" class=\"mt-5\" large color=\"cyan\" style=\"color: white;\" to=\"/AddTcContent\">Add Content to Topic</v-btn> -->\n\t\t\t\t\t<!-- Reset -->\n\t\t\t\t\t<v-btn class=\"mt-5\" large outlined color=\"error\" @click=\"reset\">Reset Form</v-btn>\n\t\t\t\t</v-col>\n\t\t\t</v-row>\n\t\t</v-form>\n\t</v-container>\n\t</div>\n</template>\n\n\n<script>\nimport { db } from '@/main'\nexport default {\n\tdata: function () {\n\t\treturn {\n\t\t\tselectedTimePeriod: '',\n\t\t\tcreatedTopic: {\n\t\t\t\ttopicTitle: '',\n\t\t\t\timg: 'logo.png',\n\t\t\t\ttopicContent_published: false,\n\t\t\t\tcollectionName: ''\n\t\t\t},\n\t\t\ttimePeriodsCategories: ['Regional Interactions c.1200 - c.1450',\n\t\t\t\t'First Global Age c.1450 - c.1750',\n\t\t\t\t'Revolutions & Industrialization c.1750-c.1900',\n\t\t\t\t'Modern Times c.1900 - Present'],\n\t\t\tmenu: false,\n\t\t\turl: '',\n\t\t\ttimeperiod: 0\n\t\t}\n\t},\n\tmethods: {\n\t\tasync submitData () {\n\t\t\tthis.timeperiod = this.timePeriodsCategories.indexOf(this.selectedTimePeriod) + 1;\n\t\t\tconst todosRef = await db.collection('*TIME_PERIODS');\n\t\t\tconst id = todosRef.doc('time_period_' + this.timeperiod)\n\t\t\tvar topics = await id.get().then(function (doc) {\n\t\t\t\treturn doc.data().topics\n\t\t\t})\n\t\t\t// creating special collection name for newly added topic\n\t\t\tthis.url = this.createdTopic.topicTitle.replace(/\\s+/g,'').toLowerCase()\n\t\t\tthis.createdTopic.collectionName = this.url\n\t\t\t// UPDATING *TIME_PERIODS collection\n\t\t\ttopics.push(this.createdTopic)\n\t\t\tid.update({\n\t\t\t\ttopics: topics\n\t\t\t})\n\t\t\tthis.createCollection();\n\t\t\tthis.addToSearch();\n\t\t\tthis.reset();\n\t\t},\n\t\tasync createCollection(){\n\t\t\tdb.doc(this.url + \"/Events\").set({\n\t\t\t\tevents: []\n\t\t\t})\n\t\t},\n\t\tasync addToSearch(){\n\t\t\tdb.collection('*SEARCH').doc().set({\n\t\t\t\tname: this.createdTopic.topicTitle,\n\t\t\t\ttypeofContent: \"topic\",\n\t\t\t\tcollectionName: this.createdTopic.collectionName,\n\t\t\t\tlocationInTIME_PERIODS: {\n\t\t\t\t\tcollection: \"*TIME_PERIODS\",\n\t\t\t\t\tdoc: 'time_period_' + this.timeperiod\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsave (date) { this.$refs.menu.save(date) },\n\t\tvalidate () { this.$refs.form.validate() },\n\t\treset () { this.$refs.form.reset() },\n\t\tresetValidation () { this.$refs.form.resetValidation() }\n\t},\n\twatch: {\n\t\tmenu (val) {\n\t\t\tval && setTimeout(() => (this.$refs.picker.activePicker = 'YEAR'))\n\t\t}\n\t}\n}\n</script>\n"]}]}