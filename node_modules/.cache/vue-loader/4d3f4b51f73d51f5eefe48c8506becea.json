{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/ModifyingTopic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/ModifyingTopic.vue","mtime":1598848182774},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiIH0gZnJvbSAnQC9tYWluJwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnCmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIgppbXBvcnQgdmlkZW9QYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvQ29udGVudF9Gb3Jtcy9SZXNvdXJjZV9Gb3JtczIvdmlkZW9QYW5lbC52dWUnCgoKZXhwb3J0IGRlZmF1bHQgewoJY29tcG9uZW50czp7CgkJdmlkZW9QYW5lbAoJfSwKCWRhdGE6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHsKCQlkaWFsb2c6IGZhbHNlLAoJCXRvcGljRGlhbG9nOiB7fSwgCgkJCS8vY29udGFpbnMge3RpdGxlOicnLCB0aHVtYm5haWw6JycsIHN0YXJ0RGF0ZTonJywgZW5kRGF0ZTonJywgY29udGVudE1EOicnfQoJCXdpZHRoOiAnNzUwcHgnLAoJCW5ld1RvcGljOiBmYWxzZSwKCQlhZGRSZXNvdXJjZXM6IGZhbHNlLAoJCWltZ1J1bGU6IFsgdiA9PiAhdiB8fCB2LnNpemUgPiAwICYmIHYuc2l6ZSA8IDIwMDAwMDAgfHwgJ01vcmUgdGhhbiAyTUIgcmVxdWlyZWQnXSwKCX19LAoJY29tcHV0ZWQ6IHsKCQl0b3BpY3MoKSB7IHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hbGxUb3BpY3M7IH0sCgkJcmVtb3ZlZFJlc291cmNlcygpIHsgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnJlbW92ZWRSZXNvdXJjZXM7IH0sCgkJbmV3UmVzb3VyY2VzKCkgeyByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubmV3UmVzb3VyY2VzOyB9LAoJfSwKCW1ldGhvZHM6IHsKCgkJYXN5bmMgbW91bnRUb3BpY3MoKXsKCQkJdmFyIHRvcGljcyA9IFtdCgkJCWF3YWl0IGRiLmNvbGxlY3Rpb24oInRvcGljcyIpLmdldCgpLnRoZW4oIGRvYyA9PiB7CgkJCQlkb2MuZm9yRWFjaChmdW5jdGlvbihpKSB7CgkJCQkJdmFyIHQgPSBpLmRhdGEoKQoJCQkJCXQuaWQgPSBpLmlkCgkJCQkJdG9waWNzLnB1c2godCkKCQkJCX0pCgkJCX0pCgkJCXN0b3JlLmRpc3BhdGNoKCJzZXRBbGxUb3BpY3MiLCB0b3BpY3MpOwoKCQkJdmFyIHJlcyA9IFtdCgkJCWF3YWl0IGRiLmNvbGxlY3Rpb24oInJlc291cmNlcyIpLmdldCgpLnRoZW4oIGRvYyA9PiB7CgkJCQlkb2MuZm9yRWFjaChmdW5jdGlvbihpKSB7CgkJCQkJdmFyIHQgPSBpLmRhdGEoKQoJCQkJCXQuaWQgPSBpLmlkCgkJCQkJcmVzLnB1c2godCkKCQkJCX0pCgkJCX0pCgkJCXN0b3JlLmRpc3BhdGNoKCJzZXRSZXNvdXJjZXMiLCByZXMpOwoJCX0sCgoJCWFzeW5jIHN1Ym1pdCgpewoKCQkJLy8gaWYgbmV3IGV2ZW50CgkJCS8vIGlmKHRoaXMubmV3VG9waWMpeyAvL3VwZGF0ZXMgZGIgJiBzdG9yZS5ldmVudHMKCQkJLy8gCWlmKHRoaXMudG9waWNEaWFsb2cudGh1bWJuYWlsKXsKCQkJLy8gCQlhd2FpdCB0aGlzLnNhdmVJbWFnZSh0aGlzLnRvcGljRGlhbG9nKQoJCQkvLyAJfQoJCQkvLyAJdGhpcy50b3BpY0RpYWxvZy50b3BpY0lEID0gdGhpcy4kc3RvcmUuc3RhdGUudG9waWMuaWQKCQkJLy8gCWNvbnNvbGUubG9nKCd0b3BpYycsIHRoaXMudG9waWNEaWFsb2cpCgkJCQkKCQkJLy8gCWRiLmNvbGxlY3Rpb24oImV2ZW50cyIpLmFkZCh0aGlzLnRvcGljRGlhbG9nKQoJCQkvLyAJLnRoZW4oZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCJEb2N1bWVudCBzdWNjZXNzZnVsbHkgdXBkYXRlZCEiKTsgfSkKCQkJLy8gCS5jYXRjaChmdW5jdGlvbihlcnJvcikgeyBjb25zb2xlLmVycm9yKCJFcnJvciB1cGRhdGluZyBkb2N1bWVudDoiLCBlcnJvcik7IH0pOwoJCQkJCgkJCS8vIAlzdG9yZS5kaXNwYXRjaCgiYWRkRXZlbnQiLCB0aGlzLnRvcGljRGlhbG9nKTsKCQkJLy8gCXRoaXMubmV3VG9waWMgPSBmYWxzZQoJCQkvLyB9CgkJCS8vIGVsc2V7CgkJCQlpZih0aGlzLnRvcGljRGlhbG9nLnRodW1ibmFpbCl7CgkJCQkJYXdhaXQgdGhpcy5kZWxldGVJbWFnZSh0aGlzLnRvcGljRGlhbG9nKQoJCQkJCWF3YWl0IHRoaXMuc2F2ZUltYWdlKHRoaXMudG9waWNEaWFsb2cpCgkJCQl9CgkJCQkKCQkJCWF3YWl0IGRiLmNvbGxlY3Rpb24oInRvcGljcyIpLmRvYyh0aGlzLnRvcGljRGlhbG9nLmlkKS51cGRhdGUodGhpcy50b3BpY0RpYWxvZykKCQkJCS50aGVuKGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygiVG9waWNzIHN1Y2Nlc3NmdWxseSB1cGRhdGVkISIpOyB9KQoJCQkJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoIkVycm9yIHVwZGF0aW5nIGRvY3VtZW50OiIsIGVycm9yKTsgfSk7CgoKCQkJCWF3YWl0IGRiLmNvbGxlY3Rpb24oInRpbWVQZXJpb2RzIikuZ2V0KCkudGhlbiggZSA9PiB7CgkJCQkJZS5mb3JFYWNoKCBkb2MgPT57CgkJCQkJCWRvYy5kYXRhKCkudG9waWNUaXRsZXMuZm9yRWFjaCggKGksIGluZGV4KSA9PiB7CgkJCQkJCQlpZiAoaS50b3BpY0lEID09IHRoaXMudG9waWNEaWFsb2cuaWQpewoJCQkJCQkJCXZhciBuZXdJID0geyB0aHVtYlVSTDogdGhpcy50b3BpY0RpYWxvZy50aHVtYlVSTCwgdGl0bGU6IHRoaXMudG9waWNEaWFsb2cudGl0bGUsIHRvcGljSUQ6IHRoaXMudG9waWNEaWFsb2cuaWQgfQoJCQkJCQkJCXZhciBhcnIgPSBkb2MuZGF0YSgpLnRvcGljVGl0bGVzCgkJCQkJCQkJYXJyLnNwbGljZShpbmRleCwgMSwgbmV3SSk7CgoJCQkJCQkJCWRvYy5yZWYudXBkYXRlKHsKCQkJCQkJCQkJdG9waWNUaXRsZXM6IGFycgoJCQkJCQkJCX0pCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0pCgkJCQkudGhlbihmdW5jdGlvbigpIHsgY29uc29sZS5sb2coInRpbWVQZXJpb2RzIHN1Y2Nlc3NmdWxseSB1cGRhdGVkISIpOyB9KQoJCQkJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoIkVycm9yIHVwZGF0aW5nIHRpbWVQZXJpb2QgZG9jdW1lbnQ6IiwgZXJyb3IpOyB9KTsKCgkJCS8vIH0KCQkJCgkJCS8vaWYgdGhlcmUgYXJlIHJlc291cmNlcyB0byByZW1vdmUKCQkJaWYgKHRoaXMucmVtb3ZlZFJlc291cmNlcy5sZW5ndGggIT0gMCl7IHRoaXMucmVtb3ZpbmdSZXNvdXJjZXMoKSB9CgoJCQkvL2lmIHRoZXJlIGFyZSByZXNvdXJjZXMgdG8gYWRkCgkJCWlmICh0aGlzLm5ld1Jlc291cmNlcy5sZW5ndGggIT0gMCl7IHRoaXMuYWRkaW5nUmVzb3VyY2VzKCkgfQoKCgkJCXRoaXMucmVzZXQoKQoJCX0sCgoKCQlyZW1vdmluZ1Jlc291cmNlcygpewoJCQl2YXIgYmF0Y2ggPSBkYi5iYXRjaCgpCgkJCQoJCQl0aGlzLnJlbW92ZWRSZXNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihkb2MpIHsKCQkJCXZhciByZWYgPSBkYi5jb2xsZWN0aW9uKCdyZXNvdXJjZXMnKS5kb2MoZG9jLmlkKQoJCQkJYmF0Y2guZGVsZXRlKHJlZik7CgkJCX0pOwoKCQkJYmF0Y2guY29tbWl0KCkKCQkJLnRoZW4oIGZ1bmN0aW9uIChkb2MpIHsgc3RvcmUuZGlzcGF0Y2goImNsZWFyX3JlbW92ZWRSZXNvdXJjZXMiKSB9KTsKCQl9LAoKCQlhZGRpbmdSZXNvdXJjZXMoKXsKCQkJdmFyIGJhdGNoID0gZGIuYmF0Y2goKQoKCQkJdGhpcy5uZXdSZXNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihkb2MpIHsKCQkJCXZhciByZWYgPSBkYi5jb2xsZWN0aW9uKCdyZXNvdXJjZXMnKS5kb2MoKQoJCQkJYmF0Y2guc2V0KHJlZiwgZG9jKTsKCQkJfSk7CgkKCQkJYmF0Y2guY29tbWl0KCkKCQkJLnRoZW4oIGZ1bmN0aW9uIChkb2MpIHsgc3RvcmUuZGlzcGF0Y2goImNsZWFyX25ld1Jlc291cmNlcyIpIH0pOwoJCX0sCgoKCQkvL2NsZWFycyBmaXJlYmFzZSBzdG9yYWdlIC0gdGh1bWJGaWxlIC0gdGh1bWJVUkwKCQlhc3luYyBkZWxldGVJbWFnZShmaWxlKXsKCQkJdmFyIGRlc2VydFJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKS5jaGlsZChmaWxlLnRodW1ibmFpbC5uYW1lKTsKCQkJYXdhaXQgZGVzZXJ0UmVmLmRlbGV0ZSgpCgkJCS50aGVuKGZ1bmN0aW9uKCkgeyAKCQkJCWZpbGUudGh1bWJGaWxlID0gJycKCQkJCWZpbGUudGh1bWJVUkwgPSAnJwoJCQl9KQoJCQkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsgY29uc29sZS5lcnJvcigiRXJyb3IgdXBkYXRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKSB9KTsKCQl9LAoKCQkvL3VwZGF0ZXMgZmlyZWJhc2Ugc3RvcmVhZ2UgLSB0aHVtYkZpbGUgLSB0aHVtYlVSTCAtIGRlbGV0ZXMgdGh1bWJVUkwKCQlhc3luYyBzYXZlSW1hZ2UoZmlsZSl7CgkJCXZhciBzdG9yYWdlUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpLmNoaWxkKGZpbGUudGh1bWJuYWlsLm5hbWUpCgkJCWF3YWl0IHN0b3JhZ2VSZWYucHV0KGZpbGUudGh1bWJuYWlsKQoJCQlmaWxlLnRodW1iRmlsZSA9IGZpbGUudGh1bWJuYWlsLm5hbWUKCQkJZmlsZS50aHVtYlVSTCA9IGF3YWl0IHN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVUkwoKQoJCQlkZWxldGUgZmlsZS50aHVtYm5haWwKCQl9LAoKCQlyZXNldCAoKSB7CgkJCXRoaXMudG9waWNEaWFsb2cgPSB7fQoJCQl0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKQoJCX0sCgl9LAoJbW91bnRlZCgpewoJCXRoaXMubW91bnRUb3BpY3MoKQoJfQp9Cg=="},{"version":3,"sources":["ModifyingTopic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModifyingTopic.vue","sourceRoot":"src/views/Adding_Content","sourcesContent":["<template>\n<div id=\"app\">\n\t\n\t<!-- Topic Components -->\n\t<v-container class=\"mt-6 px-12\">\n\t\t<h1 class=\"font-weight-medium text-center pb-10\">Topics</h1>\n\t\t<v-row>\n\t\t\t<!-- adding new event -->\n\t\t\t<!-- <v-col cols=\"4\" class=\"d-flex flex-column align-center justify-center\">\n\t\t\t\t<v-hover v-slot:default=\"{ hover }\">\n\t\t\t\t\t\t<v-btn :elevation=\"hover ? 12 : 2\" color=\"pink\" dark large fab @click=\"[dialog = true, newTopic = true]\">\n\t\t\t\t\t\t\t<v-icon>mdi-plus</v-icon>\n\t\t\t\t\t\t</v-btn>\n\t\t\t\t</v-hover>\n\t\t\t\t<p class=\"caption pt-3 mb-0 font-weight-medium\">Add Topic</p>\n\t\t\t\t<p class=\"caption pt-0\">(add resources after event is created)</p>\n\t\t\t\t<p class=\"caption pt-0\">Reminder: - fill in all inputs for new items, - refresh page before adding resources</p>\n\t\t\t</v-col> -->\n\t\t\t\n\t\t\t<!-- displaying current events -->\n\t\t\t<v-col cols=\"4\" v-for=\"(t, i) in topics\" :key=\"i\">\n\t\t\t\t<v-hover v-slot:default=\"{ hover }\">\n\t\t\t\t\t<v-card :elevation=\"hover ? 12 : 2\" class=\"mx-auto\">\n\t\t\t\t\t\t<v-btn fab small absolute top right @click=\"[dialog = true, topicDialog = t]\">\n\t\t\t\t\t\t\t<v-icon>mdi-lead-pencil</v-icon>\n\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t<v-img height=\"125\" :src=\"t.thumbURL\"></v-img>\n\t\t\t\t\t\t<v-card-text>{{t.title}}</v-card-text>\n\t\t\t\t\t</v-card>\n\t\t\t\t</v-hover>\n\t\t\t</v-col>\n\t\t</v-row>\n\t</v-container>\n\n\n\t<!-- mod events form -->\n\t<v-dialog v-model=\"dialog\" :width=\"width\">\n\t\t<v-card outlined>\n\t\t\t<v-btn color=\"orange lighten-1\" small fab absolute right dark rounded @click=\"[dialog = false, reset()]\"><v-icon dark>mdi-close</v-icon></v-btn>\n\t\t\t<v-form ref=\"form\" class=\"px-8 pt-8\">\n\t\t\t\t<v-row>\n\t\t\t\t\t<!-- mod event content -->\n\t\t\t\t\t<v-col class=\"pb-0\">\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field dense filled v-model=\"topicDialog.title\" label=\"Title:\" auto-fill=\"off\" clearable></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col class=\"py-0\">\n\t\t\t\t\t\t\t\t<v-expansion-panels>\n\t\t\t\t\t\t\t\t\t<v-expansion-panel>\n\t\t\t\t\t\t\t\t\t\t<v-expansion-panel-header>Time Period</v-expansion-panel-header>\n\t\t\t\t\t\t\t\t\t\t<v-expansion-panel-content>\n\t\t\t\t\t\t\t\t\t\t\t<v-radio-group v-model=\"topicDialog.timePeriod\" :mandatory=\"false\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-radio label=\"Regional Interactions (1200 - 1450)\" value=\"1\"></v-radio>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-radio label=\"First Global Age (1450 - 1750)\" value=\"2\"></v-radio>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-radio label=\"'Revolutions & Industrialization (1750 - 1900)')\" value=\"3\"></v-radio>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-radio label=\"Modern Times (1900 - Present)\" value=\"4\"></v-radio>\n\t\t\t\t\t\t\t\t\t\t\t</v-radio-group>\n\t\t\t\t\t\t\t\t\t\t</v-expansion-panel-content>\n\t\t\t\t\t\t\t\t\t</v-expansion-panel>\n\t\t\t\t\t\t\t\t</v-expansion-panels>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t<v-col class=\"d-flex justify-end align-center flex-row my-0\">\n\t\t\t\t\t\t\t\t<v-switch class=\"mt-0\" v-model=\"topicDialog.disabled\" inset></v-switch>\n\t\t\t\t\t\t\t\t<p>Disable</p>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\n\t\t\t\t\t\t<v-row class=\"pt-5\">\n\t\t\t\t\t\t\t<v-col cols=\"5\">\n\t\t\t\t\t\t\t\t<v-file-input dense v-model=\"topicDialog.thumbnail\" accept=\"image/*\" counter show-size label=\"Thumbnail\" :placeholder=\"topicDialog.thumbFile\" :rules=\"imgRule\" clearable></v-file-input>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field dense filled v-model=\"topicDialog.startDate\" label=\"Start Date:\" auto-fill=\"off\" clearable></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field dense filled v-model=\"topicDialog.endDate\" label=\"End Date:\" auto-fill=\"off\" clearable></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-btn v-if=\"!newTopic\" small rounded class=\"mb-6 purple lighten-1 text-center\" block dark @click=\"[addResources = true, width='100%']\">Add & Edit Resources</v-btn>\n\t\t\t\t\t\t\t\t<v-textarea dense filled v-model=\"topicDialog.contentMD\" label=\"Main event content: *has markdown\" :placeholder=\"topicDialog.contentMD\"></v-textarea>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t</v-col>\n\n\t\t\t\t\t<!-- mod event resources -->\n\t\t\t\t\t<v-col v-if=\"addResources\"cols=\"7\">\n\t\t\t\t\t\t<v-card outlined class=\"py-2 px-4\" style=\"border-color: #AB47BC;\" >\n\t\t\t\t\t\t\t<v-expansion-panels multiple focusable>\n\t\t\t\t\t\t\t\t<v-expansion-panel>\n\t\t\t\t\t\t\t\t\t<v-expansion-panel-header>Videos</v-expansion-panel-header>\n\t\t\t\t\t\t\t\t\t<v-expansion-panel-content>\n\t\t\t\t\t\t\t\t\t\t<video-panel :parentID=\"topicDialog.id\" :parentType=\"'topic'\"></video-panel>\n\t\t\t\t\t\t\t\t\t</v-expansion-panel-content>\n\t\t\t\t\t\t\t\t</v-expansion-panel>\n\t\t\t\t\t\t\t</v-expansion-panels>\n\n\t\t\t\t\t\t\t<v-card-actions class=\"d-flex justify-end\">\n\t\t\t\t\t\t\t\t<v-btn color=\"green\" dark @click=\"[addResources = false, width = '750px']\">Done</v-btn>\n\t\t\t\t\t\t\t</v-card-actions>\n\t\t\t\t\t\t</v-card>\n\t\t\t\t\t</v-col>\n\t\t\t\t</v-row>\n\t\t\t</v-form>\n\t\t\t<v-card-actions class=\"d-flex justify-end\">\n\t\t\t\t<v-btn class=\"white--text\" color=\"green\" @click=\"[dialog = false, submit()]\" > Accept Changes</v-btn>\n\t\t\t</v-card-actions>\n\t\t\t\n\t\t</v-card>\n\t</v-dialog>\n</div>\n</template>\n\n<script>\nimport { db } from '@/main'\nimport firebase from 'firebase'\nimport store from \"@/store\"\nimport videoPanel from '@/components/Content_Forms/Resource_Forms2/videoPanel.vue'\n\n\nexport default {\n\tcomponents:{\n\t\tvideoPanel\n\t},\n\tdata: function () { return {\n\t\tdialog: false,\n\t\ttopicDialog: {}, \n\t\t\t//contains {title:'', thumbnail:'', startDate:'', endDate:'', contentMD:''}\n\t\twidth: '750px',\n\t\tnewTopic: false,\n\t\taddResources: false,\n\t\timgRule: [ v => !v || v.size > 0 && v.size < 2000000 || 'More than 2MB required'],\n\t}},\n\tcomputed: {\n\t\ttopics() { return this.$store.state.allTopics; },\n\t\tremovedResources() { return this.$store.state.removedResources; },\n\t\tnewResources() { return this.$store.state.newResources; },\n\t},\n\tmethods: {\n\n\t\tasync mountTopics(){\n\t\t\tvar topics = []\n\t\t\tawait db.collection(\"topics\").get().then( doc => {\n\t\t\t\tdoc.forEach(function(i) {\n\t\t\t\t\tvar t = i.data()\n\t\t\t\t\tt.id = i.id\n\t\t\t\t\ttopics.push(t)\n\t\t\t\t})\n\t\t\t})\n\t\t\tstore.dispatch(\"setAllTopics\", topics);\n\n\t\t\tvar res = []\n\t\t\tawait db.collection(\"resources\").get().then( doc => {\n\t\t\t\tdoc.forEach(function(i) {\n\t\t\t\t\tvar t = i.data()\n\t\t\t\t\tt.id = i.id\n\t\t\t\t\tres.push(t)\n\t\t\t\t})\n\t\t\t})\n\t\t\tstore.dispatch(\"setResources\", res);\n\t\t},\n\n\t\tasync submit(){\n\n\t\t\t// if new event\n\t\t\t// if(this.newTopic){ //updates db & store.events\n\t\t\t// \tif(this.topicDialog.thumbnail){\n\t\t\t// \t\tawait this.saveImage(this.topicDialog)\n\t\t\t// \t}\n\t\t\t// \tthis.topicDialog.topicID = this.$store.state.topic.id\n\t\t\t// \tconsole.log('topic', this.topicDialog)\n\t\t\t\t\n\t\t\t// \tdb.collection(\"events\").add(this.topicDialog)\n\t\t\t// \t.then(function() { console.log(\"Document successfully updated!\"); })\n\t\t\t// \t.catch(function(error) { console.error(\"Error updating document:\", error); });\n\t\t\t\t\n\t\t\t// \tstore.dispatch(\"addEvent\", this.topicDialog);\n\t\t\t// \tthis.newTopic = false\n\t\t\t// }\n\t\t\t// else{\n\t\t\t\tif(this.topicDialog.thumbnail){\n\t\t\t\t\tawait this.deleteImage(this.topicDialog)\n\t\t\t\t\tawait this.saveImage(this.topicDialog)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tawait db.collection(\"topics\").doc(this.topicDialog.id).update(this.topicDialog)\n\t\t\t\t.then(function() { console.log(\"Topics successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error(\"Error updating document:\", error); });\n\n\n\t\t\t\tawait db.collection(\"timePeriods\").get().then( e => {\n\t\t\t\t\te.forEach( doc =>{\n\t\t\t\t\t\tdoc.data().topicTitles.forEach( (i, index) => {\n\t\t\t\t\t\t\tif (i.topicID == this.topicDialog.id){\n\t\t\t\t\t\t\t\tvar newI = { thumbURL: this.topicDialog.thumbURL, title: this.topicDialog.title, topicID: this.topicDialog.id }\n\t\t\t\t\t\t\t\tvar arr = doc.data().topicTitles\n\t\t\t\t\t\t\t\tarr.splice(index, 1, newI);\n\n\t\t\t\t\t\t\t\tdoc.ref.update({\n\t\t\t\t\t\t\t\t\ttopicTitles: arr\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.then(function() { console.log(\"timePeriods successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error(\"Error updating timePeriod document:\", error); });\n\n\t\t\t// }\n\t\t\t\n\t\t\t//if there are resources to remove\n\t\t\tif (this.removedResources.length != 0){ this.removingResources() }\n\n\t\t\t//if there are resources to add\n\t\t\tif (this.newResources.length != 0){ this.addingResources() }\n\n\n\t\t\tthis.reset()\n\t\t},\n\n\n\t\tremovingResources(){\n\t\t\tvar batch = db.batch()\n\t\t\t\n\t\t\tthis.removedResources.forEach(function(doc) {\n\t\t\t\tvar ref = db.collection('resources').doc(doc.id)\n\t\t\t\tbatch.delete(ref);\n\t\t\t});\n\n\t\t\tbatch.commit()\n\t\t\t.then( function (doc) { store.dispatch(\"clear_removedResources\") });\n\t\t},\n\n\t\taddingResources(){\n\t\t\tvar batch = db.batch()\n\n\t\t\tthis.newResources.forEach(function(doc) {\n\t\t\t\tvar ref = db.collection('resources').doc()\n\t\t\t\tbatch.set(ref, doc);\n\t\t\t});\n\t\n\t\t\tbatch.commit()\n\t\t\t.then( function (doc) { store.dispatch(\"clear_newResources\") });\n\t\t},\n\n\n\t\t//clears firebase storage - thumbFile - thumbURL\n\t\tasync deleteImage(file){\n\t\t\tvar desertRef = firebase.storage().ref().child(file.thumbnail.name);\n\t\t\tawait desertRef.delete()\n\t\t\t.then(function() { \n\t\t\t\tfile.thumbFile = ''\n\t\t\t\tfile.thumbURL = ''\n\t\t\t})\n\t\t\t.catch(function(error) { console.error(\"Error updating document: \", error) });\n\t\t},\n\n\t\t//updates firebase storeage - thumbFile - thumbURL - deletes thumbURL\n\t\tasync saveImage(file){\n\t\t\tvar storageRef = firebase.storage().ref().child(file.thumbnail.name)\n\t\t\tawait storageRef.put(file.thumbnail)\n\t\t\tfile.thumbFile = file.thumbnail.name\n\t\t\tfile.thumbURL = await storageRef.getDownloadURL()\n\t\t\tdelete file.thumbnail\n\t\t},\n\n\t\treset () {\n\t\t\tthis.topicDialog = {}\n\t\t\tthis.$refs.form.reset()\n\t\t},\n\t},\n\tmounted(){\n\t\tthis.mountTopics()\n\t}\n}\n</script>\n"]}]}