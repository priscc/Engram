{"remainingRequest":"/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/src/components/Content_Forms/Modifying_Forms/ModifyingEvents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/src/components/Content_Forms/Modifying_Forms/ModifyingEvents.vue","mtime":1600107646512},{"path":"/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/Websites/StudyBites/ap-study-bit2_v1.1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhZGRSZXNvdXJjZXMgZnJvbSAiLi4vUmVzb3VyY2VfRm9ybXMyL2FkZFJlc291cmNlcy52dWUiCmltcG9ydCB7IGRiIH0gZnJvbSAnQC9tYWluJwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZScKZXhwb3J0IGRlZmF1bHQgewoJY29tcG9uZW50czp7CgkJYWRkUmVzb3VyY2VzCgl9LAoJZGF0YTogZnVuY3Rpb24gKCkgeyByZXR1cm4gewoJCWRpYWxvZ05ldzogZmFsc2UsCgkJZGlhbG9nOiBmYWxzZSwKCQlldmVudERpYWxvZzoge30sIC8vcGFzc2VzIGV2ZW50IGludG8gdi1tb2RlbCBldmVudERpYWxvZyBhbmQgYWxsb3dzIGZvcm0gdG8gY2hhbmdlIGl0CgkJZXZlbnREaWFsb2dOZXc6IHsgdGl0bGU6JycsIHRvcGljSUQ6JycsIHN0YXJ0RGF0ZTogJycsIGVuZERhdGU6ICcnLCB0aHVtYlVSTDonJywgY29udGVudE1EOicnLCBzdW1tYXJ5TUQ6JycsIGV2ZW50VHlwZTonJ30sCgkJd2lkdGg6ICc3NTBweCcsCgkJbmV3RXZlbnQ6IGZhbHNlLAoJCWFkZFJlc291cmNlczogZmFsc2UsCgkJbWVudTogZmFsc2UsCgkJcHJldmlldzogJycsCgkJdHlwZU9mRXZlbnQ6IFsnTm9uZScsICdDYXVzZScsICdUdXJuaW5nIFBvaW50JywgJ0ltcGFjdCddLAoJCWltZ1J1bGU6IFsgdiA9PiAhdiB8fCB2LnNpemUgPiAwICYmIHYuc2l6ZSA8IDIwMDAwMDAgfHwgJ0ltYWdlIHJlcXVpcmVkJ10KCX19LAoJY29tcHV0ZWQ6IHsKCQlldmVudHMoKSB7IHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5ldmVudHM7IH0sCgkJcmVtb3ZlZFJlc291cmNlcygpIHsgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnJlbW92ZWRSZXNvdXJjZXM7IH0sCgkJbmV3UmVzb3VyY2VzKCkgeyByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubmV3UmVzb3VyY2VzOyB9LAoJfSwKCW1ldGhvZHM6ewoJCWFzeW5jIHN1Ym1pdCgpewoJCQkKCQkJLy9pZiBuZXcgZXZlbnQKCQkJaWYodGhpcy5uZXdFdmVudCl7IC8vdXBkYXRlcyBkYiAmIHN0b3JlLmV2ZW50cwoJCQkJaWYodGhpcy5ldmVudERpYWxvZ05ldy50aHVtYm5haWwpewoJCQkJCWF3YWl0IHRoaXMuc2F2ZUltYWdlKHRoaXMuZXZlbnREaWFsb2dOZXcpCgkJCQl9CgkJCQl0aGlzLmV2ZW50RGlhbG9nTmV3LnRvcGljSUQgPSB0aGlzLiRzdG9yZS5zdGF0ZS50b3BpYy5pZAoJCQkJY29uc29sZS5sb2coJ3RvcGljJywgdGhpcy5ldmVudERpYWxvZ05ldykKCQkJCQoJCQkJZGIuY29sbGVjdGlvbigiZXZlbnRzIikuYWRkKHRoaXMuZXZlbnREaWFsb2dOZXcpCgkJCQkudGhlbihmdW5jdGlvbigpIHsgY29uc29sZS5sb2coIkRvY3VtZW50IHN1Y2Nlc3NmdWxseSB1cGRhdGVkISIpOyB9KQoJCQkJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoIkVycm9yIHVwZGF0aW5nIGRvY3VtZW50OiIsIGVycm9yKTsgfSk7CgkJCQkKCQkJCXN0b3JlLmRpc3BhdGNoKCJhZGRFdmVudCIsIHRoaXMuZXZlbnREaWFsb2dOZXcpOwoJCQkJdGhpcy5uZXdFdmVudCA9IGZhbHNlCgkJCX0KCQkJZWxzZXsKCQkJCWlmKHRoaXMuZXZlbnREaWFsb2cudGh1bWJuYWlsKXsKCQkJCQkvLyBhd2FpdCB0aGlzLmRlbGV0ZUltYWdlKHRoaXMuZXZlbnREaWFsb2cpCgkJCQkJYXdhaXQgdGhpcy5zYXZlSW1hZ2UodGhpcy5ldmVudERpYWxvZykKCQkJCX0KCgkJCQkvLyBjb25zb2xlLmxvZygndGhpcy5ldmVudERpYWxvZycsIHRoaXMuZXZlbnREaWFsb2cuaWQpCgkJCQlkYi5jb2xsZWN0aW9uKCJldmVudHMiKS5kb2ModGhpcy5ldmVudERpYWxvZy5pZCkudXBkYXRlKHRoaXMuZXZlbnREaWFsb2cpCgkJCQkudGhlbihmdW5jdGlvbigpIHsgY29uc29sZS5sb2coIkRvY3VtZW50IHN1Y2Nlc3NmdWxseSB1cGRhdGVkISIpOyB9KQoJCQkJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoIkVycm9yIHVwZGF0aW5nIGRvY3VtZW50OiIsIGVycm9yKTsgfSk7CgkJCX0KCQkJCgkJCWNvbnNvbGUubG9nKCd0aGlzLnJlbW92ZWRSZXNvdXJjZXMnLCB0aGlzLnJlbW92ZWRSZXNvdXJjZXMpCgkJCWNvbnNvbGUubG9nKCd0aGlzLm5ld1Jlc291cmNlcycsIHRoaXMubmV3UmVzb3VyY2VzKQoJCQkvL2lmIHRoZXJlIGFyZSByZXNvdXJjZXMgdG8gcmVtb3ZlCgkJCWlmICh0aGlzLnJlbW92ZWRSZXNvdXJjZXMubGVuZ3RoICE9IDApeyB0aGlzLnJlbW92aW5nUmVzb3VyY2VzKCkgfQoKCQkJLy9pZiB0aGVyZSBhcmUgcmVzb3VyY2VzIHRvIGFkZAoJCQlpZiAodGhpcy5uZXdSZXNvdXJjZXMubGVuZ3RoICE9IDApeyB0aGlzLmFkZGluZ1Jlc291cmNlcygpIH0KCgoJCQl0aGlzLnJlc2V0KCkKCQl9LAoKCQlyZW1vdmluZ1Jlc291cmNlcygpewoJCQl2YXIgYmF0Y2ggPSBkYi5iYXRjaCgpCgkJCXZhciBwcm9taXNlcyA9IFtdCgoJCQkvL3Byb21pc2UgdG8gcmVtb3ZlIHJlc291cmNlIGltYWdlIGZpbGVzIGZpcnN0CgkJCXZhciBpbWFnZXMgPSB0aGlzLnJlbW92ZWRSZXNvdXJjZXMuZmlsdGVyKHIgPT4gci5yZXNvdXJjZVR5cGUgPT09ICdpbWFnZScpCgkJCWltYWdlcy5mb3JFYWNoKGRvYyA9PiB7CgkJCQlwcm9taXNlcy5wdXNoKHRoaXMuZGVsZXRlSW1hZ2UoZG9jKSk7CgkJCX0pOwoKCQkJLy9iYXRjaCBjb21taXQgYWxsIHJlc291cmNlcyBhZnRlciBhbGwgcHJvbWlzZXMgYXJlIHJlc29sdmVkCgkJCVByb21pc2UuYWxsKHByb21pc2VzKQoJCQkudGhlbiggZnVuY3Rpb24oZG9jKSB7IAoJCQkJdGhpcy5yZW1vdmVkUmVzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CgkJCQkJdmFyIHJlZiA9IGRiLmNvbGxlY3Rpb24oJ3Jlc291cmNlcycpLmRvYyhkb2MuaWQpCgkJCQkJYmF0Y2guZGVsZXRlKHJlZik7CgkJCQl9LmJpbmQodGhpcykpOwoJCQl9LmJpbmQodGhpcykpCgkJCS50aGVuKCBmdW5jdGlvbihkb2MpIHsgYmF0Y2guY29tbWl0KCkgfSkKCQkJLnRoZW4oIGZ1bmN0aW9uIChkb2MpIHsgc3RvcmUuZGlzcGF0Y2goImNsZWFyX3JlbW92ZWRSZXNvdXJjZXMiKSB9KTsKCQl9LAoKCQlhZGRpbmdSZXNvdXJjZXMoKXsKCQkJdmFyIGJhdGNoID0gZGIuYmF0Y2goKQoJCQl2YXIgcHJvbWlzZXMgPSBbXQoKCQkJLy9wcm9taXNlIHRvIHVwbG9hZCBhbnkgcmVzb3VyY2UgaW1hZ2UgZmlsZXMgZmlyc3QKCQkJdmFyIGltYWdlcyA9IHRoaXMubmV3UmVzb3VyY2VzLmZpbHRlcihyID0+IHIucmVzb3VyY2VUeXBlID09PSAnaW1hZ2UnKQoJCQlpbWFnZXMuZm9yRWFjaChkb2MgPT4gewoJCQkJZGVsZXRlIGRvYy5wcmV2aWV3OwoJCQkJcHJvbWlzZXMucHVzaCh0aGlzLnNhdmVJbWFnZShkb2MpKTsKCQkJfSk7CgoJCQkvL2JhdGNoIGNvbW1pdCBhbGwgcmVzb3VyY2VzIGFmdGVyIGFsbCBwcm9taXNlcyBhcmUgcmVzb2x2ZWQKCQkJUHJvbWlzZS5hbGwocHJvbWlzZXMpCgkJCS50aGVuKCBmdW5jdGlvbihkb2MpIHsgCgkJCQl0aGlzLm5ld1Jlc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGRvYykgewoJCQkJCWRvYy50b3BpY0lEID0gdGhpcy4kc3RvcmUuc3RhdGUudG9waWMuaWQKCQkJCQl2YXIgcmVmID0gZGIuY29sbGVjdGlvbigncmVzb3VyY2VzJykuZG9jKCkKCQkJCQliYXRjaC5zZXQocmVmLCBkb2MpOwoJCQkJfS5iaW5kKHRoaXMpKTsKCQkJfS5iaW5kKHRoaXMpKQoJCQkudGhlbiggZnVuY3Rpb24oZG9jKSB7IGJhdGNoLmNvbW1pdCgpIH0pCgkJCS50aGVuKCBmdW5jdGlvbiAoZG9jKSB7IHN0b3JlLmRpc3BhdGNoKCJjbGVhcl9uZXdSZXNvdXJjZXMiKSB9KTsKCQl9LAoKCQkvL2NsZWFycyBmaXJlYmFzZSBzdG9yYWdlIC0gdGh1bWJGaWxlIC0gdGh1bWJVUkwKCQlhc3luYyBkZWxldGVJbWFnZShmaWxlKXsKCQkJY29uc29sZS5sb2coJ2ZpbGUnKQoJCQl2YXIgZGVzZXJ0UmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpLmNoaWxkKGZpbGUudGh1bWJGaWxlKTsKCQkJY29uc29sZS5sb2coZGVzZXJ0UmVmKQoJCQlhd2FpdCBkZXNlcnRSZWYuZGVsZXRlKCkKCQkJLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoIkVycm9yIHVwZGF0aW5nIGRvY3VtZW50OiAiLCBlcnJvcikgfSk7CgkJfSwKCgkJLy91cGRhdGVzIGZpcmViYXNlIHN0b3JlYWdlIC0gdGh1bWJGaWxlIC0gdGh1bWJVUkwgLSBkZWxldGVzIHRodW1iVVJMCgkJYXN5bmMgc2F2ZUltYWdlKGZpbGUpewoJCQl2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKS5jaGlsZChmaWxlLnRodW1ibmFpbC5uYW1lKQoJCQlhd2FpdCBzdG9yYWdlUmVmLnB1dChmaWxlLnRodW1ibmFpbCkKCQkJZmlsZS50aHVtYkZpbGUgPSBmaWxlLnRodW1ibmFpbC5uYW1lCgkJCWZpbGUudGh1bWJVUkwgPSBhd2FpdCBzdG9yYWdlUmVmLmdldERvd25sb2FkVVJMKCkKCQkJZGVsZXRlIGZpbGUudGh1bWJuYWlsCgkJCWNvbnNvbGUubG9nKCJpbWcgYWRkZWQiLCBmaWxlKQoJCX0sCgoJCXNhdmUgKGRhdGUpIHsgdGhpcy4kcmVmcy5tZW51LnNhdmUoZGF0ZSkgfSwKCQlyZXNldCAoKSB7IAoJCQl0aGlzLmV2ZW50RGlhbG9nID0ge30KCQkJdGhpcy5ldmVudERpYWxvZ05ldyA9IHsgdGl0bGU6JycsIHRvcGljSUQ6JycsIHN0YXJ0RGF0ZTogJycsIGVuZERhdGU6ICcnLCB0aHVtYlVSTDonJywgY29udGVudE1EOicnLCBzdW1tYXJ5TUQ6JycsIGV2ZW50VHlwZTonJ30KCQkJdGhpcy5uZXdFdmVudCA9IGZhbHNlCgkJCXRoaXMuZGlhbG9nID0gZmFsc2UKCQkJdGhpcy5hZGRSZXNvdXJjZXMgPSBmYWxzZQoJCQl0aGlzLndpZHRoID0gJzc1MHB4JwoKCQkJdGhpcy4kcmVmcy5mb3JtLnJlc2V0KCkgCgkJfSwKCgl9LAoJd2F0Y2g6IHsKCQltZW51ICh2YWwpIHsKCQkJdmFsICYmIHNldFRpbWVvdXQoKCkgPT4gKHRoaXMuJHJlZnMucGlja2VyLmFjdGl2ZVBpY2tlciA9ICdZRUFSJykpCgkJfQoJfQoJCQp9Cg=="},{"version":3,"sources":["ModifyingEvents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ModifyingEvents.vue","sourceRoot":"src/components/Content_Forms/Modifying_Forms","sourcesContent":["<template>\n<div id=\"app\">\n\n\t<!-- **** still need to put img rules -->\n\t<v-container class=\"mt-6\">\n\t\t<v-row>\n\t\t\t<!-- adding new event -->\n\t\t\t<v-col cols=\"4\" class=\"d-flex flex-column align-center justify-center\">\n\t\t\t\t<v-hover v-slot:default=\"{ hover }\">\n\t\t\t\t\t\t<v-btn :elevation=\"hover ? 12 : 2\" color=\"pink\" dark large fab @click=\"[dialogNew = true, newEvent = true]\">\n\t\t\t\t\t\t\t<v-icon>mdi-plus</v-icon>\n\t\t\t\t\t\t</v-btn>\n\t\t\t\t</v-hover>\n\t\t\t\t<p class=\"caption pt-3 mb-0 font-weight-medium\">Add Event</p>\n\t\t\t\t<p class=\"caption pt-0\">(add resources after event is created)</p>\n\t\t\t</v-col>\n\t\t\t<!-- displaying current events -->\n\t\t\t<v-col cols=\"4\" v-for=\"(event, i) in events\" :key=\"i\">\n\t\t\t\t<v-hover v-slot:default=\"{ hover }\">\n\t\t\t\t\t<v-card :elevation=\"hover ? 12 : 2\" class=\"mx-auto\">\n\t\t\t\t\t\t<v-btn fab small absolute top right @click=\"[dialog = true, eventDialog = event]\">\n\t\t\t\t\t\t\t<v-icon>mdi-lead-pencil</v-icon>\n\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t<v-img height=\"125\" :src=\"event.thumbURL\"></v-img>\n\t\t\t\t\t\t<v-card-text>{{event.title}}</v-card-text>\n\t\t\t\t\t</v-card>\n\t\t\t\t</v-hover>\n\t\t\t</v-col>\n\t\t</v-row>\n\t</v-container>\n\n\t<!-- NEW events form -->\n\t<v-dialog v-model=\"dialogNew\" :width=\"width\">\n\t\t<v-card outlined>\n\t\t\t<v-btn color=\"orange lighten-1\" small fab absolute right dark rounded @click=\"[dialogNew = false, reset()]\"><v-icon dark>mdi-close</v-icon></v-btn>\n\t\t\t<v-form ref=\"form\" class=\"px-8 pt-8\">\n\t\t\t\t<v-row>\n\t\t\t\t\t<v-col class=\"pb-0\">\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field dense filled v-model=\"eventDialogNew.title\" label=\"Title:\" auto-fill=\"off\" clearable></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field filled v-model=\"eventDialogNew.startDate\" label=\"Birth:\" placeholder=\"YYYY\" auto-fill=\"off\"></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field filled v-model=\"eventDialogNew.endDate\" label=\"Passing:\" placeholder=\"YYYY\" auto-fill=\"off\"></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-file-input dense v-model=\"eventDialogNew.thumbnail\" accept=\"image/*\" counter show-size label=\"Thumbnail\" :rules=\"imgRule\" clearable></v-file-input>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-select dense v-model=\"eventDialogNew.eventType\" :items=\"typeOfEvent\" outlined label=\"Event Category:\" clearable></v-select>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field dense filled v-model=\"eventDialogNew.summaryMD\" label=\"Summary of event on topic:\" clearable></v-text-field>\n\t\t\t\t\t\t\t\t<v-textarea dense filled v-model=\"eventDialogNew.contentMD\" label=\"Main event content: *has markdown\"></v-textarea>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t</v-col>\n\t\t\t\t</v-row>\n\t\t\t</v-form>\n\t\t\t<v-card-actions class=\"d-flex justify-end\">\n\t\t\t\t<v-btn class=\"white--text\" color=\"green\" @click=\"[dialogNew = false, submit()]\" > Accept Changes</v-btn>\n\t\t\t</v-card-actions>\n\t\t</v-card>\n\t</v-dialog>\n\n\n\n\t<!-- MOD events form -->\n\t<v-dialog v-model=\"dialog\" :width=\"width\">\n\t\t<v-card outlined>\n\t\t\t<v-btn color=\"orange lighten-1\" small fab absolute right dark rounded @click=\"reset()\"><v-icon dark>mdi-close</v-icon></v-btn>\n\t\t\t<v-form ref=\"form\" class=\"px-8 pt-8\">\n\t\t\t\t<v-row>\n\t\t\t\t\t<v-col class=\"pb-0\">\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field dense filled v-model=\"eventDialog.title\" label=\"Title:\" auto-fill=\"off\" clearable></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field filled v-model=\"eventDialog.startDate\" label=\"Start:\" placeholder=\"YYYY\" auto-fill=\"off\"></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-text-field filled v-model=\"eventDialog.endDate\" label=\"End:\" placeholder=\"YYYY\" auto-fill=\"off\"></v-text-field>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-file-input dense v-model=\"eventDialog.thumbnail\" accept=\"image/*\" counter show-size label=\"Thumbnail\" :placeholder=\"eventDialog.thumbFile\" :rules=\"imgRule\" clearable></v-file-input>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-select dense v-model=\"eventDialog.eventType\" :items=\"typeOfEvent\" outlined label=\"Event Category:\" :placeholder=\"eventDialog.eventType\" clearable></v-select>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t<v-row>\n\t\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t\t<v-btn v-if=\"!newEvent\" small rounded class=\"mb-6 purple lighten-1 text-center\" block dark @click=\"[addResources = true, width='100%']\">Add & Edit Resources</v-btn>\n\t\t\t\t\t\t\t\t<v-text-field dense filled v-model=\"eventDialog.summaryMD\" label=\"Summary of event on topic:\" :placeholder=\"eventDialog.summaryMD\" clearable></v-text-field>\n\t\t\t\t\t\t\t\t<v-textarea dense filled v-model=\"eventDialog.contentMD\" label=\"Main event content: *has markdown\" :placeholder=\"eventDialog.contentMD\"></v-textarea>\n\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t</v-row>\n\t\t\t\t\t</v-col>\n\n\t\t\t\t\t<!-- mod event resources -->\n\t\t\t\t\t<v-col v-if=\"addResources\"cols=\"7\">\n\t\t\t\t\t\t<v-card outlined class=\"py-2 px-4\" style=\"border-color: #AB47BC;\" >\n\t\t\t\t\t\t\t<add-resources :parentID=\"eventDialog.id\" :parentType=\"'event'\"></add-resources>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<v-card-actions class=\"d-flex justify-end\">\n\t\t\t\t\t\t\t\t<v-btn color=\"green\" dark @click=\"[addResources = false, width = '750px']\">Done</v-btn>\n\t\t\t\t\t\t\t</v-card-actions>\n\t\t\t\t\t\t</v-card>\n\t\t\t\t\t</v-col>\n\t\t\t\t</v-row>\n\t\t\t</v-form>\n\t\t\t<v-card-actions class=\"d-flex justify-end\">\n\t\t\t\t<v-btn class=\"white--text\" color=\"green\" @click=\"[dialog = false, submit()]\" > Accept Changes</v-btn>\n\t\t\t</v-card-actions>\n\t\t</v-card>\n\t</v-dialog>\n\n</div>\n\n</template>\n\n\n\n\n<script>\nimport addResources from \"../Resource_Forms2/addResources.vue\"\nimport { db } from '@/main'\nimport store from \"@/store\";\nimport firebase from 'firebase'\nexport default {\n\tcomponents:{\n\t\taddResources\n\t},\n\tdata: function () { return {\n\t\tdialogNew: false,\n\t\tdialog: false,\n\t\teventDialog: {}, //passes event into v-model eventDialog and allows form to change it\n\t\teventDialogNew: { title:'', topicID:'', startDate: '', endDate: '', thumbURL:'', contentMD:'', summaryMD:'', eventType:''},\n\t\twidth: '750px',\n\t\tnewEvent: false,\n\t\taddResources: false,\n\t\tmenu: false,\n\t\tpreview: '',\n\t\ttypeOfEvent: ['None', 'Cause', 'Turning Point', 'Impact'],\n\t\timgRule: [ v => !v || v.size > 0 && v.size < 2000000 || 'Image required']\n\t}},\n\tcomputed: {\n\t\tevents() { return this.$store.state.events; },\n\t\tremovedResources() { return this.$store.state.removedResources; },\n\t\tnewResources() { return this.$store.state.newResources; },\n\t},\n\tmethods:{\n\t\tasync submit(){\n\t\t\t\n\t\t\t//if new event\n\t\t\tif(this.newEvent){ //updates db & store.events\n\t\t\t\tif(this.eventDialogNew.thumbnail){\n\t\t\t\t\tawait this.saveImage(this.eventDialogNew)\n\t\t\t\t}\n\t\t\t\tthis.eventDialogNew.topicID = this.$store.state.topic.id\n\t\t\t\tconsole.log('topic', this.eventDialogNew)\n\t\t\t\t\n\t\t\t\tdb.collection(\"events\").add(this.eventDialogNew)\n\t\t\t\t.then(function() { console.log(\"Document successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error(\"Error updating document:\", error); });\n\t\t\t\t\n\t\t\t\tstore.dispatch(\"addEvent\", this.eventDialogNew);\n\t\t\t\tthis.newEvent = false\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(this.eventDialog.thumbnail){\n\t\t\t\t\t// await this.deleteImage(this.eventDialog)\n\t\t\t\t\tawait this.saveImage(this.eventDialog)\n\t\t\t\t}\n\n\t\t\t\t// console.log('this.eventDialog', this.eventDialog.id)\n\t\t\t\tdb.collection(\"events\").doc(this.eventDialog.id).update(this.eventDialog)\n\t\t\t\t.then(function() { console.log(\"Document successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error(\"Error updating document:\", error); });\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('this.removedResources', this.removedResources)\n\t\t\tconsole.log('this.newResources', this.newResources)\n\t\t\t//if there are resources to remove\n\t\t\tif (this.removedResources.length != 0){ this.removingResources() }\n\n\t\t\t//if there are resources to add\n\t\t\tif (this.newResources.length != 0){ this.addingResources() }\n\n\n\t\t\tthis.reset()\n\t\t},\n\n\t\tremovingResources(){\n\t\t\tvar batch = db.batch()\n\t\t\tvar promises = []\n\n\t\t\t//promise to remove resource image files first\n\t\t\tvar images = this.removedResources.filter(r => r.resourceType === 'image')\n\t\t\timages.forEach(doc => {\n\t\t\t\tpromises.push(this.deleteImage(doc));\n\t\t\t});\n\n\t\t\t//batch commit all resources after all promises are resolved\n\t\t\tPromise.all(promises)\n\t\t\t.then( function(doc) { \n\t\t\t\tthis.removedResources.forEach(function(doc) {\n\t\t\t\t\tvar ref = db.collection('resources').doc(doc.id)\n\t\t\t\t\tbatch.delete(ref);\n\t\t\t\t}.bind(this));\n\t\t\t}.bind(this))\n\t\t\t.then( function(doc) { batch.commit() })\n\t\t\t.then( function (doc) { store.dispatch(\"clear_removedResources\") });\n\t\t},\n\n\t\taddingResources(){\n\t\t\tvar batch = db.batch()\n\t\t\tvar promises = []\n\n\t\t\t//promise to upload any resource image files first\n\t\t\tvar images = this.newResources.filter(r => r.resourceType === 'image')\n\t\t\timages.forEach(doc => {\n\t\t\t\tdelete doc.preview;\n\t\t\t\tpromises.push(this.saveImage(doc));\n\t\t\t});\n\n\t\t\t//batch commit all resources after all promises are resolved\n\t\t\tPromise.all(promises)\n\t\t\t.then( function(doc) { \n\t\t\t\tthis.newResources.forEach(function(doc) {\n\t\t\t\t\tdoc.topicID = this.$store.state.topic.id\n\t\t\t\t\tvar ref = db.collection('resources').doc()\n\t\t\t\t\tbatch.set(ref, doc);\n\t\t\t\t}.bind(this));\n\t\t\t}.bind(this))\n\t\t\t.then( function(doc) { batch.commit() })\n\t\t\t.then( function (doc) { store.dispatch(\"clear_newResources\") });\n\t\t},\n\n\t\t//clears firebase storage - thumbFile - thumbURL\n\t\tasync deleteImage(file){\n\t\t\tconsole.log('file')\n\t\t\tvar desertRef = firebase.storage().ref().child(file.thumbFile);\n\t\t\tconsole.log(desertRef)\n\t\t\tawait desertRef.delete()\n\t\t\t.catch(function(error) { console.error(\"Error updating document: \", error) });\n\t\t},\n\n\t\t//updates firebase storeage - thumbFile - thumbURL - deletes thumbURL\n\t\tasync saveImage(file){\n\t\t\tvar storageRef = firebase.storage().ref().child(file.thumbnail.name)\n\t\t\tawait storageRef.put(file.thumbnail)\n\t\t\tfile.thumbFile = file.thumbnail.name\n\t\t\tfile.thumbURL = await storageRef.getDownloadURL()\n\t\t\tdelete file.thumbnail\n\t\t\tconsole.log(\"img added\", file)\n\t\t},\n\n\t\tsave (date) { this.$refs.menu.save(date) },\n\t\treset () { \n\t\t\tthis.eventDialog = {}\n\t\t\tthis.eventDialogNew = { title:'', topicID:'', startDate: '', endDate: '', thumbURL:'', contentMD:'', summaryMD:'', eventType:''}\n\t\t\tthis.newEvent = false\n\t\t\tthis.dialog = false\n\t\t\tthis.addResources = false\n\t\t\tthis.width = '750px'\n\n\t\t\tthis.$refs.form.reset() \n\t\t},\n\n\t},\n\twatch: {\n\t\tmenu (val) {\n\t\t\tval && setTimeout(() => (this.$refs.picker.activePicker = 'YEAR'))\n\t\t}\n\t}\n\t\t\n}\n</script>\n"]}]}