{"remainingRequest":"/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/babel-loader/lib/index.js!/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/vuetify-loader/lib/loader.js??ref--17-0!/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/Websites/ap-study-bites/src/views/Adding_Content/AddTopic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/Websites/ap-study-bites/src/views/Adding_Content/AddTopic.vue","mtime":1598848041670},{"path":"/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/Websites/ap-study-bites/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3ByaXNjaWxsYV9jYW5jYXIvRG9jdW1lbnRzL1dlYnNpdGVzL2FwLXN0dWR5LWJpdGVzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZGIgfSBmcm9tICdAL21haW4nOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnQC9tYWluJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBOZXcgVG9waWMgaW5mbwogICAgICBjcmVhdGVkVG9waWM6IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgdGh1bWJVUkw6ICcnLAogICAgICAgIGNvbnRlbnRNRDogJycKICAgICAgfSwKICAgICAgLy8gRm9ybQogICAgICB0aW1lUGVyaW9kczogWydSZWdpb25hbCBJbnRlcmFjdGlvbnMgKDEyMDAgLSAxNDUwKScsICdGaXJzdCBHbG9iYWwgQWdlICgxNDUwIC0gMTc1MCknLCAnUmV2b2x1dGlvbnMgJiBJbmR1c3RyaWFsaXphdGlvbiAoMTc1MCAtIDE5MDApJywgJ01vZGVybiBUaW1lcyAoMTkwMCAtIFByZXNlbnQpJ10sCiAgICAgIHRpbWVQZXJpb2Q6ICcnLAogICAgICAvLyBWYWxpZGF0aW9uCiAgICAgIHZhbGlkOiB0cnVlLAogICAgICBydWxlOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICdSZXF1aXJlZCc7CiAgICAgIH1dLAogICAgICBpbWdSdWxlOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8IHYuc2l6ZSA8IDIwMDAwMDAgfHwgJ0ltYWdlIHNpemUgc2hvdWxkIGJlIGxlc3MgdGhhbiAyIE1CISc7CiAgICAgIH1dCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0RGF0YTogZnVuY3Rpb24gc3VibWl0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRvcGljSUQsIHVwZGF0ZWRUb3BpY3MsIGlkLCBuZXdUb3BpYzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKCJ0b3BpY3MiKS5hZGQoX3RoaXMuY3JlYXRlZFRvcGljKS50aGVuKGZ1bmN0aW9uIChkb2NSZWYpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY1JlZi5pZDsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBhZGRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICB0b3BpY0lEID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvcGljSUQpOyAvL3B1bGxpbmcgaW5mbyBmcm9tIHRpbWVQZXJpb2RzCgogICAgICAgICAgICAgICAgdXBkYXRlZFRvcGljcyA9IFtdOwogICAgICAgICAgICAgICAgaWQgPSAnJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oInRpbWVQZXJpb2RzIikud2hlcmUoJ3RpdGxlJywgJz09JywgX3RoaXMudGltZVBlcmlvZCkuZ2V0KCkudGhlbihmdW5jdGlvbiAocXVlcnlTbmFwc2hvdCkgewogICAgICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb2MnLCBkb2MpOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUb3BpY3MgPSBkb2MuZGF0YSgpLnRvcGljVGl0bGVzOwogICAgICAgICAgICAgICAgICAgIGlkID0gZG9jLmlkOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgZ2V0dGluZyBkb2N1bWVudHM6ICIsIGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAvL3VwZGF0aW5nIHRpbWVQZXJpb2RzCiAgICAgICAgICAgICAgICBuZXdUb3BpYyA9IHsKICAgICAgICAgICAgICAgICAgdG9waWNJRDogdG9waWNJRCwKICAgICAgICAgICAgICAgICAgdGl0bGU6IF90aGlzLmNyZWF0ZWRUb3BpYy50aXRsZSwKICAgICAgICAgICAgICAgICAgdGh1bWJVUkw6IF90aGlzLmNyZWF0ZWRUb3BpYy50aHVtYlVSTAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHVwZGF0ZWRUb3BpY3MucHVzaChuZXdUb3BpYyk7CiAgICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ0aW1lUGVyaW9kcyIpLmRvYyhpZCkudXBkYXRlKHsKICAgICAgICAgICAgICAgICAgJ3RvcGljVGl0bGVzJzogdXBkYXRlZFRvcGljcwogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEb2N1bWVudCBzdWNjZXNzZnVsbHkgdXBkYXRlZCEiKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciB1cGRhdGluZyBkb2N1bWVudDogIiwgZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXMucmVzZXQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCk7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AddTopic.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div id=\"app\">\n\t<v-container>\n\t\t<v-row class=\"blue-grey darken-2 white--text text-center\">\n\t\t\t<v-col>\n\t\t\t\t<h1 class=\"display-1\">Add a New Topic</h1>\n\t\t\t\t<blockquote class=\"blockquote pa-0 pb-4\">Fill the following form to add topics and topics to the home web page</blockquote>\n\t\t\t\t<p class=\"caption\">Reminder: \n\t\t\t\t\t<br> (1) To register this topic, you still have to select the Time Period on the mod topic page & add an image\n\t\t\t\t</p>\n\t\t\t</v-col>\n\t\t</v-row>\n\t\t<!-- FORM -->\n\t\t<v-form ref=\"form\" v-model=\"valid\">\n\t\t\t<v-row>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t<v-col cols=\"9\">\n\t\t\t\t\t<v-text-field label=\"Topic title:\" autocomplete=\"off\" v-model=\"createdTopic.title\" :rules=\"rule\" required></v-text-field>\n\t\t\t\t\t<v-select v-model=\"timePeriod\" :items=\"timePeriods\" label=\"Choose Time Period:\" outlined dense :rules=\"rule\" required>{{ timePeriods }}</v-select>\n\t\t\t\t\t<!-- <v-row class=\"pt-2\">\n\t\t\t\t\t\t<v-col cols=\"4\">\n\t\t\t\t\t\t\t<v-file-input disabled accept=\"image/*\" counter show-size label=\"Thumbnail\"></v-file-input>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t<v-textarea disabled outlined name=\"input-7-4\" label=\"Topic intro content\" value=\"This is just a tester, don't fill out\" ></v-textarea>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row> -->\n\t\t\t\t\t<v-row>\n\t\t\t\t\t\t<v-col class=\"d-flex justify-end row-reverse\">\n\t\t\t\t\t\t\t<v-btn class=\"mr-3\" large color=\"error\" outlined @click=\"reset\">Reset Form</v-btn>\n\t\t\t\t\t\t\t<v-btn :disabled=\"!valid\" large color=\"success\" @click=\"submitData\">SUBMIT</v-btn>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row>\n\t\t\t\t</v-col>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t</v-row>\n\t\t</v-form>\n\t</v-container>\n</div>\n</template>\n\n\n<script>\nimport { db } from '@/main'\nimport firebase from '@/main'\nimport _ from 'lodash'\nexport default {\n\tdata: function () { return {\n\t\t// New Topic info\n\t\tcreatedTopic: {\n\t\t\ttitle: '',\n\t\t\tthumbURL: '',\n\t\t\tcontentMD: ''\n\t\t},\n\t\t// Form\n\t\ttimePeriods: [\n\t\t\t'Regional Interactions (1200 - 1450)',\n\t\t\t'First Global Age (1450 - 1750)',\n\t\t\t'Revolutions & Industrialization (1750 - 1900)',\n\t\t\t'Modern Times (1900 - Present)'\n\t\t],\n\t\ttimePeriod: '',\n\t\t// Validation\n\t\tvalid: true,\n\t\trule: [ v => !!v || 'Required' ],\n\t\timgRule: [ v => !!v || v.size < 2000000 || 'Image size should be less than 2 MB!']\n\t}},\n\tmethods: {\n\t\tasync submitData () {\n\t\t\t//creating doc\n\t\t\tlet topicID = await db.collection(\"topics\").add(this.createdTopic)\n\t\t\t\t.then(function(docRef) {\n\t\t\t\t\treturn docRef.id;\n\t\t\t\t}).catch(function(error) {\n\t\t\t\t\tconsole.error(\"Error adding document: \", error);\n\t\t\t\t});\n\t\t\t\n\t\t\tconsole.log(topicID)\n\t\t\t//pulling info from timePeriods\n\t\t\tvar updatedTopics = []\n\t\t\tvar id = ''\n\t\t\tawait db.collection(\"timePeriods\").where('title', '==', this.timePeriod).get()\n\t\t\t\t.then(function(querySnapshot) {\n\t\t\t\t\tquerySnapshot.forEach(function(doc) {\n\t\t\t\t\t\tconsole.log('doc', doc)\n\t\t\t\t\t\tupdatedTopics = doc.data().topicTitles\n\t\t\t\t\t\tid = doc.id\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t//updating timePeriods\n\t\t\tvar newTopic = {topicID: topicID, title: this.createdTopic.title, thumbURL: this.createdTopic.thumbURL}\n\t\t\tupdatedTopics.push(newTopic)\n\t\t\tdb.collection(\"timePeriods\").doc(id).update( {'topicTitles': updatedTopics} )\n\t\t\t\t.then(function() { console.log( \"Document successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error( \"Error updating document: \", error); });\n\t\t\t\n\t\t\tthis.reset()\n\t\t},\n\t\tvalidate () { \n\t\t\tthis.valid = false\n\t\t\tthis.$refs.form.validate() \n\t\t},\n\t\treset () { this.$refs.form.reset() }\n\t}\n}\n</script>\n"],"sourceRoot":"src/views/Adding_Content"}]}