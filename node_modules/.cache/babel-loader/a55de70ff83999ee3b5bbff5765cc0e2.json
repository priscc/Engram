{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline.js","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline.js","mtime":1590989723688},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giKTsKCi8vIHZpbTogdHM9MiBzdz0yCihmdW5jdGlvbiAoKSB7CiAgZDMudGltZWxpbmUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgRElTUExBWV9UWVBFUyA9IFsiY2lyY2xlIiwgInJlY3QiXTsKCiAgICB2YXIgaG92ZXIgPSBmdW5jdGlvbiBob3ZlcigpIHt9LAogICAgICAgIG1vdXNlb3ZlciA9IGZ1bmN0aW9uIG1vdXNlb3ZlcigpIHt9LAogICAgICAgIG1vdXNlb3V0ID0gZnVuY3Rpb24gbW91c2VvdXQoKSB7fSwKICAgICAgICBjbGljayA9IGZ1bmN0aW9uIGNsaWNrKCkge30sCiAgICAgICAgc2Nyb2xsID0gZnVuY3Rpb24gc2Nyb2xsKCkge30sCiAgICAgICAgbGFiZWxGdW5jdGlvbiA9IGZ1bmN0aW9uIGxhYmVsRnVuY3Rpb24obGFiZWwpIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfSwKICAgICAgICBuYXZpZ2F0ZUxlZnQgPSBmdW5jdGlvbiBuYXZpZ2F0ZUxlZnQoKSB7fSwKICAgICAgICBuYXZpZ2F0ZVJpZ2h0ID0gZnVuY3Rpb24gbmF2aWdhdGVSaWdodCgpIHt9LAogICAgICAgIG9yaWVudCA9ICJib3R0b20iLAogICAgICAgIHdpZHRoID0gbnVsbCwKICAgICAgICBoZWlnaHQgPSBudWxsLAogICAgICAgIHJvd1NlcGFyYXRvcnNDb2xvciA9IG51bGwsCiAgICAgICAgYmFja2dyb3VuZENvbG9yID0gbnVsbCwKICAgICAgICB0aWNrRm9ybWF0ID0gewogICAgICBmb3JtYXQ6IGQzLnRpbWUuZm9ybWF0KCIlSSAlcCIpLAogICAgICB0aWNrVGltZTogZDMudGltZS5ob3VycywKICAgICAgdGlja0ludGVydmFsOiAxLAogICAgICB0aWNrU2l6ZTogNiwKICAgICAgdGlja1ZhbHVlczogbnVsbAogICAgfSwKICAgICAgICBjb2xvckN5Y2xlID0gZDMuc2NhbGUuY2F0ZWdvcnkyMCgpLAogICAgICAgIGNvbG9yUHJvcGVydHlOYW1lID0gbnVsbCwKICAgICAgICBkaXNwbGF5ID0gInJlY3QiLAogICAgICAgIGJlZ2lubmluZyA9IDAsCiAgICAgICAgbGFiZWxNYXJnaW4gPSAwLAogICAgICAgIGVuZGluZyA9IDAsCiAgICAgICAgbWFyZ2luID0gewogICAgICBsZWZ0OiAzMCwKICAgICAgcmlnaHQ6IDMwLAogICAgICB0b3A6IDMwLAogICAgICBib3R0b206IDMwCiAgICB9LAogICAgICAgIHN0YWNrZWQgPSBmYWxzZSwKICAgICAgICByb3RhdGVUaWNrcyA9IGZhbHNlLAogICAgICAgIHRpbWVJc1JlbGF0aXZlID0gZmFsc2UsCiAgICAgICAgZnVsbExlbmd0aEJhY2tncm91bmRzID0gZmFsc2UsCiAgICAgICAgaXRlbUhlaWdodCA9IDIwLAogICAgICAgIGl0ZW1NYXJnaW4gPSA1LAogICAgICAgIG5hdk1hcmdpbiA9IDYwLAogICAgICAgIHNob3dUaW1lQXhpcyA9IHRydWUsCiAgICAgICAgc2hvd0F4aXNUb3AgPSBmYWxzZSwKICAgICAgICBzaG93VG9kYXlMaW5lID0gZmFsc2UsCiAgICAgICAgdGltZUF4aXNUaWNrID0gZmFsc2UsCiAgICAgICAgdGltZUF4aXNUaWNrRm9ybWF0ID0gewogICAgICBzdHJva2U6ICJzdHJva2UtZGFzaGFycmF5IiwKICAgICAgc3BhY2luZzogIjQgMTAiCiAgICB9LAogICAgICAgIHNob3dUb2RheUZvcm1hdCA9IHsKICAgICAgbWFyZ2luVG9wOiAyNSwKICAgICAgbWFyZ2luQm90dG9tOiAwLAogICAgICB3aWR0aDogMSwKICAgICAgY29sb3I6IGNvbG9yQ3ljbGUKICAgIH0sCiAgICAgICAgc2hvd0JvcmRlckxpbmUgPSBmYWxzZSwKICAgICAgICBzaG93Qm9yZGVyRm9ybWF0ID0gewogICAgICBtYXJnaW5Ub3A6IDI1LAogICAgICBtYXJnaW5Cb3R0b206IDAsCiAgICAgIHdpZHRoOiAxLAogICAgICBjb2xvcjogY29sb3JDeWNsZQogICAgfSwKICAgICAgICBzaG93QXhpc0hlYWRlckJhY2tncm91bmQgPSBmYWxzZSwKICAgICAgICBzaG93QXhpc05hdiA9IGZhbHNlLAogICAgICAgIHNob3dBeGlzQ2FsZW5kYXJZZWFyID0gZmFsc2UsCiAgICAgICAgYXhpc0JnQ29sb3IgPSAid2hpdGUiLAogICAgICAgIGNoYXJ0RGF0YSA9IHt9OwoKICAgIHZhciBhcHBlbmRUaW1lQXhpcyA9IGZ1bmN0aW9uIGFwcGVuZFRpbWVBeGlzKGcsIHhBeGlzLCB5UG9zaXRpb24pIHsKICAgICAgaWYgKHNob3dBeGlzSGVhZGVyQmFja2dyb3VuZCkgewogICAgICAgIGFwcGVuZEF4aXNIZWFkZXJCYWNrZ3JvdW5kKGcsIDAsIDApOwogICAgICB9CgogICAgICBpZiAoc2hvd0F4aXNOYXYpIHsKICAgICAgICBhcHBlbmRUaW1lQXhpc05hdihnKTsKICAgICAgfQoKICAgICAgOwogICAgICB2YXIgYXhpcyA9IGcuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCAiYXhpcyIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIDAgKyAiLCIgKyB5UG9zaXRpb24gKyAiKSIpLmNhbGwoeEF4aXMpOwogICAgfTsKCiAgICB2YXIgYXBwZW5kVGltZUF4aXNDYWxlbmRhclllYXIgPSBmdW5jdGlvbiBhcHBlbmRUaW1lQXhpc0NhbGVuZGFyWWVhcihuYXYpIHsKICAgICAgdmFyIGNhbGVuZGFyTGFiZWwgPSBiZWdpbm5pbmcuZ2V0RnVsbFllYXIoKTsKCiAgICAgIGlmIChiZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSAhPSBlbmRpbmcuZ2V0RnVsbFllYXIoKSkgewogICAgICAgIGNhbGVuZGFyTGFiZWwgPSBiZWdpbm5pbmcuZ2V0RnVsbFllYXIoKSArICItIiArIGVuZGluZy5nZXRGdWxsWWVhcigpOwogICAgICB9CgogICAgICBuYXYuYXBwZW5kKCJ0ZXh0IikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgMjAgKyAiLCAwKSIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgMTQpLmF0dHIoImNsYXNzIiwgImNhbGVuZGFyWWVhciIpLnRleHQoY2FsZW5kYXJMYWJlbCk7CiAgICB9OwoKICAgIHZhciBhcHBlbmRUaW1lQXhpc05hdiA9IGZ1bmN0aW9uIGFwcGVuZFRpbWVBeGlzTmF2KGcpIHsKICAgICAgdmFyIHRpbWVsaW5lQmxvY2tzID0gNjsKICAgICAgdmFyIGxlZnROYXZNYXJnaW4gPSBtYXJnaW4ubGVmdCAtIG5hdk1hcmdpbjsKICAgICAgdmFyIGluY3JlbWVudFZhbHVlID0gKHdpZHRoIC0gbWFyZ2luLmxlZnQpIC8gdGltZWxpbmVCbG9ja3M7CiAgICAgIHZhciByaWdodE5hdk1hcmdpbiA9IHdpZHRoIC0gbWFyZ2luLnJpZ2h0IC0gaW5jcmVtZW50VmFsdWUgKyBuYXZNYXJnaW47CiAgICAgIHZhciBuYXYgPSBnLmFwcGVuZCgnZycpLmF0dHIoImNsYXNzIiwgImF4aXMiKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIDIwKSIpOwoKICAgICAgaWYgKHNob3dBeGlzQ2FsZW5kYXJZZWFyKSB7CiAgICAgICAgYXBwZW5kVGltZUF4aXNDYWxlbmRhclllYXIobmF2KTsKICAgICAgfQoKICAgICAgOwogICAgICBuYXYuYXBwZW5kKCJ0ZXh0IikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgbGVmdE5hdk1hcmdpbiArICIsIDApIikuYXR0cigieCIsIDApLmF0dHIoInkiLCAxNCkuYXR0cigiY2xhc3MiLCAiY2hldnJvbiIpLnRleHQoIjwiKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5hdmlnYXRlTGVmdChiZWdpbm5pbmcsIGNoYXJ0RGF0YSk7CiAgICAgIH0pOwogICAgICBuYXYuYXBwZW5kKCJ0ZXh0IikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgcmlnaHROYXZNYXJnaW4gKyAiLCAwKSIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgMTQpLmF0dHIoImNsYXNzIiwgImNoZXZyb24iKS50ZXh0KCI+Iikub24oImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuYXZpZ2F0ZVJpZ2h0KGVuZGluZywgY2hhcnREYXRhKTsKICAgICAgfSk7CiAgICB9OwoKICAgIHZhciBhcHBlbmRBeGlzSGVhZGVyQmFja2dyb3VuZCA9IGZ1bmN0aW9uIGFwcGVuZEF4aXNIZWFkZXJCYWNrZ3JvdW5kKGcsIHhBeGlzLCB5QXhpcykgewogICAgICBnLmluc2VydCgicmVjdCIpLmF0dHIoImNsYXNzIiwgInJvdy1ncmVlbi1iYXIiKS5hdHRyKCJ4IiwgeEF4aXMpLmF0dHIoIndpZHRoIiwgd2lkdGgpLmF0dHIoInkiLCB5QXhpcykuYXR0cigiaGVpZ2h0IiwgaXRlbUhlaWdodCkuYXR0cigiZmlsbCIsIGF4aXNCZ0NvbG9yKTsKICAgIH07CgogICAgdmFyIGFwcGVuZFRpbWVBeGlzVGljayA9IGZ1bmN0aW9uIGFwcGVuZFRpbWVBeGlzVGljayhnLCB4QXhpcywgbWF4U3RhY2spIHsKICAgICAgZy5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJheGlzIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgMCArICIsIiArIChtYXJnaW4udG9wICsgKGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luKSAqIG1heFN0YWNrKSArICIpIikuYXR0cih0aW1lQXhpc1RpY2tGb3JtYXQuc3Ryb2tlLCB0aW1lQXhpc1RpY2tGb3JtYXQuc3BhY2luZykuY2FsbCh4QXhpcy50aWNrRm9ybWF0KCIiKS50aWNrU2l6ZSgtKG1hcmdpbi50b3AgKyAoaXRlbUhlaWdodCArIGl0ZW1NYXJnaW4pICogKG1heFN0YWNrIC0gMSkgKyAzKSwgMCwgMCkpOwogICAgfTsKCiAgICB2YXIgYXBwZW5kQmFja2dyb3VuZEJhciA9IGZ1bmN0aW9uIGFwcGVuZEJhY2tncm91bmRCYXIoeUF4aXNNYXBwaW5nLCBpbmRleCwgZywgZGF0YSwgZGF0dW0pIHsKICAgICAgdmFyIGdyZWVuYmFyWUF4aXMgPSAoaXRlbUhlaWdodCArIGl0ZW1NYXJnaW4pICogeUF4aXNNYXBwaW5nW2luZGV4XSArIG1hcmdpbi50b3A7CiAgICAgIGcuc2VsZWN0QWxsKCJzdmciKS5kYXRhKGRhdGEpLmVudGVyKCkuaW5zZXJ0KCJyZWN0IikuYXR0cigiY2xhc3MiLCAicm93LWdyZWVuLWJhciIpLmF0dHIoIngiLCBmdWxsTGVuZ3RoQmFja2dyb3VuZHMgPyAwIDogbWFyZ2luLmxlZnQpLmF0dHIoIndpZHRoIiwgZnVsbExlbmd0aEJhY2tncm91bmRzID8gd2lkdGggOiB3aWR0aCAtIG1hcmdpbi5yaWdodCAtIG1hcmdpbi5sZWZ0KS5hdHRyKCJ5IiwgZ3JlZW5iYXJZQXhpcykuYXR0cigiaGVpZ2h0IiwgaXRlbUhlaWdodCkuYXR0cigiZmlsbCIsIGJhY2tncm91bmRDb2xvciBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gYmFja2dyb3VuZENvbG9yKGRhdHVtLCBpbmRleCkgOiBiYWNrZ3JvdW5kQ29sb3IpOwogICAgfTsKCiAgICB2YXIgYXBwZW5kTGFiZWwgPSBmdW5jdGlvbiBhcHBlbmRMYWJlbChnUGFyZW50LCB5QXhpc01hcHBpbmcsIGluZGV4LCBoYXNMYWJlbCwgZGF0dW0pIHsKICAgICAgdmFyIGZ1bGxJdGVtSGVpZ2h0ID0gaXRlbUhlaWdodCArIGl0ZW1NYXJnaW47CiAgICAgIHZhciByb3dzRG93biA9IG1hcmdpbi50b3AgKyBmdWxsSXRlbUhlaWdodCAvIDIgKyBmdWxsSXRlbUhlaWdodCAqICh5QXhpc01hcHBpbmdbaW5kZXhdIHx8IDEpOwogICAgICBnUGFyZW50LmFwcGVuZCgidGV4dCIpLmF0dHIoImNsYXNzIiwgInRpbWVsaW5lLWxhYmVsIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgbGFiZWxNYXJnaW4gKyAiLCIgKyByb3dzRG93biArICIpIikudGV4dChoYXNMYWJlbCA/IGxhYmVsRnVuY3Rpb24oZGF0dW0ubGFiZWwpIDogZGF0dW0uaWQpLm9uKCJjbGljayIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgY2xpY2soZCwgaW5kZXgsIGRhdHVtKTsKICAgICAgfSk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHRpbWVsaW5lKGdQYXJlbnQpIHsKICAgICAgdmFyIGcgPSBnUGFyZW50LmFwcGVuZCgiZyIpOwogICAgICB2YXIgZ1BhcmVudFNpemUgPSBnUGFyZW50WzBdWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB2YXIgZ1BhcmVudEl0ZW0gPSBkMy5zZWxlY3QoZ1BhcmVudFswXVswXSk7CiAgICAgIHZhciB5QXhpc01hcHBpbmcgPSB7fSwKICAgICAgICAgIG1heFN0YWNrID0gMSwKICAgICAgICAgIG1pblRpbWUgPSAwLAogICAgICAgICAgbWF4VGltZSA9IDA7CiAgICAgIHNldFdpZHRoKCk7IC8vIGNoZWNrIGlmIHRoZSB1c2VyIHdhbnRzIHJlbGF0aXZlIHRpbWUKICAgICAgLy8gaWYgc28sIHN1YnN0cmFjdCB0aGUgZmlyc3QgdGltZXN0YW1wIGZyb20gZWFjaCBzdWJzZXF1ZW50IHRpbWVzdGFtcHMKCiAgICAgIGlmICh0aW1lSXNSZWxhdGl2ZSkgewogICAgICAgIGcuZWFjaChmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgZC5mb3JFYWNoKGZ1bmN0aW9uIChkYXR1bSwgaW5kZXgpIHsKICAgICAgICAgICAgZGF0dW0udGltZXMuZm9yRWFjaChmdW5jdGlvbiAodGltZSwgaikgewogICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCAmJiBqID09PSAwKSB7CiAgICAgICAgICAgICAgICBvcmlnaW5UaW1lID0gdGltZS5zdGFydGluZ190aW1lOyAvL1N0b3JlIHRoZSB0aW1lc3RhbXAgdGhhdCB3aWxsIHNlcnZlIGFzIG9yaWdpbgoKICAgICAgICAgICAgICAgIHRpbWUuc3RhcnRpbmdfdGltZSA9IDA7IC8vU2V0IHRoZSBvcmlnaW4KCiAgICAgICAgICAgICAgICB0aW1lLmVuZGluZ190aW1lID0gdGltZS5lbmRpbmdfdGltZSAtIG9yaWdpblRpbWU7IC8vU3RvcmUgdGhlIHJlbGF0aXZlIHRpbWUgKG1pbGxpcykKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGltZS5zdGFydGluZ190aW1lID0gdGltZS5zdGFydGluZ190aW1lIC0gb3JpZ2luVGltZTsKICAgICAgICAgICAgICAgIHRpbWUuZW5kaW5nX3RpbWUgPSB0aW1lLmVuZGluZ190aW1lIC0gb3JpZ2luVGltZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gLy8gY2hlY2sgaG93IG1hbnkgc3RhY2tzIHdlJ3JlIGdvbm5hIG5lZWQKICAgICAgLy8gZG8gdGhpcyBoZXJlIHNvIHRoYXQgd2UgY2FuIGRyYXcgdGhlIGF4aXMgYmVmb3JlIHRoZSBncmFwaAoKCiAgICAgIGlmIChzdGFja2VkIHx8IGVuZGluZyA9PT0gMCB8fCBiZWdpbm5pbmcgPT09IDApIHsKICAgICAgICBnLmVhY2goZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgIGQuZm9yRWFjaChmdW5jdGlvbiAoZGF0dW0sIGluZGV4KSB7CiAgICAgICAgICAgIC8vIGNyZWF0ZSB5IG1hcHBpbmcgZm9yIHN0YWNrZWQgZ3JhcGgKICAgICAgICAgICAgaWYgKHN0YWNrZWQgJiYgT2JqZWN0LmtleXMoeUF4aXNNYXBwaW5nKS5pbmRleE9mKGluZGV4KSA9PSAtMSkgewogICAgICAgICAgICAgIHlBeGlzTWFwcGluZ1tpbmRleF0gPSBtYXhTdGFjazsKICAgICAgICAgICAgICBtYXhTdGFjaysrOwogICAgICAgICAgICB9IC8vIGZpZ3VyZSBvdXQgYmVnaW5uaW5nIGFuZCBlbmRpbmcgdGltZXMgaWYgdGhleSBhcmUgdW5zcGVjaWZpZWQKCgogICAgICAgICAgICBkYXR1bS50aW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh0aW1lLCBpKSB7CiAgICAgICAgICAgICAgaWYgKGJlZ2lubmluZyA9PT0gMCkgaWYgKHRpbWUuc3RhcnRpbmdfdGltZSA8IG1pblRpbWUgfHwgbWluVGltZSA9PT0gMCAmJiB0aW1lSXNSZWxhdGl2ZSA9PT0gZmFsc2UpIG1pblRpbWUgPSB0aW1lLnN0YXJ0aW5nX3RpbWU7CiAgICAgICAgICAgICAgaWYgKGVuZGluZyA9PT0gMCkgaWYgKHRpbWUuZW5kaW5nX3RpbWUgPiBtYXhUaW1lKSBtYXhUaW1lID0gdGltZS5lbmRpbmdfdGltZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGVuZGluZyA9PT0gMCkgewogICAgICAgICAgZW5kaW5nID0gbWF4VGltZTsKICAgICAgICB9CgogICAgICAgIGlmIChiZWdpbm5pbmcgPT09IDApIHsKICAgICAgICAgIGJlZ2lubmluZyA9IG1pblRpbWU7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgc2NhbGVGYWN0b3IgPSAxIC8gKGVuZGluZyAtIGJlZ2lubmluZykgKiAod2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCk7IC8vIGRyYXcgdGhlIGF4aXMKCiAgICAgIHZhciB4U2NhbGUgPSBkMy50aW1lLnNjYWxlKCkuZG9tYWluKFtiZWdpbm5pbmcsIGVuZGluZ10pLnJhbmdlKFttYXJnaW4ubGVmdCwgd2lkdGggLSBtYXJnaW4ucmlnaHRdKTsKICAgICAgdmFyIHhBeGlzID0gZDMuc3ZnLmF4aXMoKS5zY2FsZSh4U2NhbGUpLm9yaWVudChvcmllbnQpLnRpY2tGb3JtYXQodGlja0Zvcm1hdC5mb3JtYXQpLnRpY2tTaXplKHRpY2tGb3JtYXQudGlja1NpemUpOwoKICAgICAgaWYgKHRpY2tGb3JtYXQudGlja1ZhbHVlcyAhPSBudWxsKSB7CiAgICAgICAgeEF4aXMudGlja1ZhbHVlcyh0aWNrRm9ybWF0LnRpY2tWYWx1ZXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHhBeGlzLnRpY2tzKHRpY2tGb3JtYXQubnVtVGlja3MgfHwgdGlja0Zvcm1hdC50aWNrVGltZSwgdGlja0Zvcm1hdC50aWNrSW50ZXJ2YWwpOwogICAgICB9IC8vIGRyYXcgdGhlIGNoYXJ0CgoKICAgICAgZy5lYWNoKGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgY2hhcnREYXRhID0gZDsKICAgICAgICBkLmZvckVhY2goZnVuY3Rpb24gKGRhdHVtLCBpbmRleCkgewogICAgICAgICAgdmFyIGRhdGEgPSBkYXR1bS50aW1lczsKICAgICAgICAgIHZhciBoYXNMYWJlbCA9IHR5cGVvZiBkYXR1bS5sYWJlbCAhPSAidW5kZWZpbmVkIjsgLy8gaXNzdWUgd2FybmluZyBhYm91dCB1c2luZyBpZCBwZXIgZGF0YSBzZXQuIElkcyBzaG91bGQgYmUgaW5kaXZpZHVhbCB0byBkYXRhIGVsZW1lbnRzCgogICAgICAgICAgaWYgKHR5cGVvZiBkYXR1bS5pZCAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBjb25zb2xlLndhcm4oImQzVGltZWxpbmUgV2FybmluZzogSWRzIHBlciBkYXRhc2V0IGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgYSAnY2xhc3MnIGtleS4gSWRzIGFyZSBub3cgcGVyIGRhdGEgZWxlbWVudC4iKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYmFja2dyb3VuZENvbG9yKSB7CiAgICAgICAgICAgIGFwcGVuZEJhY2tncm91bmRCYXIoeUF4aXNNYXBwaW5nLCBpbmRleCwgZywgZGF0YSwgZGF0dW0pOwogICAgICAgICAgfQoKICAgICAgICAgIGcuc2VsZWN0QWxsKCJzdmciKS5kYXRhKGRhdGEpLmVudGVyKCkuYXBwZW5kKGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZDMubnMucHJlZml4LnN2ZywgImRpc3BsYXkiIGluIGQgPyBkLmRpc3BsYXkgOiBkaXNwbGF5KTsKICAgICAgICAgIH0pLmF0dHIoIngiLCBnZXRYUG9zKS5hdHRyKCJ5IiwgZ2V0U3RhY2tQb3NpdGlvbikuYXR0cigid2lkdGgiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICByZXR1cm4gKGQuZW5kaW5nX3RpbWUgLSBkLnN0YXJ0aW5nX3RpbWUpICogc2NhbGVGYWN0b3I7CiAgICAgICAgICB9KS5hdHRyKCJjeSIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRTdGFja1Bvc2l0aW9uKGQsIGkpICsgaXRlbUhlaWdodCAvIDI7CiAgICAgICAgICB9KS5hdHRyKCJjeCIsIGdldFhQb3MpLmF0dHIoInIiLCBpdGVtSGVpZ2h0IC8gMikuYXR0cigiaGVpZ2h0IiwgaXRlbUhlaWdodCkuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICB2YXIgZENvbG9yUHJvcE5hbWU7CiAgICAgICAgICAgIGlmIChkLmNvbG9yKSByZXR1cm4gZC5jb2xvcjsKCiAgICAgICAgICAgIGlmIChjb2xvclByb3BlcnR5TmFtZSkgewogICAgICAgICAgICAgIGRDb2xvclByb3BOYW1lID0gZFtjb2xvclByb3BlcnR5TmFtZV07CgogICAgICAgICAgICAgIGlmIChkQ29sb3JQcm9wTmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yQ3ljbGUoZENvbG9yUHJvcE5hbWUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JDeWNsZShkYXR1bVtjb2xvclByb3BlcnR5TmFtZV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNvbG9yQ3ljbGUoaW5kZXgpOwogICAgICAgICAgfSkub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIGhvdmVyKGQsIGluZGV4LCBkYXR1bSk7CiAgICAgICAgICB9KS5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgbW91c2VvdmVyKGQsIGksIGRhdHVtKTsKICAgICAgICAgIH0pLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIG1vdXNlb3V0KGQsIGksIGRhdHVtKTsKICAgICAgICAgIH0pLm9uKCJjbGljayIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIGNsaWNrKGQsIGluZGV4LCBkYXR1bSk7CiAgICAgICAgICB9KS5hdHRyKCJjbGFzcyIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHJldHVybiBkYXR1bS5jbGFzcyA/ICJ0aW1lbGluZVNlcmllc18iICsgZGF0dW0uY2xhc3MgOiAidGltZWxpbmVTZXJpZXNfIiArIGluZGV4OwogICAgICAgICAgfSkuYXR0cigiaWQiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICAvLyB1c2UgZGVwcmVjYXRlZCBpZCBmaWVsZAogICAgICAgICAgICBpZiAoZGF0dW0uaWQgJiYgIWQuaWQpIHsKICAgICAgICAgICAgICByZXR1cm4gJ3RpbWVsaW5lSXRlbV8nICsgZGF0dW0uaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBkLmlkID8gZC5pZCA6ICJ0aW1lbGluZUl0ZW1fIiArIGluZGV4ICsgIl8iICsgaTsKICAgICAgICAgIH0pOwogICAgICAgICAgZy5zZWxlY3RBbGwoInN2ZyIpLmRhdGEoZGF0YSkuZW50ZXIoKS5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgZ2V0WFRleHRQb3MpLmF0dHIoInkiLCBnZXRTdGFja1RleHRQb3NpdGlvbikudGV4dChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZC5sYWJlbDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChyb3dTZXBhcmF0b3JzQ29sb3IpIHsKICAgICAgICAgICAgdmFyIGxpbmVZQXhpcyA9IGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luIC8gMiArIG1hcmdpbi50b3AgKyAoaXRlbUhlaWdodCArIGl0ZW1NYXJnaW4pICogeUF4aXNNYXBwaW5nW2luZGV4XTsKICAgICAgICAgICAgZ1BhcmVudC5hcHBlbmQoInN2ZzpsaW5lIikuYXR0cigiY2xhc3MiLCAicm93LXNlcGFyYXRvciIpLmF0dHIoIngxIiwgMCArIG1hcmdpbi5sZWZ0KS5hdHRyKCJ4MiIsIHdpZHRoIC0gbWFyZ2luLnJpZ2h0KS5hdHRyKCJ5MSIsIGxpbmVZQXhpcykuYXR0cigieTIiLCBsaW5lWUF4aXMpLmF0dHIoInN0cm9rZS13aWR0aCIsIDEpLmF0dHIoInN0cm9rZSIsIHJvd1NlcGFyYXRvcnNDb2xvcik7CiAgICAgICAgICB9IC8vIGFkZCB0aGUgbGFiZWwKCgogICAgICAgICAgaWYgKGhhc0xhYmVsKSB7CiAgICAgICAgICAgIGFwcGVuZExhYmVsKGdQYXJlbnQsIHlBeGlzTWFwcGluZywgaW5kZXgsIGhhc0xhYmVsLCBkYXR1bSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBkYXR1bS5pY29uICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBnUGFyZW50LmFwcGVuZCgiaW1hZ2UiKS5hdHRyKCJjbGFzcyIsICJ0aW1lbGluZS1sYWJlbCIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIDAgKyAiLCIgKyAobWFyZ2luLnRvcCArIChpdGVtSGVpZ2h0ICsgaXRlbU1hcmdpbikgKiB5QXhpc01hcHBpbmdbaW5kZXhdKSArICIpIikuYXR0cigieGxpbms6aHJlZiIsIGRhdHVtLmljb24pLmF0dHIoIndpZHRoIiwgbWFyZ2luLmxlZnQpLmF0dHIoImhlaWdodCIsIGl0ZW1IZWlnaHQpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGdldFN0YWNrUG9zaXRpb24oZCwgaSkgewogICAgICAgICAgICBpZiAoc3RhY2tlZCkgewogICAgICAgICAgICAgIHJldHVybiBtYXJnaW4udG9wICsgKGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luKSAqIHlBeGlzTWFwcGluZ1tpbmRleF07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBtYXJnaW4udG9wOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGdldFN0YWNrVGV4dFBvc2l0aW9uKGQsIGkpIHsKICAgICAgICAgICAgaWYgKHN0YWNrZWQpIHsKICAgICAgICAgICAgICByZXR1cm4gbWFyZ2luLnRvcCArIChpdGVtSGVpZ2h0ICsgaXRlbU1hcmdpbikgKiB5QXhpc01hcHBpbmdbaW5kZXhdICsgaXRlbUhlaWdodCAqIDAuNzU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBtYXJnaW4udG9wICsgaXRlbUhlaWdodCAqIDAuNzU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB2YXIgYmVsb3dMYXN0SXRlbSA9IG1hcmdpbi50b3AgKyAoaXRlbUhlaWdodCArIGl0ZW1NYXJnaW4pICogbWF4U3RhY2s7CiAgICAgIHZhciBhYm92ZUZpcnN0SXRlbSA9IG1hcmdpbi50b3A7CiAgICAgIHZhciB0aW1lQXhpc1lQb3NpdGlvbiA9IHNob3dBeGlzVG9wID8gYWJvdmVGaXJzdEl0ZW0gOiBiZWxvd0xhc3RJdGVtOwoKICAgICAgaWYgKHNob3dUaW1lQXhpcykgewogICAgICAgIGFwcGVuZFRpbWVBeGlzKGcsIHhBeGlzLCB0aW1lQXhpc1lQb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmICh0aW1lQXhpc1RpY2spIHsKICAgICAgICBhcHBlbmRUaW1lQXhpc1RpY2soZywgeEF4aXMsIG1heFN0YWNrKTsKICAgICAgfQoKICAgICAgaWYgKHdpZHRoID4gZ1BhcmVudFNpemUud2lkdGgpIHsKICAgICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uIG1vdmUoKSB7CiAgICAgICAgICB2YXIgeCA9IE1hdGgubWluKDAsIE1hdGgubWF4KGdQYXJlbnRTaXplLndpZHRoIC0gd2lkdGgsIGQzLmV2ZW50LnRyYW5zbGF0ZVswXSkpOwogICAgICAgICAgem9vbS50cmFuc2xhdGUoW3gsIDBdKTsKICAgICAgICAgIGcuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgeCArICIsMCkiKTsKICAgICAgICAgIHNjcm9sbCh4ICogc2NhbGVGYWN0b3IsIHhTY2FsZSk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIHpvb20gPSBkMy5iZWhhdmlvci56b29tKCkueCh4U2NhbGUpLm9uKCJ6b29tIiwgbW92ZSk7CiAgICAgICAgZ1BhcmVudC5hdHRyKCJjbGFzcyIsICJzY3JvbGxhYmxlIikuY2FsbCh6b29tKTsKICAgICAgfQoKICAgICAgaWYgKHJvdGF0ZVRpY2tzKSB7CiAgICAgICAgZy5zZWxlY3RBbGwoIi50aWNrIHRleHQiKS5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuICJyb3RhdGUoIiArIHJvdGF0ZVRpY2tzICsgIil0cmFuc2xhdGUoIiArICh0aGlzLmdldEJCb3goKS53aWR0aCAvIDIgKyAxMCkgKyAiLCIgLy8gVE9ETzogY2hhbmdlIHRoaXMgMTAKICAgICAgICAgICsgdGhpcy5nZXRCQm94KCkuaGVpZ2h0IC8gMiArICIpIjsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdmFyIGdTaXplID0gZ1swXVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgc2V0SGVpZ2h0KCk7CgogICAgICBpZiAoc2hvd0JvcmRlckxpbmUpIHsKICAgICAgICBnLmVhY2goZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgIGQuZm9yRWFjaChmdW5jdGlvbiAoZGF0dW0pIHsKICAgICAgICAgICAgdmFyIHRpbWVzID0gZGF0dW0udGltZXM7CiAgICAgICAgICAgIHRpbWVzLmZvckVhY2goZnVuY3Rpb24gKHRpbWUpIHsKICAgICAgICAgICAgICBhcHBlbmRMaW5lKHhTY2FsZSh0aW1lLnN0YXJ0aW5nX3RpbWUpLCBzaG93Qm9yZGVyRm9ybWF0KTsKICAgICAgICAgICAgICBhcHBlbmRMaW5lKHhTY2FsZSh0aW1lLmVuZGluZ190aW1lKSwgc2hvd0JvcmRlckZvcm1hdCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChzaG93VG9kYXlMaW5lKSB7CiAgICAgICAgdmFyIHRvZGF5TGluZSA9IHhTY2FsZShuZXcgRGF0ZSgpKTsKICAgICAgICBhcHBlbmRMaW5lKHRvZGF5TGluZSwgc2hvd1RvZGF5Rm9ybWF0KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0WFBvcyhkLCBpKSB7CiAgICAgICAgcmV0dXJuIG1hcmdpbi5sZWZ0ICsgKGQuc3RhcnRpbmdfdGltZSAtIGJlZ2lubmluZykgKiBzY2FsZUZhY3RvcjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0WFRleHRQb3MoZCwgaSkgewogICAgICAgIHJldHVybiBtYXJnaW4ubGVmdCArIChkLnN0YXJ0aW5nX3RpbWUgLSBiZWdpbm5pbmcpICogc2NhbGVGYWN0b3IgKyA1OwogICAgICB9CgogICAgICBmdW5jdGlvbiBzZXRIZWlnaHQoKSB7CiAgICAgICAgaWYgKCFoZWlnaHQgJiYgIWdQYXJlbnRJdGVtLmF0dHIoImhlaWdodCIpKSB7CiAgICAgICAgICBpZiAoaXRlbUhlaWdodCkgewogICAgICAgICAgICAvLyBzZXQgaGVpZ2h0IGJhc2VkIG9mZiBvZiBpdGVtIGhlaWdodAogICAgICAgICAgICBoZWlnaHQgPSBnU2l6ZS5oZWlnaHQgKyBnU2l6ZS50b3AgLSBnUGFyZW50U2l6ZS50b3A7IC8vIHNldCBib3VuZGluZyByZWN0YW5nbGUgaGVpZ2h0CgogICAgICAgICAgICBkMy5zZWxlY3QoZ1BhcmVudFswXVswXSkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93ICJoZWlnaHQgb2YgdGhlIHRpbWVsaW5lIGlzIG5vdCBzZXQiOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIWhlaWdodCkgewogICAgICAgICAgICBoZWlnaHQgPSBnUGFyZW50SXRlbS5hdHRyKCJoZWlnaHQiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdQYXJlbnRJdGVtLmF0dHIoImhlaWdodCIsIGhlaWdodCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBzZXRXaWR0aCgpIHsKICAgICAgICBpZiAoIXdpZHRoICYmICFnUGFyZW50U2l6ZS53aWR0aCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgd2lkdGggPSBnUGFyZW50SXRlbS5hdHRyKCJ3aWR0aCIpOwoKICAgICAgICAgICAgaWYgKCF3aWR0aCkgewogICAgICAgICAgICAgIHRocm93ICJ3aWR0aCBvZiB0aGUgdGltZWxpbmUgaXMgbm90IHNldC4gQXMgb2YgRmlyZWZveCAyNywgdGltZWxpbmUoKS53aXRoKHgpIG5lZWRzIHRvIGJlIGV4cGxpY2l0bHkgc2V0IGluIG9yZGVyIHRvIHJlbmRlciI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoISh3aWR0aCAmJiBnUGFyZW50U2l6ZS53aWR0aCkpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHdpZHRoID0gZ1BhcmVudEl0ZW0uYXR0cigid2lkdGgiKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfQogICAgICAgIH0gLy8gaWYgYm90aCBhcmUgc2V0LCBkbyBub3RoaW5nCgogICAgICB9CgogICAgICBmdW5jdGlvbiBhcHBlbmRMaW5lKGxpbmVTY2FsZSwgbGluZUZvcm1hdCkgewogICAgICAgIGdQYXJlbnQuYXBwZW5kKCJzdmc6bGluZSIpLmF0dHIoIngxIiwgbGluZVNjYWxlKS5hdHRyKCJ5MSIsIGxpbmVGb3JtYXQubWFyZ2luVG9wKS5hdHRyKCJ4MiIsIGxpbmVTY2FsZSkuYXR0cigieTIiLCBoZWlnaHQgLSBsaW5lRm9ybWF0Lm1hcmdpbkJvdHRvbSkuc3R5bGUoInN0cm9rZSIsIGxpbmVGb3JtYXQuY29sb3IpIC8vInJnYig2LDEyMCwxNTUpIikKICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsIGxpbmVGb3JtYXQud2lkdGgpOwogICAgICB9CiAgICB9IC8vIFNFVFRJTkdTCgoKICAgIHRpbWVsaW5lLm1hcmdpbiA9IGZ1bmN0aW9uIChwKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG1hcmdpbjsKICAgICAgbWFyZ2luID0gcDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5vcmllbnQgPSBmdW5jdGlvbiAob3JpZW50YXRpb24pIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb3JpZW50OwogICAgICBvcmllbnQgPSBvcmllbnRhdGlvbjsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5pdGVtSGVpZ2h0ID0gZnVuY3Rpb24gKGgpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaXRlbUhlaWdodDsKICAgICAgaXRlbUhlaWdodCA9IGg7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuaXRlbU1hcmdpbiA9IGZ1bmN0aW9uIChoKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGl0ZW1NYXJnaW47CiAgICAgIGl0ZW1NYXJnaW4gPSBoOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLm5hdk1hcmdpbiA9IGZ1bmN0aW9uIChoKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG5hdk1hcmdpbjsKICAgICAgbmF2TWFyZ2luID0gaDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5oZWlnaHQgPSBmdW5jdGlvbiAoaCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBoZWlnaHQ7CiAgICAgIGhlaWdodCA9IGg7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUud2lkdGggPSBmdW5jdGlvbiAodykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB3aWR0aDsKICAgICAgd2lkdGggPSB3OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmRpc3BsYXkgPSBmdW5jdGlvbiAoZGlzcGxheVR5cGUpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoIHx8IERJU1BMQVlfVFlQRVMuaW5kZXhPZihkaXNwbGF5VHlwZSkgPT0gLTEpIHJldHVybiBkaXNwbGF5OwogICAgICBkaXNwbGF5ID0gZGlzcGxheVR5cGU7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUubGFiZWxGb3JtYXQgPSBmdW5jdGlvbiAoZikgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBsYWJlbEZ1bmN0aW9uOwogICAgICBsYWJlbEZ1bmN0aW9uID0gZjsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS50aWNrRm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aWNrRm9ybWF0OwogICAgICB0aWNrRm9ybWF0ID0gZm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmhvdmVyID0gZnVuY3Rpb24gKGhvdmVyRnVuYykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBob3ZlcjsKICAgICAgaG92ZXIgPSBob3ZlckZ1bmM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUubW91c2VvdmVyID0gZnVuY3Rpb24gKG1vdXNlb3ZlckZ1bmMpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbW91c2VvdmVyOwogICAgICBtb3VzZW92ZXIgPSBtb3VzZW92ZXJGdW5jOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLm1vdXNlb3V0ID0gZnVuY3Rpb24gKG1vdXNlb3V0RnVuYykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBtb3VzZW91dDsKICAgICAgbW91c2VvdXQgPSBtb3VzZW91dEZ1bmM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuY2xpY2sgPSBmdW5jdGlvbiAoY2xpY2tGdW5jKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNsaWNrOwogICAgICBjbGljayA9IGNsaWNrRnVuYzsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5zY3JvbGwgPSBmdW5jdGlvbiAoc2Nyb2xsRnVuYykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzY3JvbGw7CiAgICAgIHNjcm9sbCA9IHNjcm9sbEZ1bmM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuY29sb3JzID0gZnVuY3Rpb24gKGNvbG9yRm9ybWF0KSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNvbG9yQ3ljbGU7CiAgICAgIGNvbG9yQ3ljbGUgPSBjb2xvckZvcm1hdDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5iZWdpbm5pbmcgPSBmdW5jdGlvbiAoYikgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBiZWdpbm5pbmc7CiAgICAgIGJlZ2lubmluZyA9IGI7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuZW5kaW5nID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZW5kaW5nOwogICAgICBlbmRpbmcgPSBlOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmxhYmVsTWFyZ2luID0gZnVuY3Rpb24gKG0pIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbGFiZWxNYXJnaW47CiAgICAgIGxhYmVsTWFyZ2luID0gbTsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5yb3RhdGVUaWNrcyA9IGZ1bmN0aW9uIChkZWdyZWVzKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHJvdGF0ZVRpY2tzOwogICAgICByb3RhdGVUaWNrcyA9IGRlZ3JlZXM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuc3RhY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHN0YWNrZWQgPSAhc3RhY2tlZDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5yZWxhdGl2ZVRpbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRpbWVJc1JlbGF0aXZlID0gIXRpbWVJc1JlbGF0aXZlOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dCb3JkZXJMaW5lID0gZnVuY3Rpb24gKCkgewogICAgICBzaG93Qm9yZGVyTGluZSA9ICFzaG93Qm9yZGVyTGluZTsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5zaG93Qm9yZGVyRm9ybWF0ID0gZnVuY3Rpb24gKGJvcmRlckZvcm1hdCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzaG93Qm9yZGVyRm9ybWF0OwogICAgICBzaG93Qm9yZGVyRm9ybWF0ID0gYm9yZGVyRm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUb2RheSA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2hvd1RvZGF5TGluZSA9ICFzaG93VG9kYXlMaW5lOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUb2RheUZvcm1hdCA9IGZ1bmN0aW9uICh0b2RheUZvcm1hdCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzaG93VG9kYXlGb3JtYXQ7CiAgICAgIHNob3dUb2RheUZvcm1hdCA9IHRvZGF5Rm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmNvbG9yUHJvcGVydHkgPSBmdW5jdGlvbiAoY29sb3JQcm9wKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNvbG9yUHJvcGVydHlOYW1lOwogICAgICBjb2xvclByb3BlcnR5TmFtZSA9IGNvbG9yUHJvcDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5yb3dTZXBhcmF0b3JzID0gZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHJvd1NlcGFyYXRvcnNDb2xvcjsKICAgICAgcm93U2VwYXJhdG9yc0NvbG9yID0gY29sb3I7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuYmFja2dyb3VuZCA9IGZ1bmN0aW9uIChjb2xvcikgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBiYWNrZ3JvdW5kQ29sb3I7CiAgICAgIGJhY2tncm91bmRDb2xvciA9IGNvbG9yOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUaW1lQXhpcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2hvd1RpbWVBeGlzID0gIXNob3dUaW1lQXhpczsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5zaG93QXhpc1RvcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2hvd0F4aXNUb3AgPSAhc2hvd0F4aXNUb3A7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuc2hvd0F4aXNDYWxlbmRhclllYXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNob3dBeGlzQ2FsZW5kYXJZZWFyID0gIXNob3dBeGlzQ2FsZW5kYXJZZWFyOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUaW1lQXhpc1RpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRpbWVBeGlzVGljayA9ICF0aW1lQXhpc1RpY2s7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuZnVsbExlbmd0aEJhY2tncm91bmRzID0gZnVuY3Rpb24gKCkgewogICAgICBmdWxsTGVuZ3RoQmFja2dyb3VuZHMgPSAhZnVsbExlbmd0aEJhY2tncm91bmRzOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUaW1lQXhpc1RpY2tGb3JtYXQgPSBmdW5jdGlvbiAoZm9ybWF0KSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRpbWVBeGlzVGlja0Zvcm1hdDsKICAgICAgdGltZUF4aXNUaWNrRm9ybWF0ID0gZm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dBeGlzSGVhZGVyQmFja2dyb3VuZCA9IGZ1bmN0aW9uIChiZ0NvbG9yKSB7CiAgICAgIHNob3dBeGlzSGVhZGVyQmFja2dyb3VuZCA9ICFzaG93QXhpc0hlYWRlckJhY2tncm91bmQ7CgogICAgICBpZiAoYmdDb2xvcikgewogICAgICAgIGF4aXNCZ0NvbG9yID0gYmdDb2xvcjsKICAgICAgfQoKICAgICAgOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLm5hdmlnYXRlID0gZnVuY3Rpb24gKG5hdmlnYXRlQmFja3dhcmRzLCBuYXZpZ2F0ZUZvcndhcmRzKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFtuYXZpZ2F0ZUxlZnQsIG5hdmlnYXRlUmlnaHRdOwogICAgICBuYXZpZ2F0ZUxlZnQgPSBuYXZpZ2F0ZUJhY2t3YXJkczsKICAgICAgbmF2aWdhdGVSaWdodCA9IG5hdmlnYXRlRm9yd2FyZHM7CiAgICAgIHNob3dBeGlzTmF2ID0gIXNob3dBeGlzTmF2OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHJldHVybiB0aW1lbGluZTsKICB9Owp9KSgpOw=="},{"version":3,"sources":["/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline.js"],"names":["d3","timeline","DISPLAY_TYPES","hover","mouseover","mouseout","click","scroll","labelFunction","label","navigateLeft","navigateRight","orient","width","height","rowSeparatorsColor","backgroundColor","tickFormat","format","time","tickTime","hours","tickInterval","tickSize","tickValues","colorCycle","scale","category20","colorPropertyName","display","beginning","labelMargin","ending","margin","left","right","top","bottom","stacked","rotateTicks","timeIsRelative","fullLengthBackgrounds","itemHeight","itemMargin","navMargin","showTimeAxis","showAxisTop","showTodayLine","timeAxisTick","timeAxisTickFormat","stroke","spacing","showTodayFormat","marginTop","marginBottom","color","showBorderLine","showBorderFormat","showAxisHeaderBackground","showAxisNav","showAxisCalendarYear","axisBgColor","chartData","appendTimeAxis","g","xAxis","yPosition","appendAxisHeaderBackground","appendTimeAxisNav","axis","append","attr","call","appendTimeAxisCalendarYear","nav","calendarLabel","getFullYear","text","timelineBlocks","leftNavMargin","incrementValue","rightNavMargin","on","yAxis","insert","appendTimeAxisTick","maxStack","appendBackgroundBar","yAxisMapping","index","data","datum","greenbarYAxis","selectAll","enter","Function","appendLabel","gParent","hasLabel","fullItemHeight","rowsDown","id","d","i","gParentSize","getBoundingClientRect","gParentItem","select","minTime","maxTime","setWidth","each","forEach","times","j","originTime","starting_time","ending_time","Object","keys","indexOf","scaleFactor","xScale","domain","range","svg","ticks","numTicks","console","warn","document","createElementNS","ns","prefix","getXPos","getStackPosition","style","dColorPropName","class","getXTextPos","getStackTextPosition","lineYAxis","icon","belowLastItem","aboveFirstItem","timeAxisYPosition","move","x","Math","min","max","event","translate","zoom","behavior","getBBox","gSize","setHeight","appendLine","todayLine","Date","err","log","lineScale","lineFormat","p","arguments","length","orientation","h","w","displayType","labelFormat","f","hoverFunc","mouseoverFunc","mouseoutFunc","clickFunc","scrollFunc","colors","colorFormat","b","e","m","degrees","stack","relativeTime","borderFormat","showToday","todayFormat","colorProperty","colorProp","rowSeparators","background","showTimeAxisTick","showTimeAxisTickFormat","bgColor","navigate","navigateBackwards","navigateForwards"],"mappings":"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","sourcesContent":["// vim: ts=2 sw=2\n(function () {\n  d3.timeline = function() {\n    var DISPLAY_TYPES = [\"circle\", \"rect\"];\n\n    var hover = function () {},\n        mouseover = function () {},\n        mouseout = function () {},\n        click = function () {},\n        scroll = function () {},\n        labelFunction = function(label) { return label; },\n        navigateLeft = function () {},\n        navigateRight = function () {},\n        orient = \"bottom\",\n        width = null,\n        height = null,\n        rowSeparatorsColor = null,\n        backgroundColor = null,\n        tickFormat = { format: d3.time.format(\"%I %p\"),\n          tickTime: d3.time.hours,\n          tickInterval: 1,\n          tickSize: 6,\n          tickValues: null\n        },\n        colorCycle = d3.scale.category20(),\n        colorPropertyName = null,\n        display = \"rect\",\n        beginning = 0,\n        labelMargin = 0,\n        ending = 0,\n        margin = {left: 30, right:30, top: 30, bottom:30},\n        stacked = false,\n        rotateTicks = false,\n        timeIsRelative = false,\n        fullLengthBackgrounds = false,\n        itemHeight = 20,\n        itemMargin = 5,\n        navMargin = 60,\n        showTimeAxis = true,\n        showAxisTop = false,\n        showTodayLine = false,\n        timeAxisTick = false,\n        timeAxisTickFormat = {stroke: \"stroke-dasharray\", spacing: \"4 10\"},\n        showTodayFormat = {marginTop: 25, marginBottom: 0, width: 1, color: colorCycle},\n        showBorderLine = false,\n        showBorderFormat = {marginTop: 25, marginBottom: 0, width: 1, color: colorCycle},\n        showAxisHeaderBackground = false,\n        showAxisNav = false,\n        showAxisCalendarYear = false,\n        axisBgColor = \"white\",\n        chartData = {}\n      ;\n\n    var appendTimeAxis = function(g, xAxis, yPosition) {\n\n      if(showAxisHeaderBackground){ appendAxisHeaderBackground(g, 0, 0); }\n\n      if(showAxisNav){ appendTimeAxisNav(g) };\n\n      var axis = g.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + yPosition + \")\")\n        .call(xAxis);\n    };\n\n    var appendTimeAxisCalendarYear = function (nav) {\n      var calendarLabel = beginning.getFullYear();\n\n      if (beginning.getFullYear() != ending.getFullYear()) {\n        calendarLabel = beginning.getFullYear() + \"-\" + ending.getFullYear()\n      }\n\n      nav.append(\"text\")\n        .attr(\"transform\", \"translate(\" + 20 + \", 0)\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 14)\n        .attr(\"class\", \"calendarYear\")\n        .text(calendarLabel)\n      ;\n    };\n    var appendTimeAxisNav = function (g) {\n      var timelineBlocks = 6;\n      var leftNavMargin = (margin.left - navMargin);\n      var incrementValue = (width - margin.left)/timelineBlocks;\n      var rightNavMargin = (width - margin.right - incrementValue + navMargin);\n\n      var nav = g.append('g')\n          .attr(\"class\", \"axis\")\n          .attr(\"transform\", \"translate(0, 20)\")\n        ;\n\n      if(showAxisCalendarYear) { appendTimeAxisCalendarYear(nav) };\n\n      nav.append(\"text\")\n        .attr(\"transform\", \"translate(\" + leftNavMargin + \", 0)\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 14)\n        .attr(\"class\", \"chevron\")\n        .text(\"<\")\n        .on(\"click\", function () {\n          return navigateLeft(beginning, chartData);\n        })\n      ;\n\n      nav.append(\"text\")\n        .attr(\"transform\", \"translate(\" + rightNavMargin + \", 0)\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 14)\n        .attr(\"class\", \"chevron\")\n        .text(\">\")\n        .on(\"click\", function () {\n          return navigateRight(ending, chartData);\n        })\n      ;\n    };\n\n    var appendAxisHeaderBackground = function (g, xAxis, yAxis) {\n      g.insert(\"rect\")\n        .attr(\"class\", \"row-green-bar\")\n        .attr(\"x\", xAxis)\n        .attr(\"width\", width)\n        .attr(\"y\", yAxis)\n        .attr(\"height\", itemHeight)\n        .attr(\"fill\", axisBgColor);\n    };\n\n    var appendTimeAxisTick = function(g, xAxis, maxStack) {\n      g.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + (margin.top + (itemHeight + itemMargin) * maxStack) + \")\")\n        .attr(timeAxisTickFormat.stroke, timeAxisTickFormat.spacing)\n        .call(xAxis.tickFormat(\"\").tickSize(-(margin.top + (itemHeight + itemMargin) * (maxStack - 1) + 3), 0, 0));\n    };\n\n    var appendBackgroundBar = function (yAxisMapping, index, g, data, datum) {\n      var greenbarYAxis = ((itemHeight + itemMargin) * yAxisMapping[index]) + margin.top;\n      g.selectAll(\"svg\").data(data).enter()\n        .insert(\"rect\")\n        .attr(\"class\", \"row-green-bar\")\n        .attr(\"x\", fullLengthBackgrounds ? 0 : margin.left)\n        .attr(\"width\", fullLengthBackgrounds ? width : (width - margin.right - margin.left))\n        .attr(\"y\", greenbarYAxis)\n        .attr(\"height\", itemHeight)\n        .attr(\"fill\", backgroundColor instanceof Function ? backgroundColor(datum, index) : backgroundColor)\n      ;\n    };\n\n    var appendLabel = function (gParent, yAxisMapping, index, hasLabel, datum) {\n      var fullItemHeight    = itemHeight + itemMargin;\n      var rowsDown          = margin.top + (fullItemHeight/2) + fullItemHeight * (yAxisMapping[index] || 1);\n\n      gParent.append(\"text\")\n        .attr(\"class\", \"timeline-label\")\n        .attr(\"transform\", \"translate(\" + labelMargin + \",\" + rowsDown + \")\")\n        .text(hasLabel ? labelFunction(datum.label) : datum.id)\n        .on(\"click\", function (d, i) { click(d, index, datum); });\n    };\n\n    function timeline (gParent) {\n      var g = gParent.append(\"g\");\n      var gParentSize = gParent[0][0].getBoundingClientRect();\n\n      var gParentItem = d3.select(gParent[0][0]);\n\n      var yAxisMapping = {},\n        maxStack = 1,\n        minTime = 0,\n        maxTime = 0;\n\n      setWidth();\n\n      // check if the user wants relative time\n      // if so, substract the first timestamp from each subsequent timestamps\n      if(timeIsRelative){\n        g.each(function (d, i) {\n          d.forEach(function (datum, index) {\n            datum.times.forEach(function (time, j) {\n              if(index === 0 && j === 0){\n                originTime = time.starting_time;               //Store the timestamp that will serve as origin\n                time.starting_time = 0;                        //Set the origin\n                time.ending_time = time.ending_time - originTime;     //Store the relative time (millis)\n              }else{\n                time.starting_time = time.starting_time - originTime;\n                time.ending_time = time.ending_time - originTime;\n              }\n            });\n          });\n        });\n      }\n\n      // check how many stacks we're gonna need\n      // do this here so that we can draw the axis before the graph\n      if (stacked || ending === 0 || beginning === 0) {\n        g.each(function (d, i) {\n          d.forEach(function (datum, index) {\n\n            // create y mapping for stacked graph\n            if (stacked && Object.keys(yAxisMapping).indexOf(index) == -1) {\n              yAxisMapping[index] = maxStack;\n              maxStack++;\n            }\n\n            // figure out beginning and ending times if they are unspecified\n            datum.times.forEach(function (time, i) {\n              if(beginning === 0)\n                if (time.starting_time < minTime || (minTime === 0 && timeIsRelative === false))\n                  minTime = time.starting_time;\n              if(ending === 0)\n                if (time.ending_time > maxTime)\n                  maxTime = time.ending_time;\n            });\n          });\n        });\n\n        if (ending === 0) {\n          ending = maxTime;\n        }\n        if (beginning === 0) {\n          beginning = minTime;\n        }\n      }\n\n      var scaleFactor = (1/(ending - beginning)) * (width - margin.left - margin.right);\n\n      // draw the axis\n      var xScale = d3.time.scale()\n        .domain([beginning, ending])\n        .range([margin.left, width - margin.right]);\n\n      var xAxis = d3.svg.axis()\n        .scale(xScale)\n        .orient(orient)\n        .tickFormat(tickFormat.format)\n        .tickSize(tickFormat.tickSize);\n\n      if (tickFormat.tickValues != null) {\n        xAxis.tickValues(tickFormat.tickValues);\n      } else {\n        xAxis.ticks(tickFormat.numTicks || tickFormat.tickTime, tickFormat.tickInterval);\n      }\n\n      // draw the chart\n      g.each(function(d, i) {\n        chartData = d;\n        d.forEach( function(datum, index){\n          var data = datum.times;\n          var hasLabel = (typeof(datum.label) != \"undefined\");\n\n          // issue warning about using id per data set. Ids should be individual to data elements\n          if (typeof(datum.id) != \"undefined\") {\n            console.warn(\"d3Timeline Warning: Ids per dataset is deprecated in favor of a 'class' key. Ids are now per data element.\");\n          }\n\n          if (backgroundColor) { appendBackgroundBar(yAxisMapping, index, g, data, datum); }\n\n          g.selectAll(\"svg\").data(data).enter()\n            .append(function(d, i) {\n                return document.createElementNS(d3.ns.prefix.svg, \"display\" in d? d.display:display);\n            })\n            .attr(\"x\", getXPos)\n            .attr(\"y\", getStackPosition)\n            .attr(\"width\", function (d, i) {\n              return (d.ending_time - d.starting_time) * scaleFactor;\n            })\n            .attr(\"cy\", function(d, i) {\n                return getStackPosition(d, i) + itemHeight/2;\n            })\n            .attr(\"cx\", getXPos)\n            .attr(\"r\", itemHeight / 2)\n            .attr(\"height\", itemHeight)\n            .style(\"fill\", function(d, i){\n              var dColorPropName;\n              if (d.color) return d.color;\n              if( colorPropertyName ){\n                dColorPropName = d[colorPropertyName];\n                if ( dColorPropName ) {\n                  return colorCycle( dColorPropName );\n                } else {\n                  return colorCycle( datum[colorPropertyName] );\n                }\n              }\n              return colorCycle(index);\n            })\n            .on(\"mousemove\", function (d, i) {\n              hover(d, index, datum);\n            })\n            .on(\"mouseover\", function (d, i) {\n              mouseover(d, i, datum);\n            })\n            .on(\"mouseout\", function (d, i) {\n              mouseout(d, i, datum);\n            })\n            .on(\"click\", function (d, i) {\n              click(d, index, datum);\n            })\n            .attr(\"class\", function (d, i) {\n              return datum.class ? \"timelineSeries_\"+datum.class : \"timelineSeries_\"+index;\n            })\n            .attr(\"id\", function(d, i) {\n              // use deprecated id field\n              if (datum.id && !d.id) {\n                return 'timelineItem_'+datum.id;\n              }\n\n              return d.id ? d.id : \"timelineItem_\"+index+\"_\"+i;\n            })\n          ;\n\n          g.selectAll(\"svg\").data(data).enter()\n            .append(\"text\")\n            .attr(\"x\", getXTextPos)\n            .attr(\"y\", getStackTextPosition)\n            .text(function(d) {\n              return d.label;\n            })\n          ;\n\n          if (rowSeparatorsColor) {\n            var lineYAxis = ( itemHeight + itemMargin / 2 + margin.top + (itemHeight + itemMargin) * yAxisMapping[index]);\n            gParent.append(\"svg:line\")\n              .attr(\"class\", \"row-separator\")\n              .attr(\"x1\", 0 + margin.left)\n              .attr(\"x2\", width - margin.right)\n              .attr(\"y1\", lineYAxis)\n              .attr(\"y2\", lineYAxis)\n              .attr(\"stroke-width\", 1)\n              .attr(\"stroke\", rowSeparatorsColor);\n          }\n\n          // add the label\n          if (hasLabel) { appendLabel(gParent, yAxisMapping, index, hasLabel, datum); }\n\n          if (typeof(datum.icon) !== \"undefined\") {\n            gParent.append(\"image\")\n              .attr(\"class\", \"timeline-label\")\n              .attr(\"transform\", \"translate(\"+ 0 +\",\"+ (margin.top + (itemHeight + itemMargin) * yAxisMapping[index])+\")\")\n              .attr(\"xlink:href\", datum.icon)\n              .attr(\"width\", margin.left)\n              .attr(\"height\", itemHeight);\n          }\n\n          function getStackPosition(d, i) {\n            if (stacked) {\n              return margin.top + (itemHeight + itemMargin) * yAxisMapping[index];\n            }\n            return margin.top;\n          }\n          function getStackTextPosition(d, i) {\n            if (stacked) {\n              return margin.top + (itemHeight + itemMargin) * yAxisMapping[index] + itemHeight * 0.75;\n            }\n            return margin.top + itemHeight * 0.75;\n          }\n        });\n      });\n\n      var belowLastItem = (margin.top + (itemHeight + itemMargin) * maxStack);\n      var aboveFirstItem = margin.top;\n      var timeAxisYPosition = showAxisTop ? aboveFirstItem : belowLastItem;\n      if (showTimeAxis) { appendTimeAxis(g, xAxis, timeAxisYPosition); }\n      if (timeAxisTick) { appendTimeAxisTick(g, xAxis, maxStack); }\n\n      if (width > gParentSize.width) {\n        var move = function() {\n          var x = Math.min(0, Math.max(gParentSize.width - width, d3.event.translate[0]));\n          zoom.translate([x, 0]);\n          g.attr(\"transform\", \"translate(\" + x + \",0)\");\n          scroll(x*scaleFactor, xScale);\n        };\n\n        var zoom = d3.behavior.zoom().x(xScale).on(\"zoom\", move);\n\n        gParent\n          .attr(\"class\", \"scrollable\")\n          .call(zoom);\n      }\n\n      if (rotateTicks) {\n        g.selectAll(\".tick text\")\n          .attr(\"transform\", function(d) {\n            return \"rotate(\" + rotateTicks + \")translate(\"\n              + (this.getBBox().width / 2 + 10) + \",\" // TODO: change this 10\n              + this.getBBox().height / 2 + \")\";\n          });\n      }\n\n      var gSize = g[0][0].getBoundingClientRect();\n      setHeight();\n\n      if (showBorderLine) {\n        g.each(function (d, i) {\n          d.forEach(function (datum) {\n            var times = datum.times;\n            times.forEach(function (time) {\n              appendLine(xScale(time.starting_time), showBorderFormat);\n              appendLine(xScale(time.ending_time), showBorderFormat);\n            });\n          });\n        });\n      }\n\n      if (showTodayLine) {\n        var todayLine = xScale(new Date());\n        appendLine(todayLine, showTodayFormat);\n      }\n\n      function getXPos(d, i) {\n        return margin.left + (d.starting_time - beginning) * scaleFactor;\n      }\n\n      function getXTextPos(d, i) {\n        return margin.left + (d.starting_time - beginning) * scaleFactor + 5;\n      }\n\n      function setHeight() {\n        if (!height && !gParentItem.attr(\"height\")) {\n          if (itemHeight) {\n            // set height based off of item height\n            height = gSize.height + gSize.top - gParentSize.top;\n            // set bounding rectangle height\n            d3.select(gParent[0][0]).attr(\"height\", height);\n          } else {\n            throw \"height of the timeline is not set\";\n          }\n        } else {\n          if (!height) {\n            height = gParentItem.attr(\"height\");\n          } else {\n            gParentItem.attr(\"height\", height);\n          }\n        }\n      }\n\n      function setWidth() {\n        if (!width && !gParentSize.width) {\n          try {\n            width = gParentItem.attr(\"width\");\n            if (!width) {\n              throw \"width of the timeline is not set. As of Firefox 27, timeline().with(x) needs to be explicitly set in order to render\";\n            }\n          } catch (err) {\n            console.log( err );\n          }\n        } else if (!(width && gParentSize.width)) {\n          try {\n            width = gParentItem.attr(\"width\");\n          } catch (err) {\n            console.log( err );\n          }\n        }\n        // if both are set, do nothing\n      }\n\n      function appendLine(lineScale, lineFormat) {\n        gParent.append(\"svg:line\")\n          .attr(\"x1\", lineScale)\n          .attr(\"y1\", lineFormat.marginTop)\n          .attr(\"x2\", lineScale)\n          .attr(\"y2\", height - lineFormat.marginBottom)\n          .style(\"stroke\", lineFormat.color)//\"rgb(6,120,155)\")\n          .style(\"stroke-width\", lineFormat.width);\n      }\n\n    }\n\n    // SETTINGS\n\n    timeline.margin = function (p) {\n      if (!arguments.length) return margin;\n      margin = p;\n      return timeline;\n    };\n\n    timeline.orient = function (orientation) {\n      if (!arguments.length) return orient;\n      orient = orientation;\n      return timeline;\n    };\n\n    timeline.itemHeight = function (h) {\n      if (!arguments.length) return itemHeight;\n      itemHeight = h;\n      return timeline;\n    };\n\n    timeline.itemMargin = function (h) {\n      if (!arguments.length) return itemMargin;\n      itemMargin = h;\n      return timeline;\n    };\n\n    timeline.navMargin = function (h) {\n      if (!arguments.length) return navMargin;\n      navMargin = h;\n      return timeline;\n    };\n\n    timeline.height = function (h) {\n      if (!arguments.length) return height;\n      height = h;\n      return timeline;\n    };\n\n    timeline.width = function (w) {\n      if (!arguments.length) return width;\n      width = w;\n      return timeline;\n    };\n\n    timeline.display = function (displayType) {\n      if (!arguments.length || (DISPLAY_TYPES.indexOf(displayType) == -1)) return display;\n      display = displayType;\n      return timeline;\n    };\n\n    timeline.labelFormat = function(f) {\n      if (!arguments.length) return labelFunction;\n      labelFunction = f;\n      return timeline;\n    };\n\n    timeline.tickFormat = function (format) {\n      if (!arguments.length) return tickFormat;\n      tickFormat = format;\n      return timeline;\n    };\n\n    timeline.hover = function (hoverFunc) {\n      if (!arguments.length) return hover;\n      hover = hoverFunc;\n      return timeline;\n    };\n\n    timeline.mouseover = function (mouseoverFunc) {\n      if (!arguments.length) return mouseover;\n      mouseover = mouseoverFunc;\n      return timeline;\n    };\n\n    timeline.mouseout = function (mouseoutFunc) {\n      if (!arguments.length) return mouseout;\n      mouseout = mouseoutFunc;\n      return timeline;\n    };\n\n    timeline.click = function (clickFunc) {\n      if (!arguments.length) return click;\n      click = clickFunc;\n      return timeline;\n    };\n\n    timeline.scroll = function (scrollFunc) {\n      if (!arguments.length) return scroll;\n      scroll = scrollFunc;\n      return timeline;\n    };\n\n    timeline.colors = function (colorFormat) {\n      if (!arguments.length) return colorCycle;\n      colorCycle = colorFormat;\n      return timeline;\n    };\n\n    timeline.beginning = function (b) {\n      if (!arguments.length) return beginning;\n      beginning = b;\n      return timeline;\n    };\n\n    timeline.ending = function (e) {\n      if (!arguments.length) return ending;\n      ending = e;\n      return timeline;\n    };\n\n    timeline.labelMargin = function (m) {\n      if (!arguments.length) return labelMargin;\n      labelMargin = m;\n      return timeline;\n    };\n\n    timeline.rotateTicks = function (degrees) {\n      if (!arguments.length) return rotateTicks;\n      rotateTicks = degrees;\n      return timeline;\n    };\n\n    timeline.stack = function () {\n      stacked = !stacked;\n      return timeline;\n    };\n\n    timeline.relativeTime = function() {\n      timeIsRelative = !timeIsRelative;\n      return timeline;\n    };\n\n    timeline.showBorderLine = function () {\n      showBorderLine = !showBorderLine;\n      return timeline;\n    };\n\n    timeline.showBorderFormat = function(borderFormat) {\n      if (!arguments.length) return showBorderFormat;\n      showBorderFormat = borderFormat;\n      return timeline;\n    };\n\n    timeline.showToday = function () {\n      showTodayLine = !showTodayLine;\n      return timeline;\n    };\n\n    timeline.showTodayFormat = function(todayFormat) {\n      if (!arguments.length) return showTodayFormat;\n      showTodayFormat = todayFormat;\n      return timeline;\n    };\n\n    timeline.colorProperty = function(colorProp) {\n      if (!arguments.length) return colorPropertyName;\n      colorPropertyName = colorProp;\n      return timeline;\n    };\n\n    timeline.rowSeparators = function (color) {\n      if (!arguments.length) return rowSeparatorsColor;\n      rowSeparatorsColor = color;\n      return timeline;\n\n    };\n\n    timeline.background = function (color) {\n      if (!arguments.length) return backgroundColor;\n      backgroundColor = color;\n      return timeline;\n    };\n\n    timeline.showTimeAxis = function () {\n      showTimeAxis = !showTimeAxis;\n      return timeline;\n    };\n\n    timeline.showAxisTop = function () {\n      showAxisTop = !showAxisTop;\n      return timeline;\n    };\n\n    timeline.showAxisCalendarYear = function () {\n      showAxisCalendarYear = !showAxisCalendarYear;\n      return timeline;\n    };\n\n    timeline.showTimeAxisTick = function () {\n      timeAxisTick = !timeAxisTick;\n      return timeline;\n    };\n\n    timeline.fullLengthBackgrounds = function () {\n      fullLengthBackgrounds = !fullLengthBackgrounds;\n      return timeline;\n    };\n\n    timeline.showTimeAxisTickFormat = function(format) {\n      if (!arguments.length) return timeAxisTickFormat;\n      timeAxisTickFormat = format;\n      return timeline;\n    };\n\n    timeline.showAxisHeaderBackground = function(bgColor) {\n      showAxisHeaderBackground = !showAxisHeaderBackground;\n      if(bgColor) { (axisBgColor = bgColor) };\n      return timeline;\n    };\n\n    timeline.navigate = function (navigateBackwards, navigateForwards) {\n      if (!arguments.length) return [navigateLeft, navigateRight];\n      navigateLeft = navigateBackwards;\n      navigateRight = navigateForwards;\n      showAxisNav = !showAxisNav;\n      return timeline;\n    };\n\n    return timeline;\n  };\n})();"]}]}