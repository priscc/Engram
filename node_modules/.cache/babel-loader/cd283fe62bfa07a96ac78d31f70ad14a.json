{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline.js","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline.js","mtime":1590987960922},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vIHZpbTogdHM9MiBzdz0yCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IHsgc2NhbGVUaW1lLCBzY2FsZUxpbmVhciB9IGZyb20gJ2QzLXNjYWxlJzsKaW1wb3J0IHsgYXhpc0JvdHRvbSwgYXhpc0xlZnQgfSBmcm9tICdkMy1heGlzJzsKCihmdW5jdGlvbiAoKSB7CiAgZDMudGltZWxpbmUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgRElTUExBWV9UWVBFUyA9IFsiY2lyY2xlIiwgInJlY3QiXTsKCiAgICB2YXIgaG92ZXIgPSBmdW5jdGlvbiBob3ZlcigpIHt9LAogICAgICAgIG1vdXNlb3ZlciA9IGZ1bmN0aW9uIG1vdXNlb3ZlcigpIHt9LAogICAgICAgIG1vdXNlb3V0ID0gZnVuY3Rpb24gbW91c2VvdXQoKSB7fSwKICAgICAgICBjbGljayA9IGZ1bmN0aW9uIGNsaWNrKCkge30sCiAgICAgICAgc2Nyb2xsID0gZnVuY3Rpb24gc2Nyb2xsKCkge30sCiAgICAgICAgbGFiZWxGdW5jdGlvbiA9IGZ1bmN0aW9uIGxhYmVsRnVuY3Rpb24obGFiZWwpIHsKICAgICAgcmV0dXJuIGxhYmVsOwogICAgfSwKICAgICAgICBuYXZpZ2F0ZUxlZnQgPSBmdW5jdGlvbiBuYXZpZ2F0ZUxlZnQoKSB7fSwKICAgICAgICBuYXZpZ2F0ZVJpZ2h0ID0gZnVuY3Rpb24gbmF2aWdhdGVSaWdodCgpIHt9LAogICAgICAgIG9yaWVudCA9ICJib3R0b20iLAogICAgICAgIHdpZHRoID0gbnVsbCwKICAgICAgICBoZWlnaHQgPSBudWxsLAogICAgICAgIHJvd1NlcGFyYXRvcnNDb2xvciA9IG51bGwsCiAgICAgICAgYmFja2dyb3VuZENvbG9yID0gbnVsbCwKICAgICAgICB0aWNrRm9ybWF0ID0gewogICAgICBmb3JtYXQ6IGQzLnRpbWVGb3JtYXQoIiVJICVwIiksCiAgICAgIHRpY2tUaW1lOiBkMy50aW1lSG91cnMsCiAgICAgIHRpY2tJbnRlcnZhbDogMSwKICAgICAgdGlja1NpemU6IDYsCiAgICAgIHRpY2tWYWx1ZXM6IG51bGwKICAgIH0sCiAgICAgICAgY29sb3JDeWNsZSA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKSwKICAgICAgICBjb2xvclByb3BlcnR5TmFtZSA9IG51bGwsCiAgICAgICAgZGlzcGxheSA9ICJyZWN0IiwKICAgICAgICBiZWdpbm5pbmcgPSAwLAogICAgICAgIGxhYmVsTWFyZ2luID0gMCwKICAgICAgICBlbmRpbmcgPSAwLAogICAgICAgIG1hcmdpbiA9IHsKICAgICAgbGVmdDogMzAsCiAgICAgIHJpZ2h0OiAzMCwKICAgICAgdG9wOiAzMCwKICAgICAgYm90dG9tOiAzMAogICAgfSwKICAgICAgICBzdGFja2VkID0gZmFsc2UsCiAgICAgICAgcm90YXRlVGlja3MgPSBmYWxzZSwKICAgICAgICB0aW1lSXNSZWxhdGl2ZSA9IGZhbHNlLAogICAgICAgIGZ1bGxMZW5ndGhCYWNrZ3JvdW5kcyA9IGZhbHNlLAogICAgICAgIGl0ZW1IZWlnaHQgPSAyMCwKICAgICAgICBpdGVtTWFyZ2luID0gNSwKICAgICAgICBuYXZNYXJnaW4gPSA2MCwKICAgICAgICBzaG93VGltZUF4aXMgPSB0cnVlLAogICAgICAgIHNob3dBeGlzVG9wID0gZmFsc2UsCiAgICAgICAgc2hvd1RvZGF5TGluZSA9IGZhbHNlLAogICAgICAgIHRpbWVBeGlzVGljayA9IGZhbHNlLAogICAgICAgIHRpbWVBeGlzVGlja0Zvcm1hdCA9IHsKICAgICAgc3Ryb2tlOiAic3Ryb2tlLWRhc2hhcnJheSIsCiAgICAgIHNwYWNpbmc6ICI0IDEwIgogICAgfSwKICAgICAgICBzaG93VG9kYXlGb3JtYXQgPSB7CiAgICAgIG1hcmdpblRvcDogMjUsCiAgICAgIG1hcmdpbkJvdHRvbTogMCwKICAgICAgd2lkdGg6IDEsCiAgICAgIGNvbG9yOiBjb2xvckN5Y2xlCiAgICB9LAogICAgICAgIHNob3dCb3JkZXJMaW5lID0gZmFsc2UsCiAgICAgICAgc2hvd0JvcmRlckZvcm1hdCA9IHsKICAgICAgbWFyZ2luVG9wOiAyNSwKICAgICAgbWFyZ2luQm90dG9tOiAwLAogICAgICB3aWR0aDogMSwKICAgICAgY29sb3I6IGNvbG9yQ3ljbGUKICAgIH0sCiAgICAgICAgc2hvd0F4aXNIZWFkZXJCYWNrZ3JvdW5kID0gZmFsc2UsCiAgICAgICAgc2hvd0F4aXNOYXYgPSBmYWxzZSwKICAgICAgICBzaG93QXhpc0NhbGVuZGFyWWVhciA9IGZhbHNlLAogICAgICAgIGF4aXNCZ0NvbG9yID0gIndoaXRlIiwKICAgICAgICBjaGFydERhdGEgPSB7fTsKCiAgICB2YXIgYXBwZW5kVGltZUF4aXMgPSBmdW5jdGlvbiBhcHBlbmRUaW1lQXhpcyhnLCB4QXhpcywgeVBvc2l0aW9uKSB7CiAgICAgIGlmIChzaG93QXhpc0hlYWRlckJhY2tncm91bmQpIHsKICAgICAgICBhcHBlbmRBeGlzSGVhZGVyQmFja2dyb3VuZChnLCAwLCAwKTsKICAgICAgfQoKICAgICAgaWYgKHNob3dBeGlzTmF2KSB7CiAgICAgICAgYXBwZW5kVGltZUF4aXNOYXYoZyk7CiAgICAgIH0KCiAgICAgIDsKICAgICAgdmFyIGF4aXMgPSBnLmFwcGVuZCgiZyIpLmF0dHIoImNsYXNzIiwgImF4aXMiKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAwICsgIiwiICsgeVBvc2l0aW9uICsgIikiKS5jYWxsKHhBeGlzKTsKICAgIH07CgogICAgdmFyIGFwcGVuZFRpbWVBeGlzQ2FsZW5kYXJZZWFyID0gZnVuY3Rpb24gYXBwZW5kVGltZUF4aXNDYWxlbmRhclllYXIobmF2KSB7CiAgICAgIHZhciBjYWxlbmRhckxhYmVsID0gYmVnaW5uaW5nLmdldEZ1bGxZZWFyKCk7CgogICAgICBpZiAoYmVnaW5uaW5nLmdldEZ1bGxZZWFyKCkgIT0gZW5kaW5nLmdldEZ1bGxZZWFyKCkpIHsKICAgICAgICBjYWxlbmRhckxhYmVsID0gYmVnaW5uaW5nLmdldEZ1bGxZZWFyKCkgKyAiLSIgKyBlbmRpbmcuZ2V0RnVsbFllYXIoKTsKICAgICAgfQoKICAgICAgbmF2LmFwcGVuZCgidGV4dCIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIDIwICsgIiwgMCkiKS5hdHRyKCJ4IiwgMCkuYXR0cigieSIsIDE0KS5hdHRyKCJjbGFzcyIsICJjYWxlbmRhclllYXIiKS50ZXh0KGNhbGVuZGFyTGFiZWwpOwogICAgfTsKCiAgICB2YXIgYXBwZW5kVGltZUF4aXNOYXYgPSBmdW5jdGlvbiBhcHBlbmRUaW1lQXhpc05hdihnKSB7CiAgICAgIHZhciB0aW1lbGluZUJsb2NrcyA9IDY7CiAgICAgIHZhciBsZWZ0TmF2TWFyZ2luID0gbWFyZ2luLmxlZnQgLSBuYXZNYXJnaW47CiAgICAgIHZhciBpbmNyZW1lbnRWYWx1ZSA9ICh3aWR0aCAtIG1hcmdpbi5sZWZ0KSAvIHRpbWVsaW5lQmxvY2tzOwogICAgICB2YXIgcmlnaHROYXZNYXJnaW4gPSB3aWR0aCAtIG1hcmdpbi5yaWdodCAtIGluY3JlbWVudFZhbHVlICsgbmF2TWFyZ2luOwogICAgICB2YXIgbmF2ID0gZy5hcHBlbmQoJ2cnKS5hdHRyKCJjbGFzcyIsICJheGlzIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCAyMCkiKTsKCiAgICAgIGlmIChzaG93QXhpc0NhbGVuZGFyWWVhcikgewogICAgICAgIGFwcGVuZFRpbWVBeGlzQ2FsZW5kYXJZZWFyKG5hdik7CiAgICAgIH0KCiAgICAgIDsKICAgICAgbmF2LmFwcGVuZCgidGV4dCIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIGxlZnROYXZNYXJnaW4gKyAiLCAwKSIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgMTQpLmF0dHIoImNsYXNzIiwgImNoZXZyb24iKS50ZXh0KCI8Iikub24oImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuYXZpZ2F0ZUxlZnQoYmVnaW5uaW5nLCBjaGFydERhdGEpOwogICAgICB9KTsKICAgICAgbmF2LmFwcGVuZCgidGV4dCIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIHJpZ2h0TmF2TWFyZ2luICsgIiwgMCkiKS5hdHRyKCJ4IiwgMCkuYXR0cigieSIsIDE0KS5hdHRyKCJjbGFzcyIsICJjaGV2cm9uIikudGV4dCgiPiIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbmF2aWdhdGVSaWdodChlbmRpbmcsIGNoYXJ0RGF0YSk7CiAgICAgIH0pOwogICAgfTsKCiAgICB2YXIgYXBwZW5kQXhpc0hlYWRlckJhY2tncm91bmQgPSBmdW5jdGlvbiBhcHBlbmRBeGlzSGVhZGVyQmFja2dyb3VuZChnLCB4QXhpcywgeUF4aXMpIHsKICAgICAgZy5pbnNlcnQoInJlY3QiKS5hdHRyKCJjbGFzcyIsICJyb3ctZ3JlZW4tYmFyIikuYXR0cigieCIsIHhBeGlzKS5hdHRyKCJ3aWR0aCIsIHdpZHRoKS5hdHRyKCJ5IiwgeUF4aXMpLmF0dHIoImhlaWdodCIsIGl0ZW1IZWlnaHQpLmF0dHIoImZpbGwiLCBheGlzQmdDb2xvcik7CiAgICB9OwoKICAgIHZhciBhcHBlbmRUaW1lQXhpc1RpY2sgPSBmdW5jdGlvbiBhcHBlbmRUaW1lQXhpc1RpY2soZywgeEF4aXMsIG1heFN0YWNrKSB7CiAgICAgIGcuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCAiYXhpcyIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIDAgKyAiLCIgKyAobWFyZ2luLnRvcCArIChpdGVtSGVpZ2h0ICsgaXRlbU1hcmdpbikgKiBtYXhTdGFjaykgKyAiKSIpLmF0dHIodGltZUF4aXNUaWNrRm9ybWF0LnN0cm9rZSwgdGltZUF4aXNUaWNrRm9ybWF0LnNwYWNpbmcpLmNhbGwoeEF4aXMudGlja0Zvcm1hdCgiIikudGlja1NpemUoLShtYXJnaW4udG9wICsgKGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luKSAqIChtYXhTdGFjayAtIDEpICsgMyksIDAsIDApKTsKICAgIH07CgogICAgdmFyIGFwcGVuZEJhY2tncm91bmRCYXIgPSBmdW5jdGlvbiBhcHBlbmRCYWNrZ3JvdW5kQmFyKHlBeGlzTWFwcGluZywgaW5kZXgsIGcsIGRhdGEsIGRhdHVtKSB7CiAgICAgIHZhciBncmVlbmJhcllBeGlzID0gKGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luKSAqIHlBeGlzTWFwcGluZ1tpbmRleF0gKyBtYXJnaW4udG9wOwogICAgICBnLnNlbGVjdEFsbCgic3ZnIikuZGF0YShkYXRhKS5lbnRlcigpLmluc2VydCgicmVjdCIpLmF0dHIoImNsYXNzIiwgInJvdy1ncmVlbi1iYXIiKS5hdHRyKCJ4IiwgZnVsbExlbmd0aEJhY2tncm91bmRzID8gMCA6IG1hcmdpbi5sZWZ0KS5hdHRyKCJ3aWR0aCIsIGZ1bGxMZW5ndGhCYWNrZ3JvdW5kcyA/IHdpZHRoIDogd2lkdGggLSBtYXJnaW4ucmlnaHQgLSBtYXJnaW4ubGVmdCkuYXR0cigieSIsIGdyZWVuYmFyWUF4aXMpLmF0dHIoImhlaWdodCIsIGl0ZW1IZWlnaHQpLmF0dHIoImZpbGwiLCBiYWNrZ3JvdW5kQ29sb3IgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IGJhY2tncm91bmRDb2xvcihkYXR1bSwgaW5kZXgpIDogYmFja2dyb3VuZENvbG9yKTsKICAgIH07CgogICAgdmFyIGFwcGVuZExhYmVsID0gZnVuY3Rpb24gYXBwZW5kTGFiZWwoZ1BhcmVudCwgeUF4aXNNYXBwaW5nLCBpbmRleCwgaGFzTGFiZWwsIGRhdHVtKSB7CiAgICAgIHZhciBmdWxsSXRlbUhlaWdodCA9IGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luOwogICAgICB2YXIgcm93c0Rvd24gPSBtYXJnaW4udG9wICsgZnVsbEl0ZW1IZWlnaHQgLyAyICsgZnVsbEl0ZW1IZWlnaHQgKiAoeUF4aXNNYXBwaW5nW2luZGV4XSB8fCAxKTsKICAgICAgZ1BhcmVudC5hcHBlbmQoInRleHQiKS5hdHRyKCJjbGFzcyIsICJ0aW1lbGluZS1sYWJlbCIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIGxhYmVsTWFyZ2luICsgIiwiICsgcm93c0Rvd24gKyAiKSIpLnRleHQoaGFzTGFiZWwgPyBsYWJlbEZ1bmN0aW9uKGRhdHVtLmxhYmVsKSA6IGRhdHVtLmlkKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgIGNsaWNrKGQsIGluZGV4LCBkYXR1bSk7CiAgICAgIH0pOwogICAgfTsKCiAgICBmdW5jdGlvbiB0aW1lbGluZShnUGFyZW50KSB7CiAgICAgIHZhciBnUCA9IGdQYXJlbnQuX2dyb3Vwc1swXVswXTsKICAgICAgdmFyIGcgPSBnUGFyZW50LmFwcGVuZCgiZyIpOwogICAgICB2YXIgZ1BhcmVudFNpemUgPSBnUC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdmFyIGdQYXJlbnRJdGVtID0gZDMuc2VsZWN0KGdQKTsKICAgICAgdmFyIHlBeGlzTWFwcGluZyA9IHt9LAogICAgICAgICAgbWF4U3RhY2sgPSAxLAogICAgICAgICAgbWluVGltZSA9IDAsCiAgICAgICAgICBtYXhUaW1lID0gMDsKICAgICAgc2V0V2lkdGgoKTsgLy8gY2hlY2sgaWYgdGhlIHVzZXIgd2FudHMgcmVsYXRpdmUgdGltZQogICAgICAvLyBpZiBzbywgc3Vic3RyYWN0IHRoZSBmaXJzdCB0aW1lc3RhbXAgZnJvbSBlYWNoIHN1YnNlcXVlbnQgdGltZXN0YW1wcwoKICAgICAgaWYgKHRpbWVJc1JlbGF0aXZlKSB7CiAgICAgICAgZy5lYWNoKGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICBkLmZvckVhY2goZnVuY3Rpb24gKGRhdHVtLCBpbmRleCkgewogICAgICAgICAgICBkYXR1bS50aW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh0aW1lLCBqKSB7CiAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwICYmIGogPT09IDApIHsKICAgICAgICAgICAgICAgIG9yaWdpblRpbWUgPSB0aW1lLnN0YXJ0aW5nX3RpbWU7IC8vU3RvcmUgdGhlIHRpbWVzdGFtcCB0aGF0IHdpbGwgc2VydmUgYXMgb3JpZ2luCgogICAgICAgICAgICAgICAgdGltZS5zdGFydGluZ190aW1lID0gMDsgLy9TZXQgdGhlIG9yaWdpbgoKICAgICAgICAgICAgICAgIHRpbWUuZW5kaW5nX3RpbWUgPSB0aW1lLmVuZGluZ190aW1lIC0gb3JpZ2luVGltZTsgLy9TdG9yZSB0aGUgcmVsYXRpdmUgdGltZSAobWlsbGlzKQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aW1lLnN0YXJ0aW5nX3RpbWUgPSB0aW1lLnN0YXJ0aW5nX3RpbWUgLSBvcmlnaW5UaW1lOwogICAgICAgICAgICAgICAgdGltZS5lbmRpbmdfdGltZSA9IHRpbWUuZW5kaW5nX3RpbWUgLSBvcmlnaW5UaW1lOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSAvLyBjaGVjayBob3cgbWFueSBzdGFja3Mgd2UncmUgZ29ubmEgbmVlZAogICAgICAvLyBkbyB0aGlzIGhlcmUgc28gdGhhdCB3ZSBjYW4gZHJhdyB0aGUgYXhpcyBiZWZvcmUgdGhlIGdyYXBoCgoKICAgICAgaWYgKHN0YWNrZWQgfHwgZW5kaW5nID09PSAwIHx8IGJlZ2lubmluZyA9PT0gMCkgewogICAgICAgIGcuZWFjaChmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgZC5mb3JFYWNoKGZ1bmN0aW9uIChkYXR1bSwgaW5kZXgpIHsKICAgICAgICAgICAgLy8gY3JlYXRlIHkgbWFwcGluZyBmb3Igc3RhY2tlZCBncmFwaAogICAgICAgICAgICBpZiAoc3RhY2tlZCAmJiBPYmplY3Qua2V5cyh5QXhpc01hcHBpbmcpLmluZGV4T2YoaW5kZXgpID09IC0xKSB7CiAgICAgICAgICAgICAgeUF4aXNNYXBwaW5nW2luZGV4XSA9IG1heFN0YWNrOwogICAgICAgICAgICAgIG1heFN0YWNrKys7CiAgICAgICAgICAgIH0gLy8gZmlndXJlIG91dCBiZWdpbm5pbmcgYW5kIGVuZGluZyB0aW1lcyBpZiB0aGV5IGFyZSB1bnNwZWNpZmllZAoKCiAgICAgICAgICAgIGRhdHVtLnRpbWVzLmZvckVhY2goZnVuY3Rpb24gKHRpbWUsIGkpIHsKICAgICAgICAgICAgICBpZiAoYmVnaW5uaW5nID09PSAwKSBpZiAodGltZS5zdGFydGluZ190aW1lIDwgbWluVGltZSB8fCBtaW5UaW1lID09PSAwICYmIHRpbWVJc1JlbGF0aXZlID09PSBmYWxzZSkgbWluVGltZSA9IHRpbWUuc3RhcnRpbmdfdGltZTsKICAgICAgICAgICAgICBpZiAoZW5kaW5nID09PSAwKSBpZiAodGltZS5lbmRpbmdfdGltZSA+IG1heFRpbWUpIG1heFRpbWUgPSB0aW1lLmVuZGluZ190aW1lOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoZW5kaW5nID09PSAwKSB7CiAgICAgICAgICBlbmRpbmcgPSBtYXhUaW1lOwogICAgICAgIH0KCiAgICAgICAgaWYgKGJlZ2lubmluZyA9PT0gMCkgewogICAgICAgICAgYmVnaW5uaW5nID0gbWluVGltZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBzY2FsZUZhY3RvciA9IDEgLyAoZW5kaW5nIC0gYmVnaW5uaW5nKSAqICh3aWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0KTsgLy8gZHJhdyB0aGUgYXhpcwoKICAgICAgdmFyIHhTY2FsZSA9IGQzLnNjYWxlVGltZSgpLmRvbWFpbihbYmVnaW5uaW5nLCBlbmRpbmddKS5yYW5nZShbbWFyZ2luLmxlZnQsIHdpZHRoIC0gbWFyZ2luLnJpZ2h0XSk7CiAgICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oKS5zY2FsZSh4U2NhbGUpLnRpY2tGb3JtYXQodGlja0Zvcm1hdC5mb3JtYXQpLnRpY2tTaXplKHRpY2tGb3JtYXQudGlja1NpemUpOwoKICAgICAgaWYgKHRpY2tGb3JtYXQudGlja1ZhbHVlcyAhPSBudWxsKSB7CiAgICAgICAgeEF4aXMudGlja1ZhbHVlcyh0aWNrRm9ybWF0LnRpY2tWYWx1ZXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHhBeGlzLnRpY2tzKHRpY2tGb3JtYXQubnVtVGlja3MgfHwgdGlja0Zvcm1hdC50aWNrVGltZSwgdGlja0Zvcm1hdC50aWNrSW50ZXJ2YWwpOwogICAgICB9IC8vIGRyYXcgdGhlIGNoYXJ0CgoKICAgICAgZy5lYWNoKGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgY2hhcnREYXRhID0gZDsKICAgICAgICBkLmZvckVhY2goZnVuY3Rpb24gKGRhdHVtLCBpbmRleCkgewogICAgICAgICAgdmFyIGRhdGEgPSBkYXR1bS50aW1lczsKICAgICAgICAgIHZhciBoYXNMYWJlbCA9IHR5cGVvZiBkYXR1bS5sYWJlbCAhPSAidW5kZWZpbmVkIjsgLy8gaXNzdWUgd2FybmluZyBhYm91dCB1c2luZyBpZCBwZXIgZGF0YSBzZXQuIElkcyBzaG91bGQgYmUgaW5kaXZpZHVhbCB0byBkYXRhIGVsZW1lbnRzCgogICAgICAgICAgaWYgKHR5cGVvZiBkYXR1bS5pZCAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBjb25zb2xlLndhcm4oImQzVGltZWxpbmUgV2FybmluZzogSWRzIHBlciBkYXRhc2V0IGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgYSAnY2xhc3MnIGtleS4gSWRzIGFyZSBub3cgcGVyIGRhdGEgZWxlbWVudC4iKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYmFja2dyb3VuZENvbG9yKSB7CiAgICAgICAgICAgIGFwcGVuZEJhY2tncm91bmRCYXIoeUF4aXNNYXBwaW5nLCBpbmRleCwgZywgZGF0YSwgZGF0dW0pOwogICAgICAgICAgfQoKICAgICAgICAgIGcuc2VsZWN0QWxsKCJzdmciKS5kYXRhKGRhdGEpLmVudGVyKCkuYXBwZW5kKGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZDMubnMucHJlZml4LnN2ZywgImRpc3BsYXkiIGluIGQgPyBkLmRpc3BsYXkgOiBkaXNwbGF5KTsKICAgICAgICAgIH0pLmF0dHIoIngiLCBnZXRYUG9zKS5hdHRyKCJ5IiwgZ2V0U3RhY2tQb3NpdGlvbikuYXR0cigid2lkdGgiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICByZXR1cm4gKGQuZW5kaW5nX3RpbWUgLSBkLnN0YXJ0aW5nX3RpbWUpICogc2NhbGVGYWN0b3I7CiAgICAgICAgICB9KS5hdHRyKCJjeSIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRTdGFja1Bvc2l0aW9uKGQsIGkpICsgaXRlbUhlaWdodCAvIDI7CiAgICAgICAgICB9KS5hdHRyKCJjeCIsIGdldFhQb3MpLmF0dHIoInIiLCBpdGVtSGVpZ2h0IC8gMikuYXR0cigiaGVpZ2h0IiwgaXRlbUhlaWdodCkuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICB2YXIgZENvbG9yUHJvcE5hbWU7CiAgICAgICAgICAgIGlmIChkLmNvbG9yKSByZXR1cm4gZC5jb2xvcjsKCiAgICAgICAgICAgIGlmIChjb2xvclByb3BlcnR5TmFtZSkgewogICAgICAgICAgICAgIGRDb2xvclByb3BOYW1lID0gZFtjb2xvclByb3BlcnR5TmFtZV07CgogICAgICAgICAgICAgIGlmIChkQ29sb3JQcm9wTmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yQ3ljbGUoZENvbG9yUHJvcE5hbWUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JDeWNsZShkYXR1bVtjb2xvclByb3BlcnR5TmFtZV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGNvbG9yQ3ljbGUoaW5kZXgpOwogICAgICAgICAgfSkub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIGhvdmVyKGQsIGluZGV4LCBkYXR1bSk7CiAgICAgICAgICB9KS5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgICAgbW91c2VvdmVyKGQsIGksIGRhdHVtKTsKICAgICAgICAgIH0pLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIG1vdXNlb3V0KGQsIGksIGRhdHVtKTsKICAgICAgICAgIH0pLm9uKCJjbGljayIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIGNsaWNrKGQsIGluZGV4LCBkYXR1bSk7CiAgICAgICAgICB9KS5hdHRyKCJjbGFzcyIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHJldHVybiBkYXR1bS5jbGFzcyA/ICJ0aW1lbGluZVNlcmllc18iICsgZGF0dW0uY2xhc3MgOiAidGltZWxpbmVTZXJpZXNfIiArIGluZGV4OwogICAgICAgICAgfSkuYXR0cigiaWQiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICAvLyB1c2UgZGVwcmVjYXRlZCBpZCBmaWVsZAogICAgICAgICAgICBpZiAoZGF0dW0uaWQgJiYgIWQuaWQpIHsKICAgICAgICAgICAgICByZXR1cm4gJ3RpbWVsaW5lSXRlbV8nICsgZGF0dW0uaWQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBkLmlkID8gZC5pZCA6ICJ0aW1lbGluZUl0ZW1fIiArIGluZGV4ICsgIl8iICsgaTsKICAgICAgICAgIH0pOwogICAgICAgICAgZy5zZWxlY3RBbGwoInN2ZyIpLmRhdGEoZGF0YSkuZW50ZXIoKS5hcHBlbmQoInRleHQiKS5hdHRyKCJ4IiwgZ2V0WFRleHRQb3MpLmF0dHIoInkiLCBnZXRTdGFja1RleHRQb3NpdGlvbikudGV4dChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZC5sYWJlbDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChyb3dTZXBhcmF0b3JzQ29sb3IpIHsKICAgICAgICAgICAgdmFyIGxpbmVZQXhpcyA9IGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luIC8gMiArIG1hcmdpbi50b3AgKyAoaXRlbUhlaWdodCArIGl0ZW1NYXJnaW4pICogeUF4aXNNYXBwaW5nW2luZGV4XTsKICAgICAgICAgICAgZ1BhcmVudC5hcHBlbmQoInN2ZzpsaW5lIikuYXR0cigiY2xhc3MiLCAicm93LXNlcGFyYXRvciIpLmF0dHIoIngxIiwgMCArIG1hcmdpbi5sZWZ0KS5hdHRyKCJ4MiIsIHdpZHRoIC0gbWFyZ2luLnJpZ2h0KS5hdHRyKCJ5MSIsIGxpbmVZQXhpcykuYXR0cigieTIiLCBsaW5lWUF4aXMpLmF0dHIoInN0cm9rZS13aWR0aCIsIDEpLmF0dHIoInN0cm9rZSIsIHJvd1NlcGFyYXRvcnNDb2xvcik7CiAgICAgICAgICB9IC8vIGFkZCB0aGUgbGFiZWwKCgogICAgICAgICAgaWYgKGhhc0xhYmVsKSB7CiAgICAgICAgICAgIGFwcGVuZExhYmVsKGdQYXJlbnQsIHlBeGlzTWFwcGluZywgaW5kZXgsIGhhc0xhYmVsLCBkYXR1bSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBkYXR1bS5pY29uICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBnUGFyZW50LmFwcGVuZCgiaW1hZ2UiKS5hdHRyKCJjbGFzcyIsICJ0aW1lbGluZS1sYWJlbCIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIDAgKyAiLCIgKyAobWFyZ2luLnRvcCArIChpdGVtSGVpZ2h0ICsgaXRlbU1hcmdpbikgKiB5QXhpc01hcHBpbmdbaW5kZXhdKSArICIpIikuYXR0cigieGxpbms6aHJlZiIsIGRhdHVtLmljb24pLmF0dHIoIndpZHRoIiwgbWFyZ2luLmxlZnQpLmF0dHIoImhlaWdodCIsIGl0ZW1IZWlnaHQpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGdldFN0YWNrUG9zaXRpb24oZCwgaSkgewogICAgICAgICAgICBpZiAoc3RhY2tlZCkgewogICAgICAgICAgICAgIHJldHVybiBtYXJnaW4udG9wICsgKGl0ZW1IZWlnaHQgKyBpdGVtTWFyZ2luKSAqIHlBeGlzTWFwcGluZ1tpbmRleF07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBtYXJnaW4udG9wOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGdldFN0YWNrVGV4dFBvc2l0aW9uKGQsIGkpIHsKICAgICAgICAgICAgaWYgKHN0YWNrZWQpIHsKICAgICAgICAgICAgICByZXR1cm4gbWFyZ2luLnRvcCArIChpdGVtSGVpZ2h0ICsgaXRlbU1hcmdpbikgKiB5QXhpc01hcHBpbmdbaW5kZXhdICsgaXRlbUhlaWdodCAqIDAuNzU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBtYXJnaW4udG9wICsgaXRlbUhlaWdodCAqIDAuNzU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB2YXIgYmVsb3dMYXN0SXRlbSA9IG1hcmdpbi50b3AgKyAoaXRlbUhlaWdodCArIGl0ZW1NYXJnaW4pICogbWF4U3RhY2s7CiAgICAgIHZhciBhYm92ZUZpcnN0SXRlbSA9IG1hcmdpbi50b3A7CiAgICAgIHZhciB0aW1lQXhpc1lQb3NpdGlvbiA9IHNob3dBeGlzVG9wID8gYWJvdmVGaXJzdEl0ZW0gOiBiZWxvd0xhc3RJdGVtOwoKICAgICAgaWYgKHNob3dUaW1lQXhpcykgewogICAgICAgIGFwcGVuZFRpbWVBeGlzKGcsIHhBeGlzLCB0aW1lQXhpc1lQb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmICh0aW1lQXhpc1RpY2spIHsKICAgICAgICBhcHBlbmRUaW1lQXhpc1RpY2soZywgeEF4aXMsIG1heFN0YWNrKTsKICAgICAgfQoKICAgICAgaWYgKHdpZHRoID4gZ1BhcmVudFNpemUud2lkdGgpIHsKICAgICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uIG1vdmUoKSB7CiAgICAgICAgICB2YXIgeCA9IE1hdGgubWluKDAsIE1hdGgubWF4KGdQYXJlbnRTaXplLndpZHRoIC0gd2lkdGgsIGQzLmV2ZW50LnRyYW5zbGF0ZVswXSkpOwogICAgICAgICAgem9vbS50cmFuc2xhdGUoW3gsIDBdKTsKICAgICAgICAgIGcuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgeCArICIsMCkiKTsKICAgICAgICAgIHNjcm9sbCh4ICogc2NhbGVGYWN0b3IsIHhTY2FsZSk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIHpvb20gPSBkMy5iZWhhdmlvci56b29tKCkueCh4U2NhbGUpLm9uKCJ6b29tIiwgbW92ZSk7CiAgICAgICAgZ1BhcmVudC5hdHRyKCJjbGFzcyIsICJzY3JvbGxhYmxlIikuY2FsbCh6b29tKTsKICAgICAgfQoKICAgICAgaWYgKHJvdGF0ZVRpY2tzKSB7CiAgICAgICAgZy5zZWxlY3RBbGwoIi50aWNrIHRleHQiKS5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuICJyb3RhdGUoIiArIHJvdGF0ZVRpY2tzICsgIil0cmFuc2xhdGUoIiArICh0aGlzLmdldEJCb3goKS53aWR0aCAvIDIgKyAxMCkgKyAiLCIgLy8gVE9ETzogY2hhbmdlIHRoaXMgMTAKICAgICAgICAgICsgdGhpcy5nZXRCQm94KCkuaGVpZ2h0IC8gMiArICIpIjsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdmFyIGdTaXplID0gZ1swXVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgc2V0SGVpZ2h0KCk7CgogICAgICBpZiAoc2hvd0JvcmRlckxpbmUpIHsKICAgICAgICBnLmVhY2goZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgICAgIGQuZm9yRWFjaChmdW5jdGlvbiAoZGF0dW0pIHsKICAgICAgICAgICAgdmFyIHRpbWVzID0gZGF0dW0udGltZXM7CiAgICAgICAgICAgIHRpbWVzLmZvckVhY2goZnVuY3Rpb24gKHRpbWUpIHsKICAgICAgICAgICAgICBhcHBlbmRMaW5lKHhTY2FsZSh0aW1lLnN0YXJ0aW5nX3RpbWUpLCBzaG93Qm9yZGVyRm9ybWF0KTsKICAgICAgICAgICAgICBhcHBlbmRMaW5lKHhTY2FsZSh0aW1lLmVuZGluZ190aW1lKSwgc2hvd0JvcmRlckZvcm1hdCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChzaG93VG9kYXlMaW5lKSB7CiAgICAgICAgdmFyIHRvZGF5TGluZSA9IHhTY2FsZShuZXcgRGF0ZSgpKTsKICAgICAgICBhcHBlbmRMaW5lKHRvZGF5TGluZSwgc2hvd1RvZGF5Rm9ybWF0KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0WFBvcyhkLCBpKSB7CiAgICAgICAgcmV0dXJuIG1hcmdpbi5sZWZ0ICsgKGQuc3RhcnRpbmdfdGltZSAtIGJlZ2lubmluZykgKiBzY2FsZUZhY3RvcjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0WFRleHRQb3MoZCwgaSkgewogICAgICAgIHJldHVybiBtYXJnaW4ubGVmdCArIChkLnN0YXJ0aW5nX3RpbWUgLSBiZWdpbm5pbmcpICogc2NhbGVGYWN0b3IgKyA1OwogICAgICB9CgogICAgICBmdW5jdGlvbiBzZXRIZWlnaHQoKSB7CiAgICAgICAgaWYgKCFoZWlnaHQgJiYgIWdQYXJlbnRJdGVtLmF0dHIoImhlaWdodCIpKSB7CiAgICAgICAgICBpZiAoaXRlbUhlaWdodCkgewogICAgICAgICAgICAvLyBzZXQgaGVpZ2h0IGJhc2VkIG9mZiBvZiBpdGVtIGhlaWdodAogICAgICAgICAgICBoZWlnaHQgPSBnU2l6ZS5oZWlnaHQgKyBnU2l6ZS50b3AgLSBnUGFyZW50U2l6ZS50b3A7IC8vIHNldCBib3VuZGluZyByZWN0YW5nbGUgaGVpZ2h0CgogICAgICAgICAgICBkMy5zZWxlY3QoZ1BhcmVudFswXVswXSkuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93ICJoZWlnaHQgb2YgdGhlIHRpbWVsaW5lIGlzIG5vdCBzZXQiOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIWhlaWdodCkgewogICAgICAgICAgICBoZWlnaHQgPSBnUGFyZW50SXRlbS5hdHRyKCJoZWlnaHQiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdQYXJlbnRJdGVtLmF0dHIoImhlaWdodCIsIGhlaWdodCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBzZXRXaWR0aCgpIHsKICAgICAgICBpZiAoIXdpZHRoICYmICFnUGFyZW50U2l6ZS53aWR0aCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgd2lkdGggPSBnUGFyZW50SXRlbS5hdHRyKCJ3aWR0aCIpOwoKICAgICAgICAgICAgaWYgKCF3aWR0aCkgewogICAgICAgICAgICAgIHRocm93ICJ3aWR0aCBvZiB0aGUgdGltZWxpbmUgaXMgbm90IHNldC4gQXMgb2YgRmlyZWZveCAyNywgdGltZWxpbmUoKS53aXRoKHgpIG5lZWRzIHRvIGJlIGV4cGxpY2l0bHkgc2V0IGluIG9yZGVyIHRvIHJlbmRlciI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoISh3aWR0aCAmJiBnUGFyZW50U2l6ZS53aWR0aCkpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHdpZHRoID0gZ1BhcmVudEl0ZW0uYXR0cigid2lkdGgiKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfQogICAgICAgIH0gLy8gaWYgYm90aCBhcmUgc2V0LCBkbyBub3RoaW5nCgogICAgICB9CgogICAgICBmdW5jdGlvbiBhcHBlbmRMaW5lKGxpbmVTY2FsZSwgbGluZUZvcm1hdCkgewogICAgICAgIGdQYXJlbnQuYXBwZW5kKCJzdmc6bGluZSIpLmF0dHIoIngxIiwgbGluZVNjYWxlKS5hdHRyKCJ5MSIsIGxpbmVGb3JtYXQubWFyZ2luVG9wKS5hdHRyKCJ4MiIsIGxpbmVTY2FsZSkuYXR0cigieTIiLCBoZWlnaHQgLSBsaW5lRm9ybWF0Lm1hcmdpbkJvdHRvbSkuc3R5bGUoInN0cm9rZSIsIGxpbmVGb3JtYXQuY29sb3IpIC8vInJnYig2LDEyMCwxNTUpIikKICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsIGxpbmVGb3JtYXQud2lkdGgpOwogICAgICB9CiAgICB9IC8vIFNFVFRJTkdTCgoKICAgIHRpbWVsaW5lLm1hcmdpbiA9IGZ1bmN0aW9uIChwKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG1hcmdpbjsKICAgICAgbWFyZ2luID0gcDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5vcmllbnQgPSBmdW5jdGlvbiAob3JpZW50YXRpb24pIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb3JpZW50OwogICAgICBvcmllbnQgPSBvcmllbnRhdGlvbjsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5pdGVtSGVpZ2h0ID0gZnVuY3Rpb24gKGgpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaXRlbUhlaWdodDsKICAgICAgaXRlbUhlaWdodCA9IGg7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuaXRlbU1hcmdpbiA9IGZ1bmN0aW9uIChoKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGl0ZW1NYXJnaW47CiAgICAgIGl0ZW1NYXJnaW4gPSBoOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLm5hdk1hcmdpbiA9IGZ1bmN0aW9uIChoKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG5hdk1hcmdpbjsKICAgICAgbmF2TWFyZ2luID0gaDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5oZWlnaHQgPSBmdW5jdGlvbiAoaCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBoZWlnaHQ7CiAgICAgIGhlaWdodCA9IGg7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUud2lkdGggPSBmdW5jdGlvbiAodykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB3aWR0aDsKICAgICAgd2lkdGggPSB3OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmRpc3BsYXkgPSBmdW5jdGlvbiAoZGlzcGxheVR5cGUpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoIHx8IERJU1BMQVlfVFlQRVMuaW5kZXhPZihkaXNwbGF5VHlwZSkgPT0gLTEpIHJldHVybiBkaXNwbGF5OwogICAgICBkaXNwbGF5ID0gZGlzcGxheVR5cGU7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUubGFiZWxGb3JtYXQgPSBmdW5jdGlvbiAoZikgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBsYWJlbEZ1bmN0aW9uOwogICAgICBsYWJlbEZ1bmN0aW9uID0gZjsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS50aWNrRm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aWNrRm9ybWF0OwogICAgICB0aWNrRm9ybWF0ID0gZm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmhvdmVyID0gZnVuY3Rpb24gKGhvdmVyRnVuYykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBob3ZlcjsKICAgICAgaG92ZXIgPSBob3ZlckZ1bmM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUubW91c2VvdmVyID0gZnVuY3Rpb24gKG1vdXNlb3ZlckZ1bmMpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbW91c2VvdmVyOwogICAgICBtb3VzZW92ZXIgPSBtb3VzZW92ZXJGdW5jOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLm1vdXNlb3V0ID0gZnVuY3Rpb24gKG1vdXNlb3V0RnVuYykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBtb3VzZW91dDsKICAgICAgbW91c2VvdXQgPSBtb3VzZW91dEZ1bmM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuY2xpY2sgPSBmdW5jdGlvbiAoY2xpY2tGdW5jKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNsaWNrOwogICAgICBjbGljayA9IGNsaWNrRnVuYzsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5zY3JvbGwgPSBmdW5jdGlvbiAoc2Nyb2xsRnVuYykgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzY3JvbGw7CiAgICAgIHNjcm9sbCA9IHNjcm9sbEZ1bmM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuY29sb3JzID0gZnVuY3Rpb24gKGNvbG9yRm9ybWF0KSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNvbG9yQ3ljbGU7CiAgICAgIGNvbG9yQ3ljbGUgPSBjb2xvckZvcm1hdDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5iZWdpbm5pbmcgPSBmdW5jdGlvbiAoYikgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBiZWdpbm5pbmc7CiAgICAgIGJlZ2lubmluZyA9IGI7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuZW5kaW5nID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZW5kaW5nOwogICAgICBlbmRpbmcgPSBlOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmxhYmVsTWFyZ2luID0gZnVuY3Rpb24gKG0pIHsKICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gbGFiZWxNYXJnaW47CiAgICAgIGxhYmVsTWFyZ2luID0gbTsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5yb3RhdGVUaWNrcyA9IGZ1bmN0aW9uIChkZWdyZWVzKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHJvdGF0ZVRpY2tzOwogICAgICByb3RhdGVUaWNrcyA9IGRlZ3JlZXM7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuc3RhY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHN0YWNrZWQgPSAhc3RhY2tlZDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5yZWxhdGl2ZVRpbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRpbWVJc1JlbGF0aXZlID0gIXRpbWVJc1JlbGF0aXZlOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dCb3JkZXJMaW5lID0gZnVuY3Rpb24gKCkgewogICAgICBzaG93Qm9yZGVyTGluZSA9ICFzaG93Qm9yZGVyTGluZTsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5zaG93Qm9yZGVyRm9ybWF0ID0gZnVuY3Rpb24gKGJvcmRlckZvcm1hdCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzaG93Qm9yZGVyRm9ybWF0OwogICAgICBzaG93Qm9yZGVyRm9ybWF0ID0gYm9yZGVyRm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUb2RheSA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2hvd1RvZGF5TGluZSA9ICFzaG93VG9kYXlMaW5lOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUb2RheUZvcm1hdCA9IGZ1bmN0aW9uICh0b2RheUZvcm1hdCkgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBzaG93VG9kYXlGb3JtYXQ7CiAgICAgIHNob3dUb2RheUZvcm1hdCA9IHRvZGF5Rm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLmNvbG9yUHJvcGVydHkgPSBmdW5jdGlvbiAoY29sb3JQcm9wKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGNvbG9yUHJvcGVydHlOYW1lOwogICAgICBjb2xvclByb3BlcnR5TmFtZSA9IGNvbG9yUHJvcDsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5yb3dTZXBhcmF0b3JzID0gZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHJvd1NlcGFyYXRvcnNDb2xvcjsKICAgICAgcm93U2VwYXJhdG9yc0NvbG9yID0gY29sb3I7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuYmFja2dyb3VuZCA9IGZ1bmN0aW9uIChjb2xvcikgewogICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBiYWNrZ3JvdW5kQ29sb3I7CiAgICAgIGJhY2tncm91bmRDb2xvciA9IGNvbG9yOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUaW1lQXhpcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2hvd1RpbWVBeGlzID0gIXNob3dUaW1lQXhpczsKICAgICAgcmV0dXJuIHRpbWVsaW5lOwogICAgfTsKCiAgICB0aW1lbGluZS5zaG93QXhpc1RvcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2hvd0F4aXNUb3AgPSAhc2hvd0F4aXNUb3A7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuc2hvd0F4aXNDYWxlbmRhclllYXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNob3dBeGlzQ2FsZW5kYXJZZWFyID0gIXNob3dBeGlzQ2FsZW5kYXJZZWFyOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUaW1lQXhpc1RpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRpbWVBeGlzVGljayA9ICF0aW1lQXhpc1RpY2s7CiAgICAgIHJldHVybiB0aW1lbGluZTsKICAgIH07CgogICAgdGltZWxpbmUuZnVsbExlbmd0aEJhY2tncm91bmRzID0gZnVuY3Rpb24gKCkgewogICAgICBmdWxsTGVuZ3RoQmFja2dyb3VuZHMgPSAhZnVsbExlbmd0aEJhY2tncm91bmRzOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dUaW1lQXhpc1RpY2tGb3JtYXQgPSBmdW5jdGlvbiAoZm9ybWF0KSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRpbWVBeGlzVGlja0Zvcm1hdDsKICAgICAgdGltZUF4aXNUaWNrRm9ybWF0ID0gZm9ybWF0OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLnNob3dBeGlzSGVhZGVyQmFja2dyb3VuZCA9IGZ1bmN0aW9uIChiZ0NvbG9yKSB7CiAgICAgIHNob3dBeGlzSGVhZGVyQmFja2dyb3VuZCA9ICFzaG93QXhpc0hlYWRlckJhY2tncm91bmQ7CgogICAgICBpZiAoYmdDb2xvcikgewogICAgICAgIGF4aXNCZ0NvbG9yID0gYmdDb2xvcjsKICAgICAgfQoKICAgICAgOwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHRpbWVsaW5lLm5hdmlnYXRlID0gZnVuY3Rpb24gKG5hdmlnYXRlQmFja3dhcmRzLCBuYXZpZ2F0ZUZvcndhcmRzKSB7CiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIFtuYXZpZ2F0ZUxlZnQsIG5hdmlnYXRlUmlnaHRdOwogICAgICBuYXZpZ2F0ZUxlZnQgPSBuYXZpZ2F0ZUJhY2t3YXJkczsKICAgICAgbmF2aWdhdGVSaWdodCA9IG5hdmlnYXRlRm9yd2FyZHM7CiAgICAgIHNob3dBeGlzTmF2ID0gIXNob3dBeGlzTmF2OwogICAgICByZXR1cm4gdGltZWxpbmU7CiAgICB9OwoKICAgIHJldHVybiB0aW1lbGluZTsKICB9Owp9KSgpOw=="},{"version":3,"sources":["/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline.js"],"names":["d3","scaleTime","scaleLinear","axisBottom","axisLeft","timeline","DISPLAY_TYPES","hover","mouseover","mouseout","click","scroll","labelFunction","label","navigateLeft","navigateRight","orient","width","height","rowSeparatorsColor","backgroundColor","tickFormat","format","timeFormat","tickTime","timeHours","tickInterval","tickSize","tickValues","colorCycle","scaleOrdinal","schemeCategory10","colorPropertyName","display","beginning","labelMargin","ending","margin","left","right","top","bottom","stacked","rotateTicks","timeIsRelative","fullLengthBackgrounds","itemHeight","itemMargin","navMargin","showTimeAxis","showAxisTop","showTodayLine","timeAxisTick","timeAxisTickFormat","stroke","spacing","showTodayFormat","marginTop","marginBottom","color","showBorderLine","showBorderFormat","showAxisHeaderBackground","showAxisNav","showAxisCalendarYear","axisBgColor","chartData","appendTimeAxis","g","xAxis","yPosition","appendAxisHeaderBackground","appendTimeAxisNav","axis","append","attr","call","appendTimeAxisCalendarYear","nav","calendarLabel","getFullYear","text","timelineBlocks","leftNavMargin","incrementValue","rightNavMargin","on","yAxis","insert","appendTimeAxisTick","maxStack","appendBackgroundBar","yAxisMapping","index","data","datum","greenbarYAxis","selectAll","enter","Function","appendLabel","gParent","hasLabel","fullItemHeight","rowsDown","id","d","i","gP","_groups","gParentSize","getBoundingClientRect","gParentItem","select","minTime","maxTime","setWidth","each","forEach","times","time","j","originTime","starting_time","ending_time","Object","keys","indexOf","scaleFactor","xScale","domain","range","scale","ticks","numTicks","console","warn","document","createElementNS","ns","prefix","svg","getXPos","getStackPosition","style","dColorPropName","class","getXTextPos","getStackTextPosition","lineYAxis","icon","belowLastItem","aboveFirstItem","timeAxisYPosition","move","x","Math","min","max","event","translate","zoom","behavior","getBBox","gSize","setHeight","appendLine","todayLine","Date","err","log","lineScale","lineFormat","p","arguments","length","orientation","h","w","displayType","labelFormat","f","hoverFunc","mouseoverFunc","mouseoutFunc","clickFunc","scrollFunc","colors","colorFormat","b","e","m","degrees","stack","relativeTime","borderFormat","showToday","todayFormat","colorProperty","colorProp","rowSeparators","background","showTimeAxisTick","showTimeAxisTickFormat","bgColor","navigate","navigateBackwards","navigateForwards"],"mappings":"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","sourcesContent":["// vim: ts=2 sw=2\nimport * as d3 from \"d3\"\nimport {scaleTime, scaleLinear} from 'd3-scale';\nimport {axisBottom, axisLeft} from 'd3-axis';\n\n(function () {\n  d3.timeline = function() {\n    var DISPLAY_TYPES = [\"circle\", \"rect\"];\n\n    var hover = function () {},\n        mouseover = function () {},\n        mouseout = function () {},\n        click = function () {},\n        scroll = function () {},\n        labelFunction = function(label) { return label; },\n        navigateLeft = function () {},\n        navigateRight = function () {},\n        orient = \"bottom\",\n        width = null,\n        height = null,\n        rowSeparatorsColor = null,\n        backgroundColor = null,\n        tickFormat = { format: d3.timeFormat(\"%I %p\"),\n          tickTime: d3.timeHours,\n          tickInterval: 1,\n          tickSize: 6,\n          tickValues: null\n        },\n        colorCycle = d3.scaleOrdinal(d3.schemeCategory10),\n        colorPropertyName = null,\n        display = \"rect\",\n        beginning = 0,\n        labelMargin = 0,\n        ending = 0,\n        margin = {left: 30, right:30, top: 30, bottom:30},\n        stacked = false,\n        rotateTicks = false,\n        timeIsRelative = false,\n        fullLengthBackgrounds = false,\n        itemHeight = 20,\n        itemMargin = 5,\n        navMargin = 60,\n        showTimeAxis = true,\n        showAxisTop = false,\n        showTodayLine = false,\n        timeAxisTick = false,\n        timeAxisTickFormat = {stroke: \"stroke-dasharray\", spacing: \"4 10\"},\n        showTodayFormat = {marginTop: 25, marginBottom: 0, width: 1, color: colorCycle},\n        showBorderLine = false,\n        showBorderFormat = {marginTop: 25, marginBottom: 0, width: 1, color: colorCycle},\n        showAxisHeaderBackground = false,\n        showAxisNav = false,\n        showAxisCalendarYear = false,\n        axisBgColor = \"white\",\n        chartData = {}\n      ;\n\n    var appendTimeAxis = function(g, xAxis, yPosition) {\n\n      if(showAxisHeaderBackground){ appendAxisHeaderBackground(g, 0, 0); }\n\n      if(showAxisNav){ appendTimeAxisNav(g) };\n\n      var axis = g.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + yPosition + \")\")\n        .call(xAxis);\n    };\n\n    var appendTimeAxisCalendarYear = function (nav) {\n      var calendarLabel = beginning.getFullYear();\n\n      if (beginning.getFullYear() != ending.getFullYear()) {\n        calendarLabel = beginning.getFullYear() + \"-\" + ending.getFullYear()\n      }\n\n      nav.append(\"text\")\n        .attr(\"transform\", \"translate(\" + 20 + \", 0)\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 14)\n        .attr(\"class\", \"calendarYear\")\n        .text(calendarLabel)\n      ;\n    };\n    var appendTimeAxisNav = function (g) {\n      var timelineBlocks = 6;\n      var leftNavMargin = (margin.left - navMargin);\n      var incrementValue = (width - margin.left)/timelineBlocks;\n      var rightNavMargin = (width - margin.right - incrementValue + navMargin);\n\n      var nav = g.append('g')\n          .attr(\"class\", \"axis\")\n          .attr(\"transform\", \"translate(0, 20)\")\n        ;\n\n      if(showAxisCalendarYear) { appendTimeAxisCalendarYear(nav) };\n\n      nav.append(\"text\")\n        .attr(\"transform\", \"translate(\" + leftNavMargin + \", 0)\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 14)\n        .attr(\"class\", \"chevron\")\n        .text(\"<\")\n        .on(\"click\", function () {\n          return navigateLeft(beginning, chartData);\n        })\n      ;\n\n      nav.append(\"text\")\n        .attr(\"transform\", \"translate(\" + rightNavMargin + \", 0)\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 14)\n        .attr(\"class\", \"chevron\")\n        .text(\">\")\n        .on(\"click\", function () {\n          return navigateRight(ending, chartData);\n        })\n      ;\n    };\n\n    var appendAxisHeaderBackground = function (g, xAxis, yAxis) {\n      g.insert(\"rect\")\n        .attr(\"class\", \"row-green-bar\")\n        .attr(\"x\", xAxis)\n        .attr(\"width\", width)\n        .attr(\"y\", yAxis)\n        .attr(\"height\", itemHeight)\n        .attr(\"fill\", axisBgColor);\n    };\n\n    var appendTimeAxisTick = function(g, xAxis, maxStack) {\n      g.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + (margin.top + (itemHeight + itemMargin) * maxStack) + \")\")\n        .attr(timeAxisTickFormat.stroke, timeAxisTickFormat.spacing)\n        .call(xAxis.tickFormat(\"\").tickSize(-(margin.top + (itemHeight + itemMargin) * (maxStack - 1) + 3), 0, 0));\n    };\n\n    var appendBackgroundBar = function (yAxisMapping, index, g, data, datum) {\n      var greenbarYAxis = ((itemHeight + itemMargin) * yAxisMapping[index]) + margin.top;\n      g.selectAll(\"svg\").data(data).enter()\n        .insert(\"rect\")\n        .attr(\"class\", \"row-green-bar\")\n        .attr(\"x\", fullLengthBackgrounds ? 0 : margin.left)\n        .attr(\"width\", fullLengthBackgrounds ? width : (width - margin.right - margin.left))\n        .attr(\"y\", greenbarYAxis)\n        .attr(\"height\", itemHeight)\n        .attr(\"fill\", backgroundColor instanceof Function ? backgroundColor(datum, index) : backgroundColor)\n      ;\n    };\n\n    var appendLabel = function (gParent, yAxisMapping, index, hasLabel, datum) {\n      var fullItemHeight    = itemHeight + itemMargin;\n      var rowsDown          = margin.top + (fullItemHeight/2) + fullItemHeight * (yAxisMapping[index] || 1);\n\n      gParent.append(\"text\")\n        .attr(\"class\", \"timeline-label\")\n        .attr(\"transform\", \"translate(\" + labelMargin + \",\" + rowsDown + \")\")\n        .text(hasLabel ? labelFunction(datum.label) : datum.id)\n        .on(\"click\", function (d, i) { click(d, index, datum); });\n    };\n\n    function timeline (gParent) {\n      var gP = gParent._groups[0][0];\n      var g = gParent.append(\"g\");\n      var gParentSize = gP.getBoundingClientRect();\n\n      var gParentItem = d3.select(gP);\n\n      var yAxisMapping = {},\n        maxStack = 1,\n        minTime = 0,\n        maxTime = 0;\n\n      setWidth();\n\n      // check if the user wants relative time\n      // if so, substract the first timestamp from each subsequent timestamps\n      if(timeIsRelative){\n        g.each(function (d, i) {\n          d.forEach(function (datum, index) {\n            datum.times.forEach(function (time, j) {\n              if(index === 0 && j === 0){\n                originTime = time.starting_time;               //Store the timestamp that will serve as origin\n                time.starting_time = 0;                        //Set the origin\n                time.ending_time = time.ending_time - originTime;     //Store the relative time (millis)\n              }else{\n                time.starting_time = time.starting_time - originTime;\n                time.ending_time = time.ending_time - originTime;\n              }\n            });\n          });\n        });\n      }\n\n      // check how many stacks we're gonna need\n      // do this here so that we can draw the axis before the graph\n      if (stacked || ending === 0 || beginning === 0) {\n        g.each(function (d, i) {\n          d.forEach(function (datum, index) {\n\n            // create y mapping for stacked graph\n            if (stacked && Object.keys(yAxisMapping).indexOf(index) == -1) {\n              yAxisMapping[index] = maxStack;\n              maxStack++;\n            }\n\n            // figure out beginning and ending times if they are unspecified\n            datum.times.forEach(function (time, i) {\n              if(beginning === 0)\n                if (time.starting_time < minTime || (minTime === 0 && timeIsRelative === false))\n                  minTime = time.starting_time;\n              if(ending === 0)\n                if (time.ending_time > maxTime)\n                  maxTime = time.ending_time;\n            });\n          });\n        });\n\n        if (ending === 0) {\n          ending = maxTime;\n        }\n        if (beginning === 0) {\n          beginning = minTime;\n        }\n      }\n\n      var scaleFactor = (1/(ending - beginning)) * (width - margin.left - margin.right);\n\n      // draw the axis\n      var xScale = d3.scaleTime()\n        .domain([beginning, ending])\n        .range([margin.left, width - margin.right]);\n\n      var xAxis = d3.axisBottom()\n        .scale(xScale)\n        .tickFormat(tickFormat.format)\n        .tickSize(tickFormat.tickSize);\n\n      if (tickFormat.tickValues != null) {\n        xAxis.tickValues(tickFormat.tickValues);\n      } else {\n        xAxis.ticks(tickFormat.numTicks || tickFormat.tickTime, tickFormat.tickInterval);\n      }\n\n      // draw the chart\n      g.each(function(d, i) {\n        chartData = d;\n        d.forEach( function(datum, index){\n          var data = datum.times;\n          var hasLabel = (typeof(datum.label) != \"undefined\");\n\n          // issue warning about using id per data set. Ids should be individual to data elements\n          if (typeof(datum.id) != \"undefined\") {\n            console.warn(\"d3Timeline Warning: Ids per dataset is deprecated in favor of a 'class' key. Ids are now per data element.\");\n          }\n\n          if (backgroundColor) { appendBackgroundBar(yAxisMapping, index, g, data, datum); }\n\n          g.selectAll(\"svg\").data(data).enter()\n            .append(function(d, i) {\n                return document.createElementNS(d3.ns.prefix.svg, \"display\" in d? d.display:display);\n            })\n            .attr(\"x\", getXPos)\n            .attr(\"y\", getStackPosition)\n            .attr(\"width\", function (d, i) {\n              return (d.ending_time - d.starting_time) * scaleFactor;\n            })\n            .attr(\"cy\", function(d, i) {\n                return getStackPosition(d, i) + itemHeight/2;\n            })\n            .attr(\"cx\", getXPos)\n            .attr(\"r\", itemHeight / 2)\n            .attr(\"height\", itemHeight)\n            .style(\"fill\", function(d, i){\n              var dColorPropName;\n              if (d.color) return d.color;\n              if( colorPropertyName ){\n                dColorPropName = d[colorPropertyName];\n                if ( dColorPropName ) {\n                  return colorCycle( dColorPropName );\n                } else {\n                  return colorCycle( datum[colorPropertyName] );\n                }\n              }\n              return colorCycle(index);\n            })\n            .on(\"mousemove\", function (d, i) {\n              hover(d, index, datum);\n            })\n            .on(\"mouseover\", function (d, i) {\n              mouseover(d, i, datum);\n            })\n            .on(\"mouseout\", function (d, i) {\n              mouseout(d, i, datum);\n            })\n            .on(\"click\", function (d, i) {\n              click(d, index, datum);\n            })\n            .attr(\"class\", function (d, i) {\n              return datum.class ? \"timelineSeries_\"+datum.class : \"timelineSeries_\"+index;\n            })\n            .attr(\"id\", function(d, i) {\n              // use deprecated id field\n              if (datum.id && !d.id) {\n                return 'timelineItem_'+datum.id;\n              }\n\n              return d.id ? d.id : \"timelineItem_\"+index+\"_\"+i;\n            })\n          ;\n\n          g.selectAll(\"svg\").data(data).enter()\n            .append(\"text\")\n            .attr(\"x\", getXTextPos)\n            .attr(\"y\", getStackTextPosition)\n            .text(function(d) {\n              return d.label;\n            })\n          ;\n\n          if (rowSeparatorsColor) {\n            var lineYAxis = ( itemHeight + itemMargin / 2 + margin.top + (itemHeight + itemMargin) * yAxisMapping[index]);\n            gParent.append(\"svg:line\")\n              .attr(\"class\", \"row-separator\")\n              .attr(\"x1\", 0 + margin.left)\n              .attr(\"x2\", width - margin.right)\n              .attr(\"y1\", lineYAxis)\n              .attr(\"y2\", lineYAxis)\n              .attr(\"stroke-width\", 1)\n              .attr(\"stroke\", rowSeparatorsColor);\n          }\n\n          // add the label\n          if (hasLabel) { appendLabel(gParent, yAxisMapping, index, hasLabel, datum); }\n\n          if (typeof(datum.icon) !== \"undefined\") {\n            gParent.append(\"image\")\n              .attr(\"class\", \"timeline-label\")\n              .attr(\"transform\", \"translate(\"+ 0 +\",\"+ (margin.top + (itemHeight + itemMargin) * yAxisMapping[index])+\")\")\n              .attr(\"xlink:href\", datum.icon)\n              .attr(\"width\", margin.left)\n              .attr(\"height\", itemHeight);\n          }\n\n          function getStackPosition(d, i) {\n            if (stacked) {\n              return margin.top + (itemHeight + itemMargin) * yAxisMapping[index];\n            }\n            return margin.top;\n          }\n          function getStackTextPosition(d, i) {\n            if (stacked) {\n              return margin.top + (itemHeight + itemMargin) * yAxisMapping[index] + itemHeight * 0.75;\n            }\n            return margin.top + itemHeight * 0.75;\n          }\n        });\n      });\n\n      var belowLastItem = (margin.top + (itemHeight + itemMargin) * maxStack);\n      var aboveFirstItem = margin.top;\n      var timeAxisYPosition = showAxisTop ? aboveFirstItem : belowLastItem;\n      if (showTimeAxis) { appendTimeAxis(g, xAxis, timeAxisYPosition); }\n      if (timeAxisTick) { appendTimeAxisTick(g, xAxis, maxStack); }\n\n      if (width > gParentSize.width) {\n        var move = function() {\n          var x = Math.min(0, Math.max(gParentSize.width - width, d3.event.translate[0]));\n          zoom.translate([x, 0]);\n          g.attr(\"transform\", \"translate(\" + x + \",0)\");\n          scroll(x*scaleFactor, xScale);\n        };\n\n        var zoom = d3.behavior.zoom().x(xScale).on(\"zoom\", move);\n\n        gParent\n          .attr(\"class\", \"scrollable\")\n          .call(zoom);\n      }\n\n      if (rotateTicks) {\n        g.selectAll(\".tick text\")\n          .attr(\"transform\", function(d) {\n            return \"rotate(\" + rotateTicks + \")translate(\"\n              + (this.getBBox().width / 2 + 10) + \",\" // TODO: change this 10\n              + this.getBBox().height / 2 + \")\";\n          });\n      }\n\n      var gSize = g[0][0].getBoundingClientRect();\n      setHeight();\n\n      if (showBorderLine) {\n        g.each(function (d, i) {\n          d.forEach(function (datum) {\n            var times = datum.times;\n            times.forEach(function (time) {\n              appendLine(xScale(time.starting_time), showBorderFormat);\n              appendLine(xScale(time.ending_time), showBorderFormat);\n            });\n          });\n        });\n      }\n\n      if (showTodayLine) {\n        var todayLine = xScale(new Date());\n        appendLine(todayLine, showTodayFormat);\n      }\n\n      function getXPos(d, i) {\n        return margin.left + (d.starting_time - beginning) * scaleFactor;\n      }\n\n      function getXTextPos(d, i) {\n        return margin.left + (d.starting_time - beginning) * scaleFactor + 5;\n      }\n\n      function setHeight() {\n        if (!height && !gParentItem.attr(\"height\")) {\n          if (itemHeight) {\n            // set height based off of item height\n            height = gSize.height + gSize.top - gParentSize.top;\n            // set bounding rectangle height\n            d3.select(gParent[0][0]).attr(\"height\", height);\n          } else {\n            throw \"height of the timeline is not set\";\n          }\n        } else {\n          if (!height) {\n            height = gParentItem.attr(\"height\");\n          } else {\n            gParentItem.attr(\"height\", height);\n          }\n        }\n      }\n\n      function setWidth() {\n        if (!width && !gParentSize.width) {\n          try {\n            width = gParentItem.attr(\"width\");\n            if (!width) {\n              throw \"width of the timeline is not set. As of Firefox 27, timeline().with(x) needs to be explicitly set in order to render\";\n            }\n          } catch (err) {\n            console.log( err );\n          }\n        } else if (!(width && gParentSize.width)) {\n          try {\n            width = gParentItem.attr(\"width\");\n          } catch (err) {\n            console.log( err );\n          }\n        }\n        // if both are set, do nothing\n      }\n\n      function appendLine(lineScale, lineFormat) {\n        gParent.append(\"svg:line\")\n          .attr(\"x1\", lineScale)\n          .attr(\"y1\", lineFormat.marginTop)\n          .attr(\"x2\", lineScale)\n          .attr(\"y2\", height - lineFormat.marginBottom)\n          .style(\"stroke\", lineFormat.color)//\"rgb(6,120,155)\")\n          .style(\"stroke-width\", lineFormat.width);\n      }\n\n    }\n\n    // SETTINGS\n\n    timeline.margin = function (p) {\n      if (!arguments.length) return margin;\n      margin = p;\n      return timeline;\n    };\n\n    timeline.orient = function (orientation) {\n      if (!arguments.length) return orient;\n      orient = orientation;\n      return timeline;\n    };\n\n    timeline.itemHeight = function (h) {\n      if (!arguments.length) return itemHeight;\n      itemHeight = h;\n      return timeline;\n    };\n\n    timeline.itemMargin = function (h) {\n      if (!arguments.length) return itemMargin;\n      itemMargin = h;\n      return timeline;\n    };\n\n    timeline.navMargin = function (h) {\n      if (!arguments.length) return navMargin;\n      navMargin = h;\n      return timeline;\n    };\n\n    timeline.height = function (h) {\n      if (!arguments.length) return height;\n      height = h;\n      return timeline;\n    };\n\n    timeline.width = function (w) {\n      if (!arguments.length) return width;\n      width = w;\n      return timeline;\n    };\n\n    timeline.display = function (displayType) {\n      if (!arguments.length || (DISPLAY_TYPES.indexOf(displayType) == -1)) return display;\n      display = displayType;\n      return timeline;\n    };\n\n    timeline.labelFormat = function(f) {\n      if (!arguments.length) return labelFunction;\n      labelFunction = f;\n      return timeline;\n    };\n\n    timeline.tickFormat = function (format) {\n      if (!arguments.length) return tickFormat;\n      tickFormat = format;\n      return timeline;\n    };\n\n    timeline.hover = function (hoverFunc) {\n      if (!arguments.length) return hover;\n      hover = hoverFunc;\n      return timeline;\n    };\n\n    timeline.mouseover = function (mouseoverFunc) {\n      if (!arguments.length) return mouseover;\n      mouseover = mouseoverFunc;\n      return timeline;\n    };\n\n    timeline.mouseout = function (mouseoutFunc) {\n      if (!arguments.length) return mouseout;\n      mouseout = mouseoutFunc;\n      return timeline;\n    };\n\n    timeline.click = function (clickFunc) {\n      if (!arguments.length) return click;\n      click = clickFunc;\n      return timeline;\n    };\n\n    timeline.scroll = function (scrollFunc) {\n      if (!arguments.length) return scroll;\n      scroll = scrollFunc;\n      return timeline;\n    };\n\n    timeline.colors = function (colorFormat) {\n      if (!arguments.length) return colorCycle;\n      colorCycle = colorFormat;\n      return timeline;\n    };\n\n    timeline.beginning = function (b) {\n      if (!arguments.length) return beginning;\n      beginning = b;\n      return timeline;\n    };\n\n    timeline.ending = function (e) {\n      if (!arguments.length) return ending;\n      ending = e;\n      return timeline;\n    };\n\n    timeline.labelMargin = function (m) {\n      if (!arguments.length) return labelMargin;\n      labelMargin = m;\n      return timeline;\n    };\n\n    timeline.rotateTicks = function (degrees) {\n      if (!arguments.length) return rotateTicks;\n      rotateTicks = degrees;\n      return timeline;\n    };\n\n    timeline.stack = function () {\n      stacked = !stacked;\n      return timeline;\n    };\n\n    timeline.relativeTime = function() {\n      timeIsRelative = !timeIsRelative;\n      return timeline;\n    };\n\n    timeline.showBorderLine = function () {\n      showBorderLine = !showBorderLine;\n      return timeline;\n    };\n\n    timeline.showBorderFormat = function(borderFormat) {\n      if (!arguments.length) return showBorderFormat;\n      showBorderFormat = borderFormat;\n      return timeline;\n    };\n\n    timeline.showToday = function () {\n      showTodayLine = !showTodayLine;\n      return timeline;\n    };\n\n    timeline.showTodayFormat = function(todayFormat) {\n      if (!arguments.length) return showTodayFormat;\n      showTodayFormat = todayFormat;\n      return timeline;\n    };\n\n    timeline.colorProperty = function(colorProp) {\n      if (!arguments.length) return colorPropertyName;\n      colorPropertyName = colorProp;\n      return timeline;\n    };\n\n    timeline.rowSeparators = function (color) {\n      if (!arguments.length) return rowSeparatorsColor;\n      rowSeparatorsColor = color;\n      return timeline;\n\n    };\n\n    timeline.background = function (color) {\n      if (!arguments.length) return backgroundColor;\n      backgroundColor = color;\n      return timeline;\n    };\n\n    timeline.showTimeAxis = function () {\n      showTimeAxis = !showTimeAxis;\n      return timeline;\n    };\n\n    timeline.showAxisTop = function () {\n      showAxisTop = !showAxisTop;\n      return timeline;\n    };\n\n    timeline.showAxisCalendarYear = function () {\n      showAxisCalendarYear = !showAxisCalendarYear;\n      return timeline;\n    };\n\n    timeline.showTimeAxisTick = function () {\n      timeAxisTick = !timeAxisTick;\n      return timeline;\n    };\n\n    timeline.fullLengthBackgrounds = function () {\n      fullLengthBackgrounds = !fullLengthBackgrounds;\n      return timeline;\n    };\n\n    timeline.showTimeAxisTickFormat = function(format) {\n      if (!arguments.length) return timeAxisTickFormat;\n      timeAxisTickFormat = format;\n      return timeline;\n    };\n\n    timeline.showAxisHeaderBackground = function(bgColor) {\n      showAxisHeaderBackground = !showAxisHeaderBackground;\n      if(bgColor) { (axisBgColor = bgColor) };\n      return timeline;\n    };\n\n    timeline.navigate = function (navigateBackwards, navigateForwards) {\n      if (!arguments.length) return [navigateLeft, navigateRight];\n      navigateLeft = navigateBackwards;\n      navigateRight = navigateForwards;\n      showAxisNav = !showAxisNav;\n      return timeline;\n    };\n\n    return timeline;\n  };\n})();"]}]}