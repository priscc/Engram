{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vuetify-loader/lib/loader.js??ref--17-0!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/AddTopic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/views/Adding_Content/AddTopic.vue","mtime":1598848041670},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3ByaXNjaWxsYV9jYW5jYXIvRG9jdW1lbnRzL1Z1ZVByb2plY3RzL2FwLXN0dWR5LWJpdDIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBkYiB9IGZyb20gJ0AvbWFpbic7CmltcG9ydCBmaXJlYmFzZSBmcm9tICdAL21haW4nOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIE5ldyBUb3BpYyBpbmZvCiAgICAgIGNyZWF0ZWRUb3BpYzogewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICB0aHVtYlVSTDogJycsCiAgICAgICAgY29udGVudE1EOiAnJwogICAgICB9LAogICAgICAvLyBGb3JtCiAgICAgIHRpbWVQZXJpb2RzOiBbJ1JlZ2lvbmFsIEludGVyYWN0aW9ucyAoMTIwMCAtIDE0NTApJywgJ0ZpcnN0IEdsb2JhbCBBZ2UgKDE0NTAgLSAxNzUwKScsICdSZXZvbHV0aW9ucyAmIEluZHVzdHJpYWxpemF0aW9uICgxNzUwIC0gMTkwMCknLCAnTW9kZXJuIFRpbWVzICgxOTAwIC0gUHJlc2VudCknXSwKICAgICAgdGltZVBlcmlvZDogJycsCiAgICAgIC8vIFZhbGlkYXRpb24KICAgICAgdmFsaWQ6IHRydWUsCiAgICAgIHJ1bGU6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgJ1JlcXVpcmVkJzsKICAgICAgfV0sCiAgICAgIGltZ1J1bGU6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgdi5zaXplIDwgMjAwMDAwMCB8fCAnSW1hZ2Ugc2l6ZSBzaG91bGQgYmUgbGVzcyB0aGFuIDIgTUIhJzsKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXREYXRhOiBmdW5jdGlvbiBzdWJtaXREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdG9waWNJRCwgdXBkYXRlZFRvcGljcywgaWQsIG5ld1RvcGljOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oInRvcGljcyIpLmFkZChfdGhpcy5jcmVhdGVkVG9waWMpLnRoZW4oZnVuY3Rpb24gKGRvY1JlZikgewogICAgICAgICAgICAgICAgICByZXR1cm4gZG9jUmVmLmlkOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFkZGluZyBkb2N1bWVudDogIiwgZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHRvcGljSUQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codG9waWNJRCk7IC8vcHVsbGluZyBpbmZvIGZyb20gdGltZVBlcmlvZHMKCiAgICAgICAgICAgICAgICB1cGRhdGVkVG9waWNzID0gW107CiAgICAgICAgICAgICAgICBpZCA9ICcnOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gZGIuY29sbGVjdGlvbigidGltZVBlcmlvZHMiKS53aGVyZSgndGl0bGUnLCAnPT0nLCBfdGhpcy50aW1lUGVyaW9kKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChxdWVyeVNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RvYycsIGRvYyk7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRvcGljcyA9IGRvYy5kYXRhKCkudG9waWNUaXRsZXM7CiAgICAgICAgICAgICAgICAgICAgaWQgPSBkb2MuaWQ7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50czogIiwgZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIC8vdXBkYXRpbmcgdGltZVBlcmlvZHMKICAgICAgICAgICAgICAgIG5ld1RvcGljID0gewogICAgICAgICAgICAgICAgICB0b3BpY0lEOiB0b3BpY0lELAogICAgICAgICAgICAgICAgICB0aXRsZTogX3RoaXMuY3JlYXRlZFRvcGljLnRpdGxlLAogICAgICAgICAgICAgICAgICB0aHVtYlVSTDogX3RoaXMuY3JlYXRlZFRvcGljLnRodW1iVVJMCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdXBkYXRlZFRvcGljcy5wdXNoKG5ld1RvcGljKTsKICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInRpbWVQZXJpb2RzIikuZG9jKGlkKS51cGRhdGUoewogICAgICAgICAgICAgICAgICAndG9waWNUaXRsZXMnOiB1cGRhdGVkVG9waWNzCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRvY3VtZW50IHN1Y2Nlc3NmdWxseSB1cGRhdGVkISIpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIHVwZGF0aW5nIGRvY3VtZW50OiAiLCBlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpcy5yZXNldCgpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICAgICAgdGhpcy52YWxpZCA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["AddTopic.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div id=\"app\">\n\t<v-container>\n\t\t<v-row class=\"blue-grey darken-2 white--text text-center\">\n\t\t\t<v-col>\n\t\t\t\t<h1 class=\"display-1\">Add a New Topic</h1>\n\t\t\t\t<blockquote class=\"blockquote pa-0 pb-4\">Fill the following form to add topics and topics to the home web page</blockquote>\n\t\t\t\t<p class=\"caption\">Reminder: \n\t\t\t\t\t<br> (1) To register this topic, you still have to select the Time Period on the mod topic page & add an image\n\t\t\t\t</p>\n\t\t\t</v-col>\n\t\t</v-row>\n\t\t<!-- FORM -->\n\t\t<v-form ref=\"form\" v-model=\"valid\">\n\t\t\t<v-row>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t<v-col cols=\"9\">\n\t\t\t\t\t<v-text-field label=\"Topic title:\" autocomplete=\"off\" v-model=\"createdTopic.title\" :rules=\"rule\" required></v-text-field>\n\t\t\t\t\t<v-select v-model=\"timePeriod\" :items=\"timePeriods\" label=\"Choose Time Period:\" outlined dense :rules=\"rule\" required>{{ timePeriods }}</v-select>\n\t\t\t\t\t<!-- <v-row class=\"pt-2\">\n\t\t\t\t\t\t<v-col cols=\"4\">\n\t\t\t\t\t\t\t<v-file-input disabled accept=\"image/*\" counter show-size label=\"Thumbnail\"></v-file-input>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t<v-col>\n\t\t\t\t\t\t\t<v-textarea disabled outlined name=\"input-7-4\" label=\"Topic intro content\" value=\"This is just a tester, don't fill out\" ></v-textarea>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row> -->\n\t\t\t\t\t<v-row>\n\t\t\t\t\t\t<v-col class=\"d-flex justify-end row-reverse\">\n\t\t\t\t\t\t\t<v-btn class=\"mr-3\" large color=\"error\" outlined @click=\"reset\">Reset Form</v-btn>\n\t\t\t\t\t\t\t<v-btn :disabled=\"!valid\" large color=\"success\" @click=\"submitData\">SUBMIT</v-btn>\n\t\t\t\t\t\t</v-col>\n\t\t\t\t\t</v-row>\n\t\t\t\t</v-col>\n\t\t\t\t<v-spacer></v-spacer>\n\t\t\t</v-row>\n\t\t</v-form>\n\t</v-container>\n</div>\n</template>\n\n\n<script>\nimport { db } from '@/main'\nimport firebase from '@/main'\nimport _ from 'lodash'\nexport default {\n\tdata: function () { return {\n\t\t// New Topic info\n\t\tcreatedTopic: {\n\t\t\ttitle: '',\n\t\t\tthumbURL: '',\n\t\t\tcontentMD: ''\n\t\t},\n\t\t// Form\n\t\ttimePeriods: [\n\t\t\t'Regional Interactions (1200 - 1450)',\n\t\t\t'First Global Age (1450 - 1750)',\n\t\t\t'Revolutions & Industrialization (1750 - 1900)',\n\t\t\t'Modern Times (1900 - Present)'\n\t\t],\n\t\ttimePeriod: '',\n\t\t// Validation\n\t\tvalid: true,\n\t\trule: [ v => !!v || 'Required' ],\n\t\timgRule: [ v => !!v || v.size < 2000000 || 'Image size should be less than 2 MB!']\n\t}},\n\tmethods: {\n\t\tasync submitData () {\n\t\t\t//creating doc\n\t\t\tlet topicID = await db.collection(\"topics\").add(this.createdTopic)\n\t\t\t\t.then(function(docRef) {\n\t\t\t\t\treturn docRef.id;\n\t\t\t\t}).catch(function(error) {\n\t\t\t\t\tconsole.error(\"Error adding document: \", error);\n\t\t\t\t});\n\t\t\t\n\t\t\tconsole.log(topicID)\n\t\t\t//pulling info from timePeriods\n\t\t\tvar updatedTopics = []\n\t\t\tvar id = ''\n\t\t\tawait db.collection(\"timePeriods\").where('title', '==', this.timePeriod).get()\n\t\t\t\t.then(function(querySnapshot) {\n\t\t\t\t\tquerySnapshot.forEach(function(doc) {\n\t\t\t\t\t\tconsole.log('doc', doc)\n\t\t\t\t\t\tupdatedTopics = doc.data().topicTitles\n\t\t\t\t\t\tid = doc.id\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tconsole.log(\"Error getting documents: \", error);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t//updating timePeriods\n\t\t\tvar newTopic = {topicID: topicID, title: this.createdTopic.title, thumbURL: this.createdTopic.thumbURL}\n\t\t\tupdatedTopics.push(newTopic)\n\t\t\tdb.collection(\"timePeriods\").doc(id).update( {'topicTitles': updatedTopics} )\n\t\t\t\t.then(function() { console.log( \"Document successfully updated!\"); })\n\t\t\t\t.catch(function(error) { console.error( \"Error updating document: \", error); });\n\t\t\t\n\t\t\tthis.reset()\n\t\t},\n\t\tvalidate () { \n\t\t\tthis.valid = false\n\t\t\tthis.$refs.form.validate() \n\t\t},\n\t\treset () { this.$refs.form.reset() }\n\t}\n}\n</script>\n"],"sourceRoot":"src/views/Adding_Content"}]}