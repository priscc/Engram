{"remainingRequest":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js!/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline3.js","dependencies":[{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline3.js","mtime":1591738928127},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIik7CgovLyBpbnNwaXJlZCBhbmQgYWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qaWFodWFuZy9kMy10aW1lbGluZSBhbmQgaHR0cDovL2JsLm9ja3Mub3JnL3JlbmdlbC1kZS81NjAzNDY0CmQzLnRpbWVsaW5lID0gZnVuY3Rpb24gKCkgewogIC8vIGdsb2JhbCB0aW1lbGluZSB2YXJpYWJsZXMKICB2YXIgZGF0YSA9IHt9LAogICAgICBXaWR0aCwKICAgICAgc3ZnLAogICAgICBjaGFydCwKICAgICAgZzsgLy8gQ29udGFpbmVyIGZvciB0aGUgZGF0YQoKICB2YXIgbWFyZ2luID0gewogICAgdG9wOiAyMCwKICAgIHJpZ2h0OiAyMCwKICAgIGJvdHRvbTogMjAsCiAgICBsZWZ0OiAyMAogIH07IC8vdGltZWxpbmU6IGFjY2VzcyB0aW1lbGluZSBzdmcgZWxlbWVudAoKICBmdW5jdGlvbiB0aW1lbGluZShnUGFyZW50KSB7CiAgICB2YXIgb3V0ZXJXaWR0aCA9IDk2MCwKICAgICAgICBvdXRlckhlaWdodCA9IDUwMCwKICAgICAgICB3aWR0aCA9IG91dGVyV2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCwKICAgICAgICBoZWlnaHQgPSBvdXRlckhlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tOwogICAgV2lkdGggPSB3aWR0aDsKICAgIHZhciBkaXYgPSBnUGFyZW50WzBdWzBdOyAvL2dldHMgc3ZnIG9mIDxkaXYgI3RpbWVsaW5lPgoKICAgIHN2ZyA9IGQzLnNlbGVjdChkaXYpLmF0dHIoIndpZHRoIiwgb3V0ZXJXaWR0aCkuYXR0cigiaGVpZ2h0Iiwgb3V0ZXJIZWlnaHQpOwogICAgZyA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsIiArIG1hcmdpbi50b3AgKyAiKSIpOwogICAgRHJhd0NpcmNsZXMoKTsKICAgIGNoYXJ0ID0gZy5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJjaGFydCIpLmF0dHIoImNsaXAtcGF0aCIsICJ1cmwoI2NoYXJ0LWFyZWEpIik7CiAgICB4QXhpcygpOwogIH0KCiAgOyAvL2RhdEE6IGNvbnRyb2xzIHRpbWVsaW5lIG9uIHRoZSBkYXRhCgogIHRpbWVsaW5lLmRhdEEgPSBmdW5jdGlvbiAoaXRlbXMpIHsKICAgIGl0ZW1zID0gaXRlbXNbMF0udGltZXM7CiAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpLAogICAgICAgIHRyYWNrcyA9IFtdLAogICAgICAgIHllYXJNaWxsaXMgPSAzMTYyMjQwMDAwMCwKICAgICAgICBpbnN0YW50T2Zmc2V0ID0gMTAwICogeWVhck1pbGxpczsKICAgIGRhdGEuaXRlbXMgPSBpdGVtczsKCiAgICBmdW5jdGlvbiBjb21wYXJlQXNjZW5kaW5nKGl0ZW0xLCBpdGVtMikgewogICAgICAvLyBFdmVyeSBpdGVtIG11c3QgaGF2ZSB0d28gZmllbGRzOiAnc3RhcnQnIGFuZCAnZW5kJy4KICAgICAgdmFyIHJlc3VsdCA9IGl0ZW0xLnN0YXJ0IC0gaXRlbTIuc3RhcnQ7IC8vIGVhcmxpZXIgZmlyc3QKCiAgICAgIGlmIChyZXN1bHQgPCAwKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CgogICAgICBpZiAocmVzdWx0ID4gMCkgewogICAgICAgIHJldHVybiAxOwogICAgICB9IC8vIGxvbmdlciBmaXJzdAoKCiAgICAgIHJlc3VsdCA9IGl0ZW0yLmVuZCAtIGl0ZW0xLmVuZDsKCiAgICAgIGlmIChyZXN1bHQgPCAwKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CgogICAgICBpZiAocmVzdWx0ID4gMCkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICByZXR1cm4gMDsKICAgIH0gLy9jYWxjdWxhdGVUcmFja3M6IGNhbGxzIGNvbXBhcmVBc2NlbmRpbmcgYW5kIHNvcnRzIGRhdGVzCgoKICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRyYWNrcyhpdGVtcykgewogICAgICB2YXIgaSwgdHJhY2s7CgogICAgICBmdW5jdGlvbiBzb3J0QmFja3dhcmQoKSB7CiAgICAgICAgLy8gb2xkZXIgaXRlbXMgZW5kIGRlZXBlcgogICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGZvciAoaSA9IDAsIHRyYWNrID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKywgdHJhY2srKykgewogICAgICAgICAgICBpZiAoaXRlbS5lbmQgPCB0cmFja3NbaV0pIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGl0ZW0udHJhY2sgPSB0cmFjazsKICAgICAgICAgIHRyYWNrc1t0cmFja10gPSBpdGVtLnN0YXJ0OwogICAgICAgIH0pOwogICAgICB9CgogICAgICBkYXRhLml0ZW1zLnNvcnQoY29tcGFyZUFzY2VuZGluZyk7CiAgICAgIHNvcnRCYWNrd2FyZCgpOwogICAgfSAvLyBmb3JFYWNoOiBjYWxsIHBhcnNlRGF0ZSB0byBjbGVhbiBkYXRlcyBhbmQgY29udmVydCBTdHJpbmdzIGludG8gZGF0ZXMKCgogICAgZGF0YS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGl0ZW0uc3RhcnQgPSBkMy50aW1lLmZvcm1hdCgiJVkiKS5wYXJzZShpdGVtLnN0YXJ0KTsKCiAgICAgIGlmIChpdGVtLmVuZCA9PSAiIikgewogICAgICAgIC8vaWYgbm90IGVuZCB0aW1lCiAgICAgICAgaXRlbS5lbmQgPSBuZXcgRGF0ZShpdGVtLnN0YXJ0LmdldFRpbWUoKSArIGluc3RhbnRPZmZzZXQpOwogICAgICAgIGl0ZW0uaW5zdGFudCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbS5lbmQgPSBkMy50aW1lLmZvcm1hdCgiJVkiKS5wYXJzZShpdGVtLmVuZCk7CiAgICAgICAgaXRlbS5pbnN0YW50ID0gZmFsc2U7CiAgICAgIH0gLy8gcHJldmVudCB0aW1lbGluZSBmcm9tIGdvaW5nIGludG8gdGhlIGZ1dHVyZQoKCiAgICAgIGlmIChpdGVtLmVuZCA+IHRvZGF5KSB7CiAgICAgICAgaXRlbS5lbmQgPSB0b2RheTsKICAgICAgfQoKICAgICAgOwogICAgfSk7CiAgICBjYWxjdWxhdGVUcmFja3MoZGF0YS5pdGVtcyk7CiAgICBkYXRhLm5UcmFja3MgPSB0cmFja3MubGVuZ3RoOwogICAgZGF0YS5taW5EYXRlID0gZDMubWluKGRhdGEuaXRlbXMsIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBkLnN0YXJ0OwogICAgfSk7CiAgICBkYXRhLm1heERhdGUgPSBkMy5tYXgoZGF0YS5pdGVtcywgZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQuZW5kOwogICAgfSk7CiAgICByZXR1cm4gdGltZWxpbmU7CiAgfTsKCiAgdmFyIERyYXdDaXJjbGVzID0gZnVuY3Rpb24gRHJhd0NpcmNsZXMoKSB7CiAgICB2YXIgc2NhbGVGYWN0b3IgPSAxIC8gKGRhdGEubWF4RGF0ZSAtIGRhdGEubWluRGF0ZSkgKiAoV2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCk7IC8vdXNlZCBmb3IgcG9zaXRpb25pbmcKCiAgICB2YXIgaXRlbUhlaWdodCA9IDIwLAogICAgICAgIGl0ZW1NYXJnaW4gPSA1OwogICAgdmFyIENpcmNsZWRhdGEgPSBkYXRhLml0ZW1zOyAvL2lzc3VlIHdhcm5pbmcgYWJvdXQgdXNpbmcgaWQgcGVyIGRhdGEgc2V0LiBJZHMgc2hvdWxkIGJlIGluZGl2aWR1YWwgdG8gZGF0YSBlbGVtZW50cwoKICAgIGlmICh0eXBlb2YgZGF0YS5pZCAhPSAidW5kZWZpbmVkIikgewogICAgICBjb25zb2xlLndhcm4oImQzVGltZWxpbmUgV2FybmluZzogSWRzIHBlciBkYXRhc2V0IGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgYSAnY2xhc3MnIGtleS4gSWRzIGFyZSBub3cgcGVyIGRhdGEgZWxlbWVudC4iKTsKICAgIH0gLy9jaXJjbGVzCgoKICAgIGcuc2VsZWN0QWxsKCJzdmciKS5kYXRhKENpcmNsZWRhdGEpLmVudGVyKCkuYXBwZW5kKCJjaXJjbGUiKSAvL2ZvciBlYWNoIHN0YWNrZWQgcmVjdAogICAgLmF0dHIoIngiLCBnZXRYUG9zKS5hdHRyKCJ5IiwgZ2V0U3RhY2tQb3NpdGlvbikuYXR0cigid2lkdGgiLCBmdW5jdGlvbiAoZCwgaSkgewogICAgICByZXR1cm4gKGQuZW5kIC0gZC5zdGFydCkgKiAuNTsKICAgIH0pIC8vY2lyY2xlcwogICAgLmF0dHIoImN5IiwgZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgcmV0dXJuIGdldFN0YWNrUG9zaXRpb24oZCwgaSk7CiAgICB9KS5hdHRyKCJjeCIsIGdldFhQb3MpLmF0dHIoInIiLCBpdGVtSGVpZ2h0IC8gMS44KS5hdHRyKCJoZWlnaHQiLCBpdGVtSGVpZ2h0KS5hdHRyKCJmaWxsIiwgZnVuY3Rpb24gKGQsIGkpIHsKICAgICAgcmV0dXJuIGQuY29sb3I7CiAgICB9KTsgLy8gY2lyY2xlIHRleHQKCiAgICBnLnNlbGVjdEFsbCgic3ZnIikuZGF0YShDaXJjbGVkYXRhKS5lbnRlcigpLmFwcGVuZCgidGV4dCIpLmF0dHIoIngiLCBnZXRYVGV4dFBvcykuYXR0cigieSIsIGdldFN0YWNrVGV4dFBvc2l0aW9uKS50ZXh0KGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBkLmxhYmVsOwogICAgfSkuc3R5bGUoImZpbGwiLCAid2hpdGUiKTsKCiAgICBmdW5jdGlvbiBnZXRTdGFja1Bvc2l0aW9uKGQsIGkpIHsKICAgICAgcmV0dXJuIG1hcmdpbi50b3AgKyAoaXRlbUhlaWdodCArIGl0ZW1NYXJnaW4pICogc2NhbGVGYWN0b3I7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U3RhY2tUZXh0UG9zaXRpb24oZCwgaSkgewogICAgICByZXR1cm4gbWFyZ2luLnRvcCArIChpdGVtSGVpZ2h0ICsgaXRlbU1hcmdpbikgKiBzY2FsZUZhY3RvciArIDU7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0WFBvcyhkLCBpKSB7CiAgICAgIHJldHVybiBtYXJnaW4ubGVmdCArIChkLnN0YXJ0IC0gZGF0YS5taW5EYXRlKSAqIHNjYWxlRmFjdG9yOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFhUZXh0UG9zKGQsIGkpIHsKICAgICAgcmV0dXJuIG1hcmdpbi5sZWZ0ICsgKGQuc3RhcnQgLSBkYXRhLm1pbkRhdGUpICogc2NhbGVGYWN0b3IgLSA0LjU7CiAgICB9CgogICAgcmV0dXJuIHRpbWVsaW5lOwogIH07CgogIHZhciB4QXhpcyA9IGZ1bmN0aW9uIHhBeGlzKCkgewogICAgdmFyIGJhbmQgPSBkYXRhLml0ZW1zOyAvL2RyYXcgdGhlIGF4aXMKCiAgICB2YXIgeFNjYWxlID0gZDMudGltZS5zY2FsZSgpLmRvbWFpbihbZGF0YS5taW5EYXRlLCBkYXRhLm1heERhdGVdKS5yYW5nZShbMCwgV2lkdGhdKTsKICAgIHZhciBheGlzID0gZDMuc3ZnLmF4aXMoKS5zY2FsZSh4U2NhbGUpLm9yaWVudCgiYm90dG9tIikudGlja1NpemUoNiwgMCkudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkgewogICAgICByZXR1cm4gdG9ZZWFyKGQpOwogICAgfSk7CiAgICB2YXIgeEF4aXMgPSBjaGFydC5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJheGlzIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyA0MDAgKyAiKSIpLmNhbGwoYXhpcyk7IC8vIHhBeGlzLnJlZHJhdyA9IGZ1bmN0aW9uICgpIHsKICAgIC8vICAgICB4QXhpcy5jYWxsKGF4aXMpOwogICAgLy8gfTsKICAgIC8vIGJhbmQucGFydHMucHVzaCh4QXhpcyk7IC8vIGZvciBicnVzaC5yZWRyYXcKICAgIC8vIGNvbXBvbmVudHMucHVzaCh4QXhpcyk7IC8vIGZvciB0aW1lbGluZS5yZWRyYXcKCiAgICByZXR1cm4gdGltZWxpbmU7CiAgfTsKCiAgZnVuY3Rpb24gdG9ZZWFyKGRhdGUsIGJjU3RyaW5nKSB7CiAgICAvLyBiY1N0cmluZyBpcyB0aGUgcHJlZml4IG9yIHBvc3RmaXggZm9yIEJDIGRhdGVzLgogICAgLy8gSWYgYmNTdHJpbmcgc3RhcnRzIHdpdGggJy0nIChtaW51cyksCiAgICAvLyBpZiB3aWxsIGJlIHBsYWNlZCBpbiBmcm9udCBvZiB0aGUgeWVhci4KICAgIGJjU3RyaW5nID0gYmNTdHJpbmcgfHwgIiBCQyI7IC8vIFdpdGggYmxhbmshCgogICAgdmFyIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7CiAgICBpZiAoeWVhciA+IDApIHJldHVybiB5ZWFyLnRvU3RyaW5nKCk7CiAgICBpZiAoYmNTdHJpbmdbMF0gPT0gJy0nKSByZXR1cm4gYmNTdHJpbmcgKyAteWVhcjsKICAgIHJldHVybiAteWVhciArIGJjU3RyaW5nOwogIH0KCiAgdGltZWxpbmUuZGF0YSA9IGZ1bmN0aW9uIChwKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkYXRhOwogICAgZGF0YSA9IHA7CiAgICByZXR1cm4gdGltZWxpbmU7CiAgfTsKCiAgdGltZWxpbmUuV2lkdGggPSBmdW5jdGlvbiAocCkgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gV2lkdGg7CiAgICBXaWR0aCA9IHA7CiAgICByZXR1cm4gdGltZWxpbmU7CiAgfTsKCiAgdGltZWxpbmUuc3ZnID0gZnVuY3Rpb24gKHApIHsKICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHN2ZzsKICAgIHN2ZyA9IHA7CiAgICByZXR1cm4gdGltZWxpbmU7CiAgfTsKCiAgdGltZWxpbmUubWFyZ2luID0gZnVuY3Rpb24gKHApIHsKICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIG1hcmdpbjsKICAgIG1hcmdpbiA9IHA7CiAgICByZXR1cm4gdGltZWxpbmU7CiAgfTsKCiAgcmV0dXJuIHRpbWVsaW5lOwp9Ow=="},{"version":3,"sources":["/Users/priscilla_cancar/Documents/VueProjects/ap-study-bit2/src/d3-timeline3.js"],"names":["d3","timeline","data","Width","svg","chart","g","margin","top","right","bottom","left","gParent","outerWidth","outerHeight","width","height","div","select","attr","append","DrawCircles","xAxis","datA","items","times","today","Date","tracks","yearMillis","instantOffset","compareAscending","item1","item2","result","start","end","calculateTracks","i","track","sortBackward","forEach","item","length","sort","time","format","parse","getTime","instant","nTracks","minDate","min","d","maxDate","max","scaleFactor","itemHeight","itemMargin","Circledata","id","console","warn","selectAll","enter","getXPos","getStackPosition","color","getXTextPos","getStackTextPosition","text","label","style","band","xScale","scale","domain","range","axis","orient","tickSize","tickFormat","toYear","call","date","bcString","year","getUTCFullYear","toString","p","arguments"],"mappings":"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","sourcesContent":["// inspired and adapted from https://github.com/jiahuang/d3-timeline and http://bl.ocks.org/rengel-de/5603464\n\nd3.timeline = function() {\n\t// global timeline variables\n\tvar data = {}, Width, \n\tsvg, \n\tchart, g; // Container for the data\n\tvar margin = {top: 20, right: 20, bottom: 20, left: 20};\n\n\n\t//timeline: access timeline svg element\n\tfunction timeline (gParent) {\n\n\t\tvar  outerWidth = 960,\n\t\touterHeight = 500,\n\t\twidth = outerWidth - margin.left - margin.right,\n\t\theight = outerHeight - margin.top - margin.bottom;\n\t\t\n\t\tWidth = width;\n\n\t\tvar div = gParent[0][0] //gets svg of <div #timeline>\n\t\tsvg = d3.select(div)\n\t\t\t.attr(\"width\", outerWidth)\n\t\t\t.attr(\"height\", outerHeight);\n\t\t\t\n\n\t\tg = svg.append(\"g\")\n\t\t\t.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top +  \")\");\n\n\n\n        DrawCircles();\n\n        chart = g.append(\"g\")\n            .attr(\"class\", \"chart\")\n            .attr(\"clip-path\", \"url(#chart-area)\" );\n\n\t\txAxis()\n\t};\n\t\n\n\t//datA: controls timeline on the data\n\ttimeline.datA = function(items) {\n\n\t\titems = items[0].times;\n\n\t\tvar today = new Date(),\n\t\t\ttracks = [],\n\t\t\tyearMillis = 31622400000,\n\t\t\tinstantOffset = 100 * yearMillis;\n\n\t\tdata.items = items;\n\n        function compareAscending(item1, item2) {\n            // Every item must have two fields: 'start' and 'end'.\n            var result = item1.start - item2.start;\n            // earlier first\n            if (result < 0) { return -1; }\n            if (result > 0) { return 1; }\n            // longer first\n            result = item2.end - item1.end;\n            if (result < 0) { return -1; }\n            if (result > 0) { return 1; }\n            return 0;\n        }\n        //calculateTracks: calls compareAscending and sorts dates\n        function calculateTracks(items) {\n            var i, track;\n            function sortBackward() {\n                // older items end deeper\n                items.forEach(function (item) {\n                    for (i = 0, track = 0; i < tracks.length; i++, track++) {\n                        if (item.end < tracks[i]) { break; }\n                    }\n                    item.track = track;\n                    tracks[track] = item.start;\n                });\n            }\n            data.items.sort(compareAscending);\n            sortBackward();\n        }\n\t\t// forEach: call parseDate to clean dates and convert Strings into dates\n\t\tdata.items.forEach(function (item){\n\t\t\titem.start  = d3.time.format(\"%Y\").parse(item.start);\n\t\t\tif (item.end == \"\") { //if not end time\n\t\t\t\titem.end = new Date(item.start.getTime() + instantOffset);\n\t\t\t\titem.instant = true;\n\t\t\t} else {\n\t\t\t\titem.end = d3.time.format(\"%Y\").parse(item.end);\n\t\t\t\titem.instant = false;\n\t\t\t}\n\t\t\t// prevent timeline from going into the future\n\t\t\tif (item.end > today) { item.end = today};\n\t\t});\n\n\t\tcalculateTracks(data.items);\n\t\tdata.nTracks = tracks.length;\n\t\tdata.minDate = d3.min(data.items, function (d) { return d.start; });\n\t\tdata.maxDate = d3.max(data.items, function (d) { return d.end; });\n\n\t\treturn timeline;\n\t};\n\n\n\n\tvar DrawCircles = function(){\n\t\t\tvar scaleFactor = (1/(data.maxDate - data.minDate)) * (Width - margin.left - margin.right); //used for positioning\n\n\t\t\tvar itemHeight = 20, itemMargin = 5\n\t\t\tvar Circledata = data.items;\n\t\t\t//issue warning about using id per data set. Ids should be individual to data elements\n\t\t\tif (typeof(data.id) != \"undefined\") {\n\t\t\t\tconsole.warn(\"d3Timeline Warning: Ids per dataset is deprecated in favor of a 'class' key. Ids are now per data element.\");\n\t\t\t}\n\t\t\t//circles\n\t\t\tg.selectAll(\"svg\").data(Circledata).enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t//for each stacked rect\n\t\t\t\t\t.attr(\"x\", getXPos)\n\t\t\t\t\t.attr(\"y\", getStackPosition)\n\t\t\t\t\t.attr(\"width\", function (d, i) {\n\t\t\t\t\t\treturn (d.end - d.start) * .5;\n\t\t\t\t\t})\n\t\t\t\t//circles\n\t\t\t\t.attr(\"cy\", function(d, i) {\n\t\t\t\t\t\treturn getStackPosition(d, i);\n\t\t\t\t})\n\t\t\t\t.attr(\"cx\", getXPos)\n\t\t\t\t.attr(\"r\", itemHeight / 1.8)\n\t\t\t\t.attr(\"height\", itemHeight)\n\t\t\t\t.attr(\"fill\", function(d, i) { return d.color ; })\n\t\t\t;\n\n\t\t\t// circle text\n\t\t\tg.selectAll(\"svg\").data(Circledata).enter()\n\t\t\t\t.append(\"text\")\n\t\t\t\t.attr(\"x\", getXTextPos)\n\t\t\t\t.attr(\"y\", getStackTextPosition)\n\t\t\t\t.text(function(d) {\n\t\t\t\t\treturn d.label;\n\t\t\t\t})\n\t\t\t\t.style(\"fill\", \"white\");\n\n\t\t\tfunction getStackPosition(d, i) {\n\t\t\t\treturn margin.top + (itemHeight + itemMargin) * scaleFactor ;\n\t\t\t}\n\t\t\tfunction getStackTextPosition(d, i) {\n\t\t\t\treturn margin.top + (itemHeight + itemMargin) * scaleFactor + 5;\n\t\t\t}\n\t\t\tfunction getXPos(d, i) {\n\t\t\t\treturn margin.left + (d.start - data.minDate) * scaleFactor;\n\t\t\t}\n\t\t\tfunction getXTextPos(d, i) {\n\t\t\t\treturn margin.left + (d.start - data.minDate) * scaleFactor - 4.5;\n\t\t\t}\n\n\t\treturn timeline;\n\t};\n\n\tvar xAxis = function () {\n\n        var band = data.items;\n\n\t\t//draw the axis\n\t\tvar xScale = d3.time.scale()\n\t\t\t.domain([data.minDate, data.maxDate])\n            .range([0, Width]);\n\n        var axis = d3.svg.axis()\n            .scale(xScale)\n            .orient(\"bottom\")\n            .tickSize(6, 0)\n            .tickFormat(function (d) { return toYear(d); });\n\n\n        var xAxis = chart.append(\"g\")\n            .attr(\"class\", \"axis\")\n            .attr(\"transform\", \"translate(0,\" + 400  + \")\")\n            .call(axis);\n\n        // xAxis.redraw = function () {\n        //     xAxis.call(axis);\n        // };\n\n        // band.parts.push(xAxis); // for brush.redraw\n        // components.push(xAxis); // for timeline.redraw\n\n        return timeline;\n    };\n\n    function toYear(date, bcString) {\n        // bcString is the prefix or postfix for BC dates.\n        // If bcString starts with '-' (minus),\n        // if will be placed in front of the year.\n        bcString = bcString || \" BC\" // With blank!\n        var year = date.getUTCFullYear();\n        if (year > 0) return year.toString();\n        if (bcString[0] == '-') return bcString + (-year);\n        return (-year) + bcString;\n    }\n\n\ttimeline.data  = function (p) {\n\t\tif (!arguments.length) return data;\n\t\tdata = p;\n\t\treturn timeline;\n\t};\n\ttimeline.Width  = function (p) {\n\t\tif (!arguments.length) return Width;\n\t\tWidth = p;\n\t\treturn timeline;\n\t};\n\ttimeline.svg  = function (p) {\n\t\tif (!arguments.length) return svg;\n\t\tsvg = p;\n\t\treturn timeline;\n\t};\n\ttimeline.margin  = function (p) {\n\t\tif (!arguments.length) return margin;\n\t\tmargin = p;\n\t\treturn timeline;\n\t};\n\n\treturn timeline;\n};"]}]}